// For license information, see `https://assets.adobedtm.com/6a203c8a0ff8/bb846fdd3b08/launch-7668fb698976-development.js`.
window._satellite=window._satellite||{},window._satellite.container={buildInfo:{minified:!0,buildDate:"2024-08-23T08:10:38Z",turbineBuildDate:"2024-08-22T17:32:44Z",turbineVersion:"28.0.0"},environment:{id:"EN5eca3c88e202428da04cd2dcc6dda1c4",stage:"development"},dataElements:{},extensions:{"adobe-alloy":{displayName:"Adobe Experience Platform Web SDK",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP5f4ceed2b75246a7aef8d57a2a148d09/",settings:{instances:[{name:"alloy",edgeConfigId:"96f1c7b0-9607-404a-a6c3-a1e71445a99f",stagingEdgeConfigId:"96f1c7b0-9607-404a-a6c3-a1e71445a99f",developmentEdgeConfigId:"96f1c7b0-9607-404a-a6c3-a1e71445a99f",personalizationStorageEnabled:!0}]},modules:{"adobe-alloy/dist/lib/actions/sendEvent/index.js":{name:"send-event",displayName:"Send event",script:function(e,n,t,r){"use strict";var o,i=t("./createSendEvent"),a=t("../../instanceManager/index"),c=t("../../index").sendEventCallbackStorage,u=t("../../utils/createGetConfigOverrides");e.exports=i({instanceManager:a,sendEventCallbackStorage:c,getConfigOverrides:u(null===(o=r.environment)||void 0===o?void 0:o.stage)})}},"adobe-alloy/dist/lib/instanceManager/index.js":{script:function(e,n,t,r){"use strict";var o,i=t("../alloy"),a=i.createInstance,c=i.createEventMergeId,u=t("./createInstanceManager"),s=t("./injectWrapOnBeforeEventSend"),d=t("../utils/createGetConfigOverrides"),l=s({version:"2.26.0"});e.exports=u({turbine:r,window:window,createInstance:a,createEventMergeId:c,orgId:_satellite.company.orgId,wrapOnBeforeEventSend:l,getConfigOverrides:d(null===(o=r.environment)||void 0===o?void 0:o.stage)})}},"adobe-alloy/dist/lib/actions/sendEvent/createSendEvent.js":{script:function(e,n,t){"use strict";function r(e,n){if(null==e)return{};var t,r,i=o(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.includes(t)||{}.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function o(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}var i=["instanceName"],a=t("../../utils/clone");e.exports=function(e){var n=e.instanceManager,t=e.sendEventCallbackStorage,o=e.getConfigOverrides;return function(e){var c=e.instanceName,u=r(e,i);u.edgeConfigOverrides=o(u);var s=n.getInstance(c);if(!s)throw new Error('Failed to send event for instance "'.concat(c,'". No matching instance was configured with this name.'));return u.xdm&&(u.xdm=a(u.xdm)),u.data&&(u.data=a(u.data)),s("sendEvent",u).then((function(e){t.triggerEvent(e)}))}}}},"adobe-alloy/dist/lib/index.js":{script:function(e,n,t){"use strict";var r=t("./createEventMergeIdCache"),o=t("./createSendEventCallbackStorage"),i=t("./createMediaCollectionSessionStorage"),a=t("./createVariableStore");n.eventMergeIdCache=r(),n.sendEventCallbackStorage=o(),n.mediaCollectionSessionStorage=i(),n.variableStore=a()}},"adobe-alloy/dist/lib/utils/createGetConfigOverrides.js":{script:function(e){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function t(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function r(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(n){o(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function o(e,n,t){return(n=i(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e){var t=a(e,"string");return"symbol"==n(t)?t:t+""}function a(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var c=function(e){return function(n){var t,o,i,a,c,u=n.edgeConfigOverrides;if(u){if(u[e])c=r({},u[e]);else{if(u.development||u.staging||u.production)return;c=u}if(0!==Object.keys(c).length){if((null===(t=c.com_adobe_analytics)||void 0===t||null===(t=t.reportSuites)||void 0===t?void 0:t.length)>0&&(c.com_adobe_analytics.reportSuites=c.com_adobe_analytics.reportSuites.flatMap((function(e){return e.includes(",")?e.split(/,\s*/gi):e})).map((function(e){return e.trim()})).filter(Boolean)),void 0!==(null===(o=c.com_adobe_identity)||void 0===o?void 0:o.idSyncContainerId)&&null!==(null===(i=c.com_adobe_identity)||void 0===i?void 0:i.idSyncContainerId)&&"string"==typeof(null===(a=c.com_adobe_identity)||void 0===a?void 0:a.idSyncContainerId)){var s=parseInt(c.com_adobe_identity.idSyncContainerId.trim(),10);if(Number.isNaN(s))throw new Error('The ID sync container ID "'.concat(c.com_adobe_identity.idSyncContainerId,'" is not a valid integer.'));c.com_adobe_identity.idSyncContainerId=s}return c}}}};e.exports=c}},"adobe-alloy/dist/lib/utils/clone.js":{script:function(e){"use strict";e.exports=function(e){return JSON.parse(JSON.stringify(e))}}},"adobe-alloy/dist/lib/alloy.js":{script:function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(null==e)return{};var t,r,o=i(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.includes(t)||{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function i(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}function a(e,n){return s(e)||u(e,n)||y(e,n)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=i.call(t)).done)&&(c.push(r.value),c.length!==n);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}function s(e){if(Array.isArray(e))return e}function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){f(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function f(e,n,t){return(n=p(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e){var n=g(e,"string");return"symbol"==w(n)?n:n+""}function g(e,n){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function m(e){return b(e)||h(e)||y(e)||v()}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,n){if(e){if("string"==typeof e)return E(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?E(e,n):void 0}}function h(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function b(e){if(Array.isArray(e))return E(e)}function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function C(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)e[r]=t[r]}return e}function I(e,n){function t(t,r,o){if("undefined"!=typeof document){"number"==typeof(o=C({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in o)o[a]&&(i+="; "+a,!0!==o[a]&&(i+="="+o[a].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+i}}function r(n){if("undefined"!=typeof document&&(!arguments.length||n)){for(var t=document.cookie?document.cookie.split("; "):[],r={},o=0;o<t.length;o++){var i=t[o].split("="),a=i.slice(1).join("=");try{var c=decodeURIComponent(i[0]);if(r[c]=e.read(a,c),n===c)break}catch(e){}}return n?r[n]:r}}return Object.create({set:t,get:r,remove:function(e,n){t(e,"",C({},n,{expires:-1}))},withAttributes:function(e){return I(this.converter,C({},this.attributes,e))},withConverter:function(e){return I(C({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}function S(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function O(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(Et[e[n+0]]+Et[e[n+1]]+Et[e[n+2]]+Et[e[n+3]]+"-"+Et[e[n+4]]+Et[e[n+5]]+"-"+Et[e[n+6]]+Et[e[n+7]]+"-"+Et[e[n+8]]+Et[e[n+9]]+"-"+Et[e[n+10]]+Et[e[n+11]]+Et[e[n+12]]+Et[e[n+13]]+Et[e[n+14]]+Et[e[n+15]]).toLowerCase()}function k(){if(!pe&&!(pe="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pe(Ct)}function P(e,n,t){if(It.randomUUID&&!n&&!e)return It.randomUUID();var r=(e=e||{}).random||(e.rng||k)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var o=0;o<16;++o)n[t+o]=r[o];return n}return O(r)}function D(e){return"object"===w(e)||void 0===e}function T(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(D(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!D(t[o])&&r===String(t[o]).toLowerCase())return!0;return!1}}}function R(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(D(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!D(t[o])&&r===String(t[o]).toLowerCase())return!1;return!0}}}function A(){return{matches:function(e,n){return void 0!==e[n]&&null!==e[n]}}}function N(){return{matches:function(e,n){return void 0===e[n]||null===e[n]}}}function x(e){return"number"==typeof e}function M(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e[n];if(!x(r))return!1;for(var o=0;o<t.length;o+=1)if(x(t[o])&&r>t[o])return!0;return!1}}}function q(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e[n];if(!x(r))return!1;for(var o=0;o<t.length;o+=1)if(x(t[o])&&r>=t[o])return!0;return!1}}}function j(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e[n];if(!x(r))return!1;for(var o=0;o<t.length;o+=1)if(x(t[o])&&r<t[o])return!0;return!1}}}function L(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e[n];if(!x(r))return!1;for(var o=0;o<t.length;o+=1)if(x(t[o])&&r<=t[o])return!0;return!1}}}function _(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(D(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!D(t[o])&&-1!==r.indexOf(String(t[o]).toLowerCase()))return!0;return!1}}}function U(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(D(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!D(t[o])&&-1!==r.indexOf(String(t[o]).toLowerCase()))return!1;return!0}}}function B(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(D(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!D(t[o])&&r.startsWith(String(t[o]).toLowerCase()))return!0;return!1}}}function F(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(D(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!D(t[o])&&r.endsWith(t[o].toLowerCase()))return!0;return!1}}}function H(e){return jc[e]}function V(e){return void 0===e}function z(e,n,t){switch(n){case xc.GREATER_THAN:return e>t;case xc.GREATER_THAN_OR_EQUAL_TO:return e>=t;case xc.LESS_THAN:return e<t;case xc.LESS_THAN_OR_EQUAL_TO:return e<=t;case xc.EQUALS:return e===t;case xc.NOT_EQUALS:return e!==t;default:return!1}}function J(e,n){for(var t=0;t<n.length;t+=1)if(!V(e[n[t]]))return e[n[t]]}function Q(e,n){for(var t=Object.keys(e),r=0;r<t.length;r+=1){var o=t[r],i=n.event;if((void 0===i?{}:i)[t[r]]!==e[o])return!1}return!0}function G(e,n,t,r){return e.reduce((function(e,o){var i=J(o,Lc);if(!i)return e;var a=n.events[i];if(!a)return e;var c=J(o,_c);if(!c)return e;var u=a[c];if(!u)return e;if(!Q(o,u))return e;var s=u.count,d=void 0===s?1:s;return V(t)||V(r)||u.timestamp>=t&&u.timestamp<=r?e+d:e}),0)}function X(e,n,t,r){var o=t;return e.every((function(e){var t=J(e,Lc);if(!t)return!1;var i=n.events[t];if(!i)return!1;var a=J(e,_c);if(!a)return!1;var c=i[a];if(!Q(e,c))return!1;if(null===c||V(c)||0===c.count)return!1;var u=(V(o)||c.timestamp>=o)&&(V(r)||c.timestamp<=r);return o=c.timestamp,u}))?1:0}function W(e,n){for(var t=!0,r=0;r<n.length;r+=1)t=t&&n[r].evaluate(e);return t}function Y(e,n){for(var t=!1,r=0;r<n.length;r+=1)if(t=t||n[r].evaluate(e))return!0;return!1}function $(e,n){return{version:e,rules:n}}function K(e,n){return{execute:function(t){return e.evaluate(t)?n:[]},toString:function(){return"Rule{condition=".concat(e,", consequences=").concat(n,"}")}}}function Z(e,n){return{evaluate:function(e){return n.evaluate(e)},toString:function(){return"Condition{type=".concat(e,", definition=").concat(n,"}")}}}function ee(e,n,t){return{id:e,type:n,detail:t}}function ne(e,n){return{evaluate:function(t){return Mc.AND===e?W(t,n):Mc.OR===e&&Y(t,n)}}}function te(e,n,t){return{evaluate:function(r){var o=H(n);return!!o&&o.matches(r,e,t)}}}function re(e,n,t,r,o,i){return{evaluate:function(a){return z(qc.ORDERED===i?X(e,a,r,o):G(e,a,r,o),n,t)}}}function oe(e){return te(e.key,e.matcher,e.values)}function ie(e){return ne(e.logic,e.conditions.map(ce))}function ae(e){var n=e.events,t=e.from,r=e.to;return re(n,e.matcher,e.value,t,r,e.searchType)}function ce(e){var n=e.type,t=e.definition;if(Nc.MATCHER===n)return Z(n,oe(t));if(Nc.GROUP===n)return Z(n,ie(t));if(Nc.HISTORICAL===n)return Z(n,ae(t));throw new Error("Can not parse condition")}function ue(e){return ee(e.id,e.type,e.detail)}function se(e){var n=e.condition,t=e.consequences;return K(ce(n),t.map(ue))}function de(e){return $(e.version,e.rules.map(se))}function le(e){var n=de(e),t=n.version,r=n.rules;return{execute:function(e){return r.map((function(n){return n.execute(e)})).filter((function(e){return e.length>0}))},getVersion:function(){return t},numRules:function(){return r.length}}}Object.defineProperty(n,"__esModule",{value:!0}),n.deepAssign=n.createInstance=n.createEventMergeId=void 0;for(var fe,pe,ge=r(t("@adobe/reactor-query-string")),me=["datastreamId"],ve=["edgeConfigOverrides"],ye=["xdm","data","documentUnloading","type","mergeId","datasetId","edgeConfigOverrides"],he=["priority"],be=["trackingLabel","scopeType"],Ee=["standard","version"],we=function(e){return null==e},Ce=function(e){return!we(e)&&!Array.isArray(e)&&"object"===w(e)},Ie=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.length<2?Object.assign.apply(Object,n):n.reduce((function(e,n){return Ce(n)&&Object.keys(n).forEach((function(t){var r;Array.isArray(n[t])?Array.isArray(e[t])?(r=e[t]).push.apply(r,m(n[t])):e[t]=m(n[t]):e[t]=n[t]})),e}))},Se=I({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),Oe={get:Se.get.bind(Se),set:Se.set.bind(Se),remove:Se.remove.bind(Se),withConverter:Se.withConverter.bind(Se)},ke=function(e,n){Object.keys(n).forEach((function(t){Ce(e[t])&&Ce(n[t])?ke(e[t],n[t]):e[t]=n[t]}))},Pe=n.deepAssign=function(e){if(we(e))throw new TypeError('deepAssign "target" cannot be null or undefined');for(var n=Object(e),t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return r.forEach((function(e){return ke(n,Object(e))})),n},De=function(e,n){return function(t){var r=n.split(".").reduce((function(e,n){return e[n]=e[n]||{},e[n]}),e);Pe(r,t)}},Te=function(){var e=[];return{add:function(n){e.push(n)},call:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return Promise.all(e.map((function(e){return e.apply(void 0,t)})))}}},Re=function(e){var n=e.logger,t=e.cookieJar;return l(l({},t),{},{set:function(e,r,o){n.info("Setting cookie",l({name:e,value:r},o)),t.set(e,r,o)}})},Ae=function(){var e=0,n=Promise.resolve();return{addTask:function(t){e+=1;var r=function(){return t().finally((function(){e-=1}))};return n=n.then(r,r)},get length(){return e}}},Ne=function(){for(var e=[],n=0;n<256;n++){for(var t=n,r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e.push(t)}return function(n,t){n=unescape(encodeURIComponent(n)),t||(t=0),t=~t;for(var r=0;r<n.length;r++){var o=255&(t^n.charCodeAt(r));t=t>>>8^e[o]}return(t=~t)>>>0}}(),xe=function(){var e={};return e.promise=new Promise((function(n,t){e.resolve=n,e.reject=t})),e},Me=function(e,n){return e===n},qe=function(e,n,t){for(var r=0;r<e.length;r+=1)if(t(e[r],n))return r;return-1},je=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Me;return e.filter((function(t,r){return qe(e,t,n)===r}))},Le=function(e,n){return e.appendChild(n)},_e=function(e,n){Object.keys(n).forEach((function(t){if("style"===t&&Ce(n[t])){var r=n[t];Object.keys(r).forEach((function(n){e.style[n]=r[n]}))}else e[t]=n[t]}))},Ue=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:document).createElement(e);return Object.keys(n).forEach((function(e){o.setAttribute(e,n[e])})),_e(o,t),r.forEach((function(e){return Le(o,e)})),o},Be="BODY",Fe="IFRAME",He="IMG",Ve="DIV",ze="STYLE",Je="SCRIPT",Qe="HEAD",Ge=function(e){var n=e.src,t=e.currentDocument,r=void 0===t?document:t;return new Promise((function(e,t){Ue(He,{src:n},{onload:e,onerror:t,onabort:t},[],r)}))},Xe=function(e){return"function"==typeof e},We=function(e){return Array.isArray(e)&&e.length>0},Ye=function(e){return Array.isArray(e)?e:null==e?[]:[].slice.call(e)},$e=/^\s*>/,Ke=function(e,n){return $e.test(n)?Ye(e.querySelectorAll(":scope ".concat(n))):Ye(e.querySelectorAll(n))},Ze=":shadow",en=function(e){return e.split(Ze)},nn=function(e,n){var t=n;if(!t.startsWith(">"))return t;var r=e instanceof Element||e instanceof Document?":scope":":host";return"".concat(r," ").concat(t)},tn=function(e,n){var t=en(n);if(t.length<2)return Ke(e,n);for(var r=e,o=0;o<t.length;o+=1){var i=t[o].trim();if(""===i&&r.shadowRoot)r=r.shadowRoot;else{var a=nn(r,i),c=Ke(r,a);if(0===c.length||!c[0]||!c[0].shadowRoot)return c;r=c[0].shadowRoot}}},rn=function(e){return-1!==e.indexOf(Ze)},on=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return rn(e)?tn(n,e):Ke(n,e)},an="MutationObserver",cn="requestAnimationFrame",un={childList:!0,subtree:!0},sn="visibilityState",dn="visible",ln=100,fn=5e3,pn=function(e){return new Error("Could not find: ".concat(e))},gn=function(e){return new Promise(e)},mn=function(e){return Xe(e[an])},vn=function(e,n,t,r,o){return gn((function(i,a){var c,u=new e[an]((function(){var e=o(t);We(e)&&(u.disconnect(),c&&clearTimeout(c),i(e))}));c=setTimeout((function(){u.disconnect(),a(pn(t))}),r),u.observe(n,un)}))},yn=function(e){return e[sn]===dn},hn=function(e,n,t,r){return gn((function(o,i){var a=function(){var t=r(n);We(t)?o(t):e[cn](a)};a(),setTimeout((function(){i(pn(n))}),t)}))},bn=function(e,n,t){return gn((function(r,o){var i=function(){var n=t(e);We(n)?r(n):setTimeout(i,ln)};i(),setTimeout((function(){o(pn(e))}),n)}))},En=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fn,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:document,i=n(e);return We(i)?Promise.resolve(i):mn(r)?vn(r,o,e,t,n):yn(o)?hn(r,e,t,n):bn(e,t,n)},wn=function(e,n){return n.matches?n.matches(e):n.msMatchesSelector(e)},Cn=function(e){var n=e.parentNode;return n?n.removeChild(e):null},In={name:"Adobe Alloy"},Sn={style:{display:"none",width:0,height:0}},On=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.appendNode,r=void 0===t?Le:t,o=n.awaitSelector,i=void 0===o?En:o,c=n.createNode,u=void 0===c?Ue:c,s=n.fireImage,d=void 0===s?Ge:s,l=d,f=function(){return i(Be).then((function(n){var t=a(n,1)[0];return e||(e=u(Fe,In,Sn),r(t,e))}))},p=function(e){var n=e.src;return f().then((function(e){var t=e.contentWindow.document;return d({src:n,currentDocument:t})}))};return function(e){var n=e.hideReferrer,t=e.url;return n?p({src:t}):l({src:t})}},kn=function(e){return Ce(e)&&0===Object.keys(e).length},Pn=function(e,n){return we(e)||!Ce(e)?e:Object.keys(e).reduce((function(t,r){var o=e[r];if(Ce(o)){var i=Pn(o,n);return kn(i)?t:l(l({},t),{},f({},r,i))}return n(o)?l(l({},t),{},f({},r,o)):t}),{})},Dn="com.adobe.alloy.",Tn=function(e,n){return e.slice(-n)},Rn="".concat(Dn,"getTld"),An=function(e,n){for(var t="",r=e.location.hostname.toLowerCase().split("."),o=1;o<r.length&&!n.get(Rn);)t=Tn(r,o+=1).join("."),n.set(Rn,Rn,{domain:t});return n.remove(Rn,{domain:t}),t},Nn="kndctr",xn=function(e){return e.replace("@","_")},Mn=function(e,n){return"".concat(Nn,"_").concat(xn(e),"_").concat(n)},qn=function(e,n){var t={};return e.forEach((function(e){var r=n(e);t[r]||(t[r]=[]),t[r].push(e)})),t},jn="Chrome",Ln="Edge",_n="EdgeChromium",Un="Firefox",Bn="IE",Fn="Safari",Hn="Unknown",Vn=function(e){var n,t=!1;return function(){return t||(t=!0,n=e()),n}},zn=[jn,Ln,_n,Bn,Hn],Jn=function(e){var n=e.getBrowser;return Vn((function(){return zn.includes(n())}))},Qn="identity",Gn="consent",Xn="cluster",Wn=function(e){var n=e.orgId,t=Mn(n,Qn);return function(){return Boolean(Oe.get(t))}},Yn=function(e,n){for(var t=Object.keys(e),r=0;r<t.length;r+=1){var o=t[r];if(e[o].test(n))return o}return Hn},$n=function(e){var n=e.userAgent;return Vn((function(){return Yn(f(f(f(f(f(f({},Ln,/Edge\/([0-9\._]+)/),_n,/Edg\/([0-9\.]+)/),jn,/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/),Un,/Firefox\/([0-9\.]+)(?:\s|$)/),Bn,/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/),Fn,/Version\/([0-9\._]+).*Safari/),n)}))},Kn=function(e,n,t){return{getItem:function(r){try{return e[n].getItem(t+r)}catch(e){return null}},setItem:function(r,o){try{return e[n].setItem(t+r,o),!0}catch(e){return!1}},clear:function(){try{return Object.keys(e[n]).forEach((function(r){r.startsWith(t)&&e[n].removeItem(r)})),!0}catch(e){return!1}}}},Zn=function(e){return function(n){var t=Dn+n;return{session:Kn(e,"sessionStorage",t),persistent:Kn(e,"localStorage",t)}}},et=function(e,n){return e.filter((function(e){return n.includes(e)}))},nt=function(e){return"boolean"==typeof e},tt=function(e){return"number"==typeof e&&!Number.isNaN(e)},rt=function(e){var n=parseInt(e,10);return tt(n)&&e===n},ot=function(e,n){return 0===n.indexOf("".concat(Nn,"_").concat(xn(e),"_"))},it=function(e){return"string"==typeof e},at=function(e){return it(e)&&e.length>0},ct=function(){},ut=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t.parser[n.strictMode?"strict":"loose"].exec(e),o={},i=14;i--;)o[t.key[i]]=r[i]||"";return o[t.q.name]={},o[t.key[12]].replace(t.q.parser,(function(e,n,r){n&&(o[t.q.name][n]=r)})),o}},st=S(ut),dt=function(e){var n={},t=e.split(".");switch(t.length){case 1:n.subdomain="",n.domain=e,n.topLevelDomain="";break;case 2:n.subdomain="",n.domain=e,n.topLevelDomain=t[1];break;case 3:n.subdomain="www"===t[0]?"":t[0],n.domain=e,n.topLevelDomain=t[2];break;case 4:n.subdomain="www"===t[0]?"":t[0],n.domain=e,n.topLevelDomain="".concat(t[2],".").concat(t[3])}return n},lt=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dt;it(e)||(e="");var t=st(e)||{},r=t.host,o=void 0===r?"":r,i=t.path,a=void 0===i?"":i,c=t.query,u=void 0===c?"":c,s=t.anchor;return l({path:a,query:u,fragment:void 0===s?"":s},n(o))},ft=function(e){if(we(e)||"object"!==w(e))return null;var n=Pn(e,(function(e){return!(we(e)||!nt(e)&&!tt(e)&&!at(e)&&!We(e))}));return kn(n)?null:n},pt=function(e){return e instanceof Error?e:new Error(e)},gt=function(e){var n=e.error,t=e.message;try{n.message=t}catch(e){}},mt=function(e){var n=e.error,t=e.message,r=pt(n),o="".concat(t,"\nCaused by: ").concat(r.message);return gt({error:r,message:o}),r},vt=function(e){return it(e)&&"true"===e.toLowerCase()},yt=function(e,n){if(tt(e)||it(e)){var t=Math.round(Number(e));if(!Number.isNaN(t))return t}return n},ht=function(e,n,t){return"".concat(e).padStart(n,t)},bt=function(e){var n=e.getFullYear(),t=ht(e.getMonth()+1,2,"0"),r=ht(e.getDate(),2,"0"),o=ht(e.getHours(),2,"0"),i=ht(e.getMinutes(),2,"0"),a=ht(e.getSeconds(),2,"0"),c=ht(e.getMilliseconds(),3,"0"),u=yt(e.getTimezoneOffset(),0),s=u>0?"-":"+",d=ht(Math.floor(Math.abs(u)/60),2,"0"),l=ht(Math.abs(u)%60,2,"0");return"".concat(n,"-").concat(t,"-").concat(r,"T").concat(o,":").concat(i,":").concat(a,".").concat(c).concat(s).concat(d,":").concat(l)},Et=[],wt=0;wt<256;++wt)Et.push((wt+256).toString(16).slice(1));var Ct=new Uint8Array(16),It={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},St=function(e){return function(n,t){return null==n?n:e.call(this,n,t)}},Ot=function(e,n){return function(t,r){return n.call(this,e.call(this,t,r),r)}},kt=function(e,n){return function(t,r){var o=this,i=[],a=[e,n].reduce((function(e,n){try{return n.call(o,e,r)}catch(n){return i.push(n),e}}),t);if(i.length)throw new Error(i.join("\n"));return a}},Pt=function(e,n,t){return Object.assign(Ot(e,n),e,t)},Dt=function(e,n,t){return Object.assign(Ot(e,St(n)),e,t)},Tt=function(e,n,t){return Object.assign(kt(St(n),e),e,t)},Rt=function(e,n,t,r){if(!e)throw new Error("'".concat(t,"': Expected ").concat(r,", but got ").concat(JSON.stringify(n),"."))},At=function(e,n){return Rt(nt(e),e,n,"true or false"),e},Nt=function(e,n){return Rt(Xe(e),e,n,"a function"),e},xt=function(e,n){return function(t,r){var o,i=this,a=e.find((function(e){try{return o=e.call(i,t,r),!0}catch(e){return!1}}));return Rt(a,t,r,n),o}},Mt=function(e){return function(n,t){var r=this;Rt(Array.isArray(n),n,t,"an array");var o=[],i=n.map((function(i,a){try{return e.call(r,i,"".concat(t,"[").concat(a,"]"),n)}catch(e){return void o.push(e.message)}}));if(o.length)throw new Error(o.join("\n"));return i}},qt=function(e){return function(n){return null==n?e:n}},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This field has been deprecated";return function(n,t){var r=e;return void 0!==n&&(t&&(r="'".concat(t,"': ").concat(r)),this&&this.logger&&this.logger.warn(r)),n}},Lt=function(e){return function(n,t){return Rt(n===e,n,t,"".concat(e)),n}},_t=function(e){return function(n,t){var r=this;Rt(Ce(n),n,t,"an object");var o=[],i={};if(Object.keys(n).forEach((function(a){var c=n[a],u=t?"".concat(t,".").concat(a):a;try{var s=e.call(r,c,u);void 0!==s&&(i[a]=s)}catch(e){o.push(e.message)}})),o.length)throw new Error(o.join("\n"));return i}},Ut=function(e,n){return function(t,r){return Rt(t>=n,t,r,"".concat(e," greater than or equal to ").concat(n)),t}},Bt=function(e,n){return function(t,r){return Rt(t<=n,t,r,"".concat(e," less than or equal to ").concat(n)),t}},Ft=function(e){return function(n,t){var r=[];if(Object.keys(n).forEach((function(n){if(!e[n]){var o=t?"".concat(t,".").concat(n):n;r.push("'".concat(o,"': Unknown field."))}})),r.length)throw new Error(r.join("\n"));return n}},Ht=function(e){return function(n,t){return Ce(n)?Rt(!kn(n),n,t,e):Rt(n.length>0,n,t,e),n}},Vt=function(e){return function(n,t){var r=this;Rt(Ce(n),n,t,"an object");var o=[],i={};if(Object.keys(e).forEach((function(a){var c=n[a],u=e[a],s=t?"".concat(t,".").concat(a):a;try{var d=u.call(r,c,s);void 0!==d&&(i[a]=d)}catch(e){o.push(e.message)}})),Object.keys(n).forEach((function(e){Object.prototype.hasOwnProperty.call(i,e)||(i[e]=n[e])})),o.length)throw new Error(o.join("\n"));return i}},zt=function(e,n,t){return function(r,i){Rt(Ce(r),r,i,"an object");var a=r[e],c=r[t],u=o(r,[e,t].map(p)),s=n(a,i);if(void 0!==s){var d="The field '".concat(e,"' is deprecated. Use '").concat(t,"' instead.");if(i&&(d="'".concat(i,"': ").concat(d)),void 0!==c&&c!==s)throw new Error(d);this&&this.logger&&this.logger.warn(d)}return l(f({},t,c||s),u)}},Jt=function(){var e=[];return function(n,t){return Rt(-1===e.indexOf(n),n,t,"a unique value across instances"),e.push(n),n}},Qt=function(e){for(var n=Object.create(null),t=0;t<e.length;t+=1){var r=e[t];if(r in n)return!1;n[r]=!0}return!0},Gt=function(){return function(e,n){Rt(Qt(e),e,n,"array values to be unique")}},Xt=/^[a-z0-9.-]{1,}$/i,Wt=function(e,n){return Rt(Xt.test(e),e,n,"a valid domain"),e},Yt=function(e,n){return Rt(rt(e),e,n,"an integer"),e},$t=function(e,n){return Rt(tt(e),e,n,"a number"),e},Kt=function(e){try{return null!==RegExp(e)}catch(e){return!1}},Zt=function(e,n){return Rt(Kt(e),e,n,"a regular expression"),e},er=function(e,n){if(null==e)throw new Error("'".concat(n,"' is a required option"));return e},nr=function(e,n){return Rt(it(e),e,n,"a string"),e},tr=function(e){return function(n,t){return Rt(e.test(n),n,t,"does not match the ".concat(e.toString())),n}},rr=function(e){return e};rr.default=function(e){return Pt(this,qt(e))},rr.required=function(){return Pt(this,er)},rr.deprecated=function(e){return Pt(this,jt(e))};var or=function(){return Dt(this,Wt)},ir=function(e){return Dt(this,Ut("an integer",e))},ar=function(e){return Dt(this,Ut("a number",e))},cr=function(e){return Dt(this,Bt("a number",e))},ur=function(){return Dt(this,Yt,{minimum:ir})},sr=function(){return Dt(this,Ht("a non-empty string"))},dr=function(){return Dt(this,Ht("a non-empty array"))},lr=function(){return Dt(this,Ht("a non-empty object"))},fr=function(){return Dt(this,Zt)},pr=function(e){return Dt(this,tr(e))},gr=function(){return Dt(this,Jt())},mr=function(){return Dt(this,Gt())},vr=function(){return this},yr=function(e){return Dt(this,Mt(e),{nonEmpty:dr,uniqueItems:mr})},hr=function(){return Dt(this,At)},br=function(){return Dt(this,Nt)},Er=function(e){return Dt(this,Lt(e))},wr=function(){return Dt(this,$t,{minimum:ar,maximum:cr,integer:ur,unique:gr})},Cr=function(e){return Dt(this,_t(e),{nonEmpty:lr})},Ir=function(e){return{noUnknownFields:function(){return Dt(this,Ft(e))},nonEmpty:lr,concat:function(n){var t=l(l({},e),n.schema);return Dt(this,n,Ir(t))},renamed:function(e,n,t){return Tt(this,zt(e,n,t))},schema:e}},Sr=function(e){return Dt(this,Vt(e),Ir(e))},Or=function(){return Dt(this,nr,{regexp:fr,domain:or,nonEmpty:sr,unique:gr,matches:pr})},kr=function(e,n){return Pt(this,xt(e,n))
}.bind(rr),Pr=vr.bind(rr),Dr=yr.bind(rr),Tr=hr.bind(rr),Rr=br.bind(rr),Ar=Er.bind(rr),Nr=wr.bind(rr),xr=Cr.bind(rr),Mr=Sr.bind(rr),qr=Or.bind(rr),jr=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return kr(n.map(Ar),"one of these values: [".concat(JSON.stringify(n),"]"))},Lr=xr(Dr(Mr({authenticatedState:jr("ambiguous","authenticated","loggedOut"),id:qr(),namespace:Mr({code:qr()}).noUnknownFields(),primary:Tr(),xid:qr()}).noUnknownFields()).required()),_r=Mr({}),Ur="alloy_debug",Br=function(e){var n=e.console,t=e.locationSearch,r=e.createLogger,o=e.instanceName,i=e.createNamespacedStorage,a=e.getMonitors,c=ge.default.parse(t),u=i("instance.".concat(o,".")),s=u.session.getItem("debug"),d="true"===s,l=null===s,f=function(){return d},p=function(e,n){var t=n.fromConfig;t&&!l||(d=e),t||(u.session.setItem("debug",e.toString()),l=!1)};return void 0!==c[Ur]&&p(vt(c[Ur]),{fromConfig:!1}),{setDebugEnabled:p,logger:r({getDebugEnabled:f,context:{instanceName:o},getMonitors:a,console:n}),createComponentLogger:function(e){return r({getDebugEnabled:f,context:{instanceName:o,componentName:e},getMonitors:a,console:n})}}},Fr=["onComponentsRegistered","onBeforeEvent","onBeforeRequest","onResponse","onRequestFailure","onClick","onDecision"],Hr=function(e,n){return function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Promise.all(e.getLifecycleCallbacks(n).map((function(e){return new Promise((function(n){n(e.apply(void 0,r))}))})))}},Vr=function(e){return function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return Promise.resolve().then((function(){return e.apply(void 0,t)}))}},zr=function(e){return Fr.reduce((function(n,t){return n[t]=Vr(Hr(e,t)),n}),{})},Jr=function(e,n){return function(){var t;try{t=e.apply(void 0,arguments)}catch(e){throw mt({error:e,message:n})}return t instanceof Promise&&(t=t.catch((function(e){throw mt({error:e,message:n})}))),t}},Qr=function(){var e={},n={},t={},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=et(Object.keys(n),Object.keys(t));if(r.length)throw new Error("[ComponentRegistry] Could not register ".concat(e," ")+"because it has existing command(s): ".concat(r.join(",")));Object.keys(t).forEach((function(r){var o=t[r];o.commandName=r,o.run=Jr(o.run,"[".concat(e,"] An error occurred while executing the ").concat(r," command.")),n[r]=o}))},o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(n).forEach((function(r){t[r]=t[r]||[],t[r].push(Jr(n[r],"[".concat(e,"] An error occurred while executing the ").concat(r," lifecycle hook.")))}))};return{register:function(n,t){var i=t.commands,a=t.lifecycle;r(n,i),o(n,a),e[n]=t},getCommand:function(e){return n[e]},getCommandNames:function(){return Object.keys(n)},getLifecycleCallbacks:function(e){return t[e]||[]},getComponentNames:function(){return Object.keys(e)}}},Gr=function(e){var n=e.logger,t=e.sendFetchRequest,r=e.sendBeaconRequest,o=e.isRequestRetryable,i=e.getRequestRetryDelay;return function(e){var a=e.requestId,c=e.url,u=e.payload,s=e.useSendBeacon,d=JSON.stringify(u),f=JSON.parse(d);n.logOnBeforeNetworkRequest({url:c,requestId:a,payload:f});var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(s?r:t)(c,d).then((function(t){var r;if(o({response:t,retriesAttempted:e})){var u=i({response:t,retriesAttempted:e});return new Promise((function(n){setTimeout((function(){n(p(e+1))}),u)}))}try{r=JSON.parse(t.body)}catch(e){}return n.logOnNetworkResponse(l(l({requestId:a,url:c,payload:f},t),{},{parsedBody:r,retriesAttempted:e})),{statusCode:t.statusCode,body:t.body,parsedBody:r,getHeader:t.getHeader}}))};return p().catch((function(e){throw n.logOnNetworkError({requestId:a,url:c,payload:f,error:e}),mt({error:e,message:"Network request failed."})}))}},Xr=function(e){var n=e.logger;return function(e){if(e){var t=e.split(";");if(t.length>=2&&t[1].length>0)try{var r=parseInt(t[1],10);if(!Number.isNaN(r))return{regionId:r}}catch(e){}n.warn('Invalid adobe edge: "'.concat(e,'"'))}return{}}},Wr="in",Yr="out",$r="pending",Kr="general",Zr="declinedConsent",eo="default",no="initial",to="new",ro=function(e){var n=new Error(e);return n.code=Zr,n.message=e,n},oo=function(e){var n=e.logger,t=[],r=function(){for(;t.length;)t.shift().resolve()},o=function(){for(;t.length;)t.shift().reject(ro("The user declined consent."))},i=function(){return Promise.resolve()},a=function(){return Promise.resolve()},c=function(){return Promise.reject(ro("No consent preferences have been set."))},u=function(){return Promise.reject(ro("The user declined consent."))},s=function(e){if(e)return Promise.reject(new Error("Consent is pending."));var n=xe();return t.push(n),n.promise};return{in:function(e){e===eo?this.awaitConsent=i:(e===no?n.info("Loaded user consent preferences. The user previously consented."):e===to&&this.awaitConsent!==a&&n.info("User consented."),r(),this.awaitConsent=a)},out:function(e){e===eo?(n.warn("User consent preferences not found. Default consent of out will be used."),this.awaitConsent=c):(e===no?n.warn("Loaded user consent preferences. The user previously declined consent."):e===to&&this.awaitConsent!==u&&n.warn("User declined consent."),o(),this.awaitConsent=u)},pending:function(e){e===eo&&n.info("User consent preferences not found. Default consent of pending will be used. Some commands may be delayed."),this.awaitConsent=s},awaitConsent:function(){return Promise.reject(new Error("Consent has not been initialized."))},withConsent:function(){return this.awaitConsent(!0)},current:function(){switch(this.awaitConsent){case i:return{state:"in",wasSet:!1};case a:return{state:"in",wasSet:!0};case c:return{state:"out",wasSet:!1};case u:return{state:"out",wasSet:!0};case s:return{state:"pending",wasSet:!1};default:return{state:"in",wasSet:!1}}}}},io=function(e){var n=e.generalConsentState,t=e.logger,r=function(e,r){switch(e[Kr]){case Wr:n.in(r);break;case Yr:n.out(r);break;case $r:n.pending(r);break;default:t.warn("Unknown consent value: ".concat(e[Kr]))}};return{initializeConsent:function(e,n){n[Kr]?r(n,no):r(e,eo)},setConsent:function(e){r(e,to)},suspend:function(){n.pending()},awaitConsent:function(){return n.awaitConsent()},withConsent:function(){return n.withConsent()},current:function(){return n.current()}}},ao=function(e){return e&&e._experience&&e._experience.decisioning&&We(e._experience.decisioning.propositions)?e._experience.decisioning.propositions:[]},co=function(){var e,n,t={},r=!1,o=!1,i=!0,a=function(e){if(o)throw new Error("".concat(e," cannot be called after event is finalized."))},c={hasQuery:function(){return Object.prototype.hasOwnProperty.call(this.getContent(),"query")},getContent:function(){var r=JSON.parse(JSON.stringify(t));return e&&Pe(r,{xdm:e}),n&&Pe(r,{data:n}),r},setUserXdm:function(n){a("setUserXdm"),e=n},setUserData:function(e){a("setUserData"),n=e},mergeXdm:function(e){a("mergeXdm"),e&&Pe(t,{xdm:e})},mergeData:function(e){a("mergeData"),e&&Pe(t,{data:e})},mergeMeta:function(e){a("mergeMeta"),e&&Pe(t,{meta:e})},mergeQuery:function(e){a("mergeQuery"),e&&Pe(t,{query:e})},documentMayUnload:function(){r=!0},finalize:function(r){if(!o){var a=je([].concat(m(ao(e)),m(ao(t.xdm))),(function(e,n){return e===n||e.id&&n.id&&e.id===n.id&&e.scope&&n.scope&&e.scope===n.scope}));if(e&&this.mergeXdm(e),a.length>0&&(t.xdm._experience.decisioning.propositions=a),n&&c.mergeData(n),o=!0,r){i=!1;var u={xdm:t.xdm||{},data:t.data||{}},s=r(u);i=!1!==s,t.xdm=u.xdm||{},t.data=u.data||{},kn(t.xdm)&&delete t.xdm,kn(t.data)&&delete t.data}}},getDocumentMayUnload:function(){return r},isEmpty:function(){return kn(t)&&(!e||kn(e))&&(!n||kn(n))},shouldSend:function(){return i},getViewName:function(){if(e&&e.web&&e.web.webPageDetails)return e.web.webPageDetails.viewName},toJSON:function(){if(!o)throw new Error("toJSON called before finalize");return t}};return c},uo="Retry-After",so="x-adobe-edge",lo=function(e){var n=e.extractEdgeInfo;return function(e){var t=e.content,r=void 0===t?{}:t,o=e.getHeader,i=r.handle,a=void 0===i?[]:i,c=r.errors,u=void 0===c?[]:c,s=r.warnings,d=void 0===s?[]:s;return{getPayloadsByType:function(e){return a.filter((function(n){return n.type===e})).flatMap((function(e){return e.payload}))},getErrors:function(){return u},getWarnings:function(){return d},getEdge:function(){return n(o(so))},toJSON:function(){return r}}}},fo="configure",po="setDebug",go=function(e){var n,t=e.logger,r=e.configureCommand,o=e.setDebugCommand,i=e.handleError,a=e.validateCommandOptions,c=function(e,i){var c;if(e===fo){if(n)throw new Error("The library has already been configured and may only be configured once.");c=function(){return(n=r(i)).then((function(){}))}}else{if(!n)throw new Error("The library must be configured first. Please do so by executing the configure command.");c=e===po?function(){return o(i)}:function(){return n.then((function(n){var t=n.getCommand(e);if(!t||!Xe(t.run)){var r=[fo,po].concat(n.getCommandNames()).join(", ");throw new Error("The ".concat(e," command does not exist. List of available commands: ").concat(r,"."))}var o=a({command:t,options:i});return t.run(o)}),(function(){return t.warn("An error during configuration is preventing the ".concat(e," command from executing.")),new Promise((function(){}))}))}}return c};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r){var o=c(e,n);t.logOnBeforeCommand({commandName:e,options:n}),r(o())})).catch((function(n){return i(n,"".concat(e," command"))})).catch((function(r){throw t.logOnCommandRejected({commandName:e,options:n,error:r}),r})).then((function(r){var o=Ce(r)?r:{};return t.logOnCommandResolved({commandName:e,options:n,result:o}),o}))}},mo="https://adobe.ly/3sHgQHb",vo=function(e){var n=e.command,t=e.options,r=n.commandName,o=n.documentationUri,i=void 0===o?mo:o,a=n.optionsValidator,c=t;if(a)try{c=a(t)}catch(e){var u="Invalid ".concat(r," command options:\n\t - ").concat(e," For command documentation see: ").concat(i);throw new Error(u)}return c},yo="https://adobe.ly/3sHh553",ho=function(e){var n=e.combinedConfigValidator,t=e.options,r=e.logger;try{return n.noUnknownFields().required().call({logger:r},t)}catch(e){throw new Error("Resolve these configuration problems:\n\t - ".concat(e.message.split("\n").join("\n\t - "),"\nFor configuration documentation see: ").concat(yo))}},bo=function(e,n,t){return t.reduce((function(t,r){var o=r.buildOnInstanceConfiguredExtraParams;return o&&(t=l(l({},t),o({config:e,logger:n}))),t}),{})},Eo=function(e){var n=[],t={get enabled(){return e.enabled},flush:function(){n.forEach((function(n){var t=n.method,r=n.args;return e[t].apply(e,m(r))}))}};return Object.keys(e).filter((function(n){return"function"==typeof e[n]})).forEach((function(e){t[e]=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];n.push({method:e,args:r})}})),t},wo=function(e){var n=e.options,t=e.componentCreators,r=e.coreConfigValidators,o=e.createConfig,i=e.logger,a=e.setDebugEnabled,c=Eo(i),u=t.map((function(e){return e.configValidators})).filter((function(e){return e})).reduce((function(e,n){return e.concat(n)}),r),s=o(ho({combinedConfigValidator:u,options:n,logger:c}));a(s.debugEnabled,{fromConfig:!0}),c.flush();var d=bo(s,i,t);return i.logOnInstanceConfigured(l(l({},d),{},{config:s})),s},Co=function(e){var n=e.componentCreators,t=e.lifecycle,r=e.componentRegistry,o=e.getImmediatelyAvailableTools;return n.forEach((function(e){var n,t=e.namespace,i=o(t);try{n=e(i)}catch(e){throw mt({error:e,message:"[".concat(t,"] An error occurred during component creation.")})}r.register(t,n)})),t.onComponentsRegistered({lifecycle:t}).then((function(){return r}))},Io=function(e){return l({},e)},So="edge.adobedc.net",Oo="adobedc.demdex.net",ko="ee",Po=function(){return Mr({debugEnabled:Tr().default(!1),defaultConsent:jr(Wr,Yr,$r).default(Wr),datastreamId:qr().unique().required(),edgeDomain:qr().domain().default(So),edgeBasePath:qr().nonEmpty().default(ko),orgId:qr().unique().required(),onBeforeEventSend:Rr().default(ct),edgeConfigOverrides:_r}).renamed("edgeConfigId",qr().unique(),"datastreamId")},Do=function(e){var n=e.errorPrefix,t=e.logger;return function(e,r){var o=pt(e);if(o.code===Zr)return t.warn("The ".concat(r," could not fully complete. ").concat(o.message)),{};throw gt({error:o,message:"".concat(n," ").concat(o.message)}),o}},To=function(e){var n=e.fetch;return function(e,t){return n(e,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"text/plain; charset=UTF-8"},referrerPolicy:"no-referrer-when-downgrade",body:t}).then((function(e){return e.text().then((function(n){return{statusCode:e.status,getHeader:function(n){return e.headers.get(n)},body:n}}))}))}},Ro=function(e){var n=e.sendBeacon,t=e.sendFetchRequest,r=e.logger;return function(e,o){var i=new Blob([o],{type:"text/plain; charset=UTF-8"});return n(e,i)?Promise.resolve({statusCode:204,getHeader:function(){return null},body:""}):(r.info("Unable to use `sendBeacon`; falling back to `fetch`."),t(e,o))}},Ao=function(e){var n=e.getDebugEnabled,t=e.console,r=e.getMonitors,o=e.context,i="[".concat(o.instanceName,"]");o.componentName&&(i+=" [".concat(o.componentName,"]"));var a=function(e,n){var t=r();if(t.length>0){var i=l(l({},o),n);t.forEach((function(n){n[e]&&n[e](i)}))}},c=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];a("onBeforeLog",{level:e,arguments:o}),n()&&t[e].apply(t,[i].concat(o))};return{get enabled(){return r().length>0||n()},logOnInstanceCreated:function(e){a("onInstanceCreated",e),c("info","Instance initialized.")},logOnInstanceConfigured:function(e){a("onInstanceConfigured",e),c("info","Instance configured. Computed configuration:",e.config)},logOnBeforeCommand:function(e){a("onBeforeCommand",e),c("info","Executing ".concat(e.commandName," command. Options:"),e.options)},logOnCommandResolved:function(e){a("onCommandResolved",e),c("info","".concat(e.commandName," command resolved. Result:"),e.result)},logOnCommandRejected:function(e){a("onCommandRejected",e),c("error","".concat(e.commandName," command was rejected. Error:"),e.error)},logOnBeforeNetworkRequest:function(e){a("onBeforeNetworkRequest",e),c("info","Request ".concat(e.requestId,": Sending request."),e.payload)},logOnNetworkResponse:function(e){a("onNetworkResponse",e);var n=e.parsedBody||e.body?"response body:":"no response body.";c("info","Request ".concat(e.requestId,": Received response with status code ").concat(e.statusCode," and ").concat(n),e.parsedBody||e.body)},logOnNetworkError:function(e){a("onNetworkError",e),c("error","Request ".concat(e.requestId,": Network request failed."),e.error)},logOnContentHiding:function(e){a("onContentHiding",{status:e.status}),c(e.logLevel,e.message)},logOnContentRendering:function(e){a("onContentRendering",{status:e.status,payload:e.detail}),c(e.logLevel,e.message)},info:c.bind(null,"info"),warn:c.bind(null,"warn"),error:c.bind(null,"error")}},No="__view__",xo=function(e){return function(n,t){e.xdm=e.xdm||{},e.xdm.identityMap=e.xdm.identityMap||{},e.xdm.identityMap[n]=e.xdm.identityMap[n]||[],e.xdm.identityMap[n].push(t)}},Mo=function(e){var n=e.payload,t=e.getAction,r=e.getUseSendBeacon,o=e.datastreamIdOverride,i=e.edgeSubPath,a=P(),c=!1,u=!1;return{getId:function(){return a},getPayload:function(){return n},getAction:function(){return t({isIdentityEstablished:u})},getDatastreamIdOverride:function(){return o},getUseSendBeacon:function(){return r({isIdentityEstablished:u})},getEdgeSubPath:function(){return i||""},getUseIdThirdPartyDomain:function(){return c},setUseIdThirdPartyDomain:function(){c=!0},setIsIdentityEstablished:function(){u=!0}}},qo=function(e){var n=e.payload,t=e.datastreamIdOverride,r=function(e){var t=e.isIdentityEstablished;return n.getDocumentMayUnload()&&t};return Mo({payload:n,getAction:function(e){var n=e.isIdentityEstablished;return r({isIdentityEstablished:n})?"collect":"interact"},getUseSendBeacon:r,datastreamIdOverride:t})},jo=function(e){var n=e.content,t=e.addIdentity,r=e.hasIdentity,o=De(n,"meta.configOverrides");return{mergeMeta:De(n,"meta"),mergeState:De(n,"meta.state"),mergeQuery:De(n,"query"),mergeConfigOverride:function(e){return o(ft(e))},addIdentity:t,hasIdentity:r,toJSON:function(){return n}}},Lo=function(e){return function(n){return void 0!==(e.xdm&&e.xdm.identityMap&&e.xdm.identityMap[n])}},_o=function(){var e={},n=jo({content:e,addIdentity:xo(e),hasIdentity:Lo(e)});return n.addEvent=function(n){e.events=e.events||[],e.events.push(n)},n.getDocumentMayUnload=function(){return(e.events||[]).some((function(e){return e.getDocumentMayUnload()}))},n},Uo=function(e){var n=e.localConfigOverrides,t=e.globalConfigOverrides,r=e.payload,i={payload:r},a=n||{},c=a.datastreamId,u=o(a,me);return c&&(i.datastreamIdOverride=c),r.mergeConfigOverride(t),r.mergeConfigOverride(u),i},Bo="adb_validation_sessionid",Fo="validation.",Ho="clientId",Vo=function(e){var n=e.persistent.getItem(Ho);return n||(n=P(),e.persistent.setItem(Ho,n)),n},zo=function(e){var n=e.window,t=(0,e.createNamespacedStorage)(Fo);return function(){var e=ge.default.parse(n.location.search)[Bo];if(!e)return"";var r=Vo(t),o="".concat(e,"|").concat(r);return"&".concat(ge.default.stringify({adobeAepValidationToken:o}))}},Jo="Event was canceled because the onBeforeEventSend callback returned false.",Qo=function(e){var n=e.config,t=e.logger,r=e.lifecycle,i=e.consent,a=e.createEvent,c=e.createDataCollectionRequestPayload,u=e.createDataCollectionRequest,s=e.sendEdgeNetworkRequest,d=e.applyResponse,f=n.onBeforeEventSend,p=n.edgeConfigOverrides;return{createEvent:a,sendEvent:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.edgeConfigOverrides,d=o(n,ve),g=Uo({payload:c(),localConfigOverrides:a,globalConfigOverrides:p}),m=u(g),v=Te(),y=Te();return r.onBeforeEvent(l(l({},d),{},{event:e,onResponse:v.add,onRequestFailure:y.add})).then((function(){return g.payload.addEvent(e),i.awaitConsent()})).then((function(){try{e.finalize(f)}catch(o){var n=function(){throw o};return y.add(r.onRequestFailure),y.call({error:o}).then(n,n)}if(!e.shouldSend()){y.add(r.onRequestFailure),t.info(Jo);var o=new Error(Jo);return y.call({error:o}).then((function(){}))}return s({request:m,runOnResponseCallbacks:v.call,runOnRequestFailureCallbacks:y.call})}))},applyResponse:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.renderDecisions,o=void 0!==t&&t,i=n.decisionContext,a=void 0===i?{}:i,s=n.responseHeaders,l=void 0===s?{}:s,f=n.responseBody,p=void 0===f?{handle:[]}:f,g=n.personalization,m=c(),v=u({payload:m}),y=Te();return r.onBeforeEvent({event:e,renderDecisions:o,decisionContext:a,decisionScopes:[No],personalization:g,onResponse:y.add,onRequestFailure:ct}).then((function(){return m.addEvent(e),d({request:v,responseHeaders:l,responseBody:p,runOnResponseCallbacks:y.call})}))}}},Go="state:store",Xo=function(e){var n=e.cookieJar,t=e.shouldTransferCookie,r=e.apexDomain,o=e.dateProvider;return{cookiesToPayload:function(e,o){var i=o.endsWith(r),a={domain:r,cookiesEnabled:!0};if(!i){var c=n.get(),u=Object.keys(c).filter(t).map((function(e){return{key:e,value:c[e]}}));u.length&&(a.entries=u)}e.mergeState(a)},responseToCookies:function(e){e.getPayloadsByType(Go).forEach((function(e){var t={domain:r},i=e.attrs&&e.attrs.SameSite&&e.attrs.SameSite.toLowerCase();void 0!==e.maxAge&&(t.expires=new Date(o().getTime()+1e3*e.maxAge)),void 0!==i&&(t.sameSite=i),"none"===i&&(t.secure=!0),n.set(e.key,e.value,t)}))}}},Wo="mboxEdgeCluster",Yo="at_qa_mode",$o="mbox",Ko=function(e){var n=e.orgId,t=e.targetMigrationEnabled;return function(e){return ot(n,e)||e===Yo||t&&e===$o}},Zo="v1",ei=function(e){var n=e.shift()||[],t=e.shift()||[],r=e;return Ie.apply(void 0,[{}].concat(m(n),m(t),m(r)))},ni=function(e){return function(n){var t=function(){throw n};return e.call({error:n}).then(t,t)}},ti=function(e){var n=e.config,t=e.lifecycle,r=e.cookieTransfer,o=e.sendNetworkRequest,i=e.createResponse,a=e.processWarningsAndErrors,c=e.getLocationHint,u=e.getAssuranceValidationTokenParams,s=n.edgeDomain,d=n.edgeBasePath,l=n.datastreamId;return function(e){var n=e.request,f=e.runOnResponseCallbacks,p=void 0===f?ct:f,g=e.runOnRequestFailureCallbacks,m=void 0===g?ct:g,v=Te();v.add(t.onResponse),v.add(p);var y=Te();return y.add(t.onRequestFailure),y.add(m),t.onBeforeRequest({request:n,onResponse:v.add,onRequestFailure:y.add}).then((function(){var e=n.getUseIdThirdPartyDomain()?Oo:s,t=c(),i=t?"".concat(d,"/").concat(t).concat(n.getEdgeSubPath()):"".concat(d).concat(n.getEdgeSubPath()),a=n.getDatastreamIdOverride()||l,f=n.getPayload();a!==l&&f.mergeMeta({sdkConfig:{datastream:{original:l}}});var p="https://".concat(e,"/").concat(i,"/").concat(Zo,"/").concat(n.getAction(),"?configId=").concat(a,"&requestId=").concat(n.getId()).concat(u());return r.cookiesToPayload(f,e),o({requestId:n.getId(),url:p,payload:f,useSendBeacon:n.getUseSendBeacon()})})).then((function(e){return a(e),e})).catch(ni(y)).then((function(e){var n=e.parsedBody,t=e.getHeader,o=i({content:n,getHeader:t});return r.responseToCookies(o),v.call({response:o}).then(ei)}))}},ri=204,oi="The server responded with a",ii=function(e){var n=e.logger;return function(e){var t=e.statusCode,r=e.body,o=e.parsedBody;if(t<200||t>=300||!o&&t!==ri||o&&!Array.isArray(o.handle)){var i=o?JSON.stringify(o,null,2):r,a=i?"response body:\n".concat(i):"no response body.";throw new Error("".concat(oi," status code ").concat(t," and ").concat(a))}if(o){var c=o.warnings,u=void 0===c?[]:c,s=o.errors,d=void 0===s?[]:s;u.forEach((function(e){n.warn("".concat(oi," warning:"),e)})),d.forEach((function(e){n.error("".concat(oi," non-fatal error:"),e)}))}}},ai=function(e){var n=e.orgId,t=e.cookieJar,r=Mn(n,Xn),o=function(){return t.get(r)},i=function(){var e=t.get(Wo);if(e)return"t".concat(e)};return function(){return o()||i()}},ci=3,ui=[429,503,502,504],si=function(e){var n=e.response;return e.retriesAttempted<ci&&ui.includes(n.statusCode)},di=1e3,li=1e3,fi=.3,pi=function(e){var n=di+e*li,t=n*fi,r=n-t,o=n+t;return Math.round(r+Math.random()*(o-r))},gi=function(e){var n,t=e.getHeader(uo);if(t){var r=parseInt(t,10);n=rt(r)?1e3*r:Math.max(0,new Date(t).getTime()-(new Date).getTime())}return n},mi=function(e){var n=e.response,t=e.retriesAttempted,r=gi(n);return void 0===r&&(r=pi(t)),r},vi=200,yi=function(e){var n=e.cookieTransfer,t=e.lifecycle,r=e.createResponse,o=e.processWarningsAndErrors;return function(e){var i=e.request,a=e.responseHeaders,c=e.responseBody,u=e.runOnResponseCallbacks,s=void 0===u?ct:u,d=e.runOnRequestFailureCallbacks,l=void 0===d?ct:d,f=Te();f.add(t.onResponse),f.add(s);var p=Te();p.add(t.onRequestFailure),p.add(l);var g=function(e){return a[e]};return t.onBeforeRequest({request:i,onResponse:f.add,onRequestFailure:p.add}).then((function(){return o({statusCode:vi,getHeader:g,body:JSON.stringify(c),parsedBody:c})})).catch(ni(p)).then((function(){var e=r({content:c,getHeader:g});return n.responseToCookies(e),f.call({response:e}).then(ei)}))}},hi=function(e){var n=e.options;return Mr({type:qr(),xdm:Mr({eventType:qr(),identityMap:Lr}),data:Mr({}),documentUnloading:Tr(),renderDecisions:Tr(),decisionScopes:Dr(qr()).uniqueItems(),personalization:Mr({decisionScopes:Dr(qr()).uniqueItems(),surfaces:Dr(qr()).uniqueItems(),sendDisplayEvent:Tr().default(!0),includeRenderedPropositions:Tr().default(!1),defaultPersonalizationEnabled:Tr(),decisionContext:Mr({})}).default({sendDisplayEvent:!0}),datasetId:qr(),mergeId:qr(),edgeConfigOverrides:_r,initializePersonalization:Tr()}).required().noUnknownFields()(n)},bi=function(e){var n=e.options;return Mr({renderDecisions:Tr(),responseHeaders:xr(qr().required()),responseBody:Mr({handle:Dr(Mr({type:qr().required(),payload:Pr().required()})).required()}).required(),personalization:Mr({sendDisplayEvent:Tr().default(!0),decisionContext:Mr({})}).default({sendDisplayEvent:!0})}).noUnknownFields()(n)},Ei=function(e){var n=e.eventManager,t=e.logger;return{commands:{sendEvent:{documentationUri:"https://adobe.ly/3GQ3Q7t",optionsValidator:function(e){return hi({options:e})},run:function(e){var r=e.xdm,i=e.data,a=e.documentUnloading,c=e.type,u=e.mergeId,s=e.datasetId,d=e.edgeConfigOverrides,l=o(e,ye),f=n.createEvent();return a&&f.documentMayUnload(),f.setUserXdm(r),f.setUserData(i),c&&f.mergeXdm({eventType:c}),u&&f.mergeXdm({eventMergeId:u}),d&&(l.edgeConfigOverrides=d),s&&(t.warn("The 'datasetId' option has been deprecated. Please use 'edgeConfigOverrides.com_adobe_experience_platform.datasets.event.datasetId' instead."),l.edgeConfigOverrides=d||{},Pe(l.edgeConfigOverrides,{com_adobe_experience_platform:{datasets:{event:{datasetId:s}}}})),n.sendEvent(f,l)}},applyResponse:{documentationUri:"",optionsValidator:function(e){return bi({options:e})},run:function(e){var t=e.renderDecisions,r=void 0!==t&&t,o=e.decisionContext,i=void 0===o?{}:o,a=e.responseHeaders,c=void 0===a?{}:a,u=e.responseBody,s=void 0===u?{handle:[]}:u,d=e.personalization,l=n.createEvent();return n.applyResponse(l,{renderDecisions:r,decisionContext:i,responseHeaders:c,responseBody:s,personalization:d})}}}}};Ei.namespace="DataCollector";var wi=function(e,n){return"ID sync ".concat(n?"succeeded":"failed",": ").concat(e.spec.url)},Ci=function(e){var n=e.fireReferrerHideableImage,t=e.logger;return function(e){var r=e.filter((function(e){return"url"===e.type}));return r.length?Promise.all(r.map((function(e){return n(e.spec).then((function(){t.info(wi(e,!0))})).catch((function(){t.error(wi(e,!1))}))}))).then(ct):Promise.resolve()}},Ii=Mr({thirdPartyCookiesEnabled:Tr().default(!0),idMigrationEnabled:Tr().default(!0)}),Si=Mr({namespaces:Dr(Ar("ECID")).nonEmpty().uniqueItems().default(["ECID"]),edgeConfigOverrides:_r}).noUnknownFields().default({namespaces:["ECID"]}),Oi=Mr({url:qr().required().nonEmpty(),edgeConfigOverrides:_r}).required().noUnknownFields(),ki=function(e){var n,t=e.addEcidQueryToPayload,r=e.addQueryStringIdentityToPayload,o=e.ensureSingleIdentity,i=e.setLegacyEcid,a=e.handleResponseForIdSyncs,c=e.getEcidFromResponse,u=e.getIdentity,s=e.consent,d=e.appendIdentityToUrl,f=e.logger,p={};return{lifecycle:{onBeforeRequest:function(e){var n=e.request,i=e.onResponse,a=e.onRequestFailure;return t(n.getPayload()),r(n.getPayload()),o({request:n,onResponse:i,onRequestFailure:a})},onResponse:function(e){var t=e.response;return n||(n=c(t))&&i(n),p=l(l({},p),t.getEdge()),a(t)}},commands:{getIdentity:{optionsValidator:Si,run:function(e){return s.awaitConsent().then((function(){return n?void 0:u(e)})).then((function(){return{identity:{ECID:n},edge:p}}))}},appendIdentityToUrl:{optionsValidator:Oi,run:function(e){return s.withConsent().then((function(){return n?void 0:u(e)})).then((function(){return{url:d(n,e.url)}})).catch((function(n){return f.warn("Unable to append identity to url. ".concat(n.message)),e}))}}}}},Pi=function(e){var n=e.config,t=e.getEcidFromVisitor,r=e.apexDomain,o=e.isPageSsl,i=e.cookieJar,a=n.idMigrationEnabled,c=n.orgId,u="AMCV_".concat(c),s=function(){var e=null,n="s_ecid",t=i.get(n)||i.get(u);if(t){var r=/(^|\|)MCMID\|(\d+)($|\|)/,o=t.match(r);o&&(e=o[2])}return e};return{getEcid:function(){if(a){var e=s();return e?Promise.resolve(e):t()}return Promise.resolve()},setEcid:function(e){if(a&&s()!==e){var n=o?{sameSite:"none",secure:!0}:{};i.set(u,"MCMID|".concat(e),l({domain:r,expires:390},n))}}}},Di=function(e){var n=e.logger;return new Promise((function(e,t){if(Ce(window.adobe)&&Ce(window.adobe.optIn)){var r=window.adobe.optIn;n.info("Delaying request while waiting for legacy opt-in to let Visitor retrieve ECID from server."),r.fetchPermissions((function(){r.isApproved([r.Categories.ECID])?(n.info("Received legacy opt-in approval to let Visitor retrieve ECID from server."),e()):t(new Error("Legacy opt-in was declined."))}),!0)}else e()}))},Ti=function(e){var n=e.Visitor;return Xe(n)&&Xe(n.getInstance)&&n},Ri=function(e){var n=e.logger,t=e.orgId,r=e.awaitVisitorOptIn;return function(){var e=Ti(window);return e?r({logger:n}).then((function(){return n.info("Delaying request while using Visitor to retrieve ECID from server."),new Promise((function(r){e.getInstance(t,{}).getMarketingCloudVisitorID((function(e){n.info("Resuming previously delayed request that was waiting for ECID from Visitor."),r(e)}),!0)}))})).catch((function(e){e?n.info("".concat(e.message,", retrieving ECID from experience edge")):n.info("An error occurred while obtaining the ECID from Visitor.")})):Promise.resolve()}},Ai=function(e){var n=e.processIdSyncs;return function(e){return n(e.getPayloadsByType("identity:exchange"))}},Ni=function(e){var n,t=e.doesIdentityCookieExist,r=e.setDomainForInitialIdentityPayload,o=e.addLegacyEcidToPayload,i=e.awaitIdentityCookie,a=e.logger,c=function(e){return r(e),o(e.getPayload())};return function(e){var r=e.request,o=e.onResponse,u=e.onRequestFailure;if(t())return r.setIsIdentityEstablished(),Promise.resolve();if(n){a.info("Delaying request while retrieving ECID from server.");var s=n;return n=s.catch((function(){return i({onResponse:o,onRequestFailure:u})})),s.then((function(){a.info("Resuming previously delayed request."),r.setIsIdentityEstablished()})).catch((function(){return c(r)}))}return(n=i({onResponse:o,onRequestFailure:u})).catch((function(){})),c(r)}},xi="ECID",Mi=function(e){e.mergeQuery({identity:{fetch:[xi]}})},qi=function(e){var n=e.thirdPartyCookiesEnabled,t=e.areThirdPartyCookiesSupportedByDefault;return function(e){n&&t()&&e.setUseIdThirdPartyDomain()}},ji=function(e){var n=e.getLegacyEcid,t=e.addEcidToPayload;return function(e){return e.hasIdentity(xi)?Promise.resolve():n().then((function(n){n&&t(e,n)}))}},Li="adobe_mc",_i=function(e){try{return decodeURIComponent(e)}catch(e){return""}},Ui=300,Bi=function(e){var n=e.locationSearch,t=e.dateProvider,r=e.orgId,o=e.logger;return function(e){if(!e.hasIdentity(xi)){var i=ge.default.parse(n)[Li];if(void 0!==i){Array.isArray(i)&&(o.warn("Found multiple adobe_mc query string paramters, only using the last one."),i=i[i.length-1]);var c=i.split("|").reduce((function(e,n){var t=a(n.split("="),2),r=t[0],o=t[1];return e[r]=o,e}),{}),u=parseInt(c.TS,10),s=c.MCMID,d=_i(c.MCORGID);t().getTime()/1e3<=u+Ui&&d===r&&s?(o.info("Found valid ECID identity ".concat(s," from the adobe_mc query string parameter.")),e.addIdentity(xi,{id:s})):o.info("Detected invalid or expired adobe_mc query string parameter.")}}}},Fi=function(e,n){e.addIdentity(xi,{id:n})},Hi=function(e){var n=e.doesIdentityCookieExist,t=e.orgId,r=e.logger;return function(e){var o=e.onResponse,i=e.onRequestFailure;return new Promise((function(e,a){o((function(){n()?e():(r.warn("Identity cookie not found. This could be caused by any of the following issues:\n"+"\t* The org ID ".concat(t," configured in Alloy doesn't match the org ID specified in the edge configuration.\n")+"\t* Experience edge was not able to set the identity cookie due to domain or cookie restrictions.\n\t* The request was canceled by the browser and not fully processed."),a(new Error("Identity cookie not found.")))})),i((function(){n()?e():a(new Error("Identity cookie not found."))}))}))}},Vi=function(e){var n=e.getPayloadsByType("identity:result").find((function(e){return e.namespace&&e.namespace.code===xi}));return n?n.id:void 0},zi=function(e){var n=e.sendEdgeNetworkRequest,t=e.createIdentityRequestPayload,r=e.createIdentityRequest,o=e.globalConfigOverrides;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.namespaces,a=e.edgeConfigOverrides,c=Uo({payload:t(i),globalConfigOverrides:o,localConfigOverrides:a}),u=r(c);return n({request:u})}},Ji=function(e){var n=e.payload,t=e.datastreamIdOverride;return Mo({payload:n,datastreamIdOverride:t,getAction:function(){return"identity/acquire"},getUseSendBeacon:function(){return!1}})},Qi=function(e){var n={query:{identity:{fetch:e}}};return jo({content:n,addIdentity:xo(n),hasIdentity:Lo(n)})},Gi=/^([^?#]*)(\??[^#]*)(#?.*)$/,Xi=function(e){return""===e?"?":"?"===e?"":"&"},Wi=function(e){var n=e.dateProvider,t=e.orgId;return function(e,r){var o=Math.round(n().getTime()/1e3),i=encodeURIComponent("TS=".concat(o,"|MCMID=").concat(e,"|MCORGID=").concat(encodeURIComponent(t))),c=a(r.match(Gi),4),u=c[1],s=c[2],d=c[3],l=Xi(s);return"".concat(u).concat(s).concat(l,"adobe_mc=").concat(i).concat(d)}},Yi=function(e){var n=e.config,t=e.logger,r=e.consent,o=e.fireReferrerHideableImage,i=e.sendEdgeNetworkRequest,a=e.apexDomain,c=e.getBrowser,u=n.orgId,s=n.thirdPartyCookiesEnabled,d=n.edgeConfigOverrides,l=Ri({logger:t,orgId:u,awaitVisitorOptIn:Di}),f=Re({logger:t,cookieJar:Oe}),p=Pi({config:n,getEcidFromVisitor:l,apexDomain:a,cookieJar:f,
isPageSsl:"https:"===window.location.protocol}),g=Wn({orgId:u}),m=zi({sendEdgeNetworkRequest:i,createIdentityRequestPayload:Qi,createIdentityRequest:Ji,globalConfigOverrides:d}),v=Jn({getBrowser:c}),y=qi({thirdPartyCookiesEnabled:s,areThirdPartyCookiesSupportedByDefault:v}),h=ji({getLegacyEcid:p.getEcid,addEcidToPayload:Fi}),b=Bi({locationSearch:window.document.location.search,dateProvider:function(){return new Date},orgId:u,logger:t}),E=Hi({doesIdentityCookieExist:g,orgId:u,logger:t}),w=Ni({doesIdentityCookieExist:g,setDomainForInitialIdentityPayload:y,addLegacyEcidToPayload:h,awaitIdentityCookie:E,logger:t}),C=Ci({fireReferrerHideableImage:o,logger:t}),I=Ai({processIdSyncs:C}),S=Wi({dateProvider:function(){return new Date},orgId:u,globalConfigOverrides:d});return ki({addEcidQueryToPayload:Mi,addQueryStringIdentityToPayload:b,ensureSingleIdentity:w,setLegacyEcid:p.setEcid,handleResponseForIdSyncs:I,getEcidFromResponse:Vi,getIdentity:m,consent:r,appendIdentityToUrl:S,logger:t,config:n})};Yi.namespace="Identity",Yi.configValidators=Ii;var $i="2.22.0",Ki=function(e){var n=e.config,t=e.componentRegistry,r=[].concat(m(t.getCommandNames()),[fo,po]).sort(),o=l({},n);Object.keys(n).forEach((function(e){var t=n[e];"function"==typeof t&&(o[e]=t.toString())}));var i=t.getComponentNames();return{version:$i,configs:o,commands:r,components:i}},Zi=function(e){var n=e.config,t=e.componentRegistry;return{commands:{getLibraryInfo:{run:function(){return{libraryInfo:Ki({config:n,componentRegistry:t})}}}}}};Zi.namespace="LibraryInfo";var ea,na=Object.freeze({__proto__:null,dataCollector:Ei,identity:Yi,libraryInfo:Zi}),ta=Zn(window),ra=window,oa=(ra.console,ra.fetch),ia=ra.navigator,aa=Po(),ca=An(window,Oe),ua=To({fetch:oa}),sa=On(),da=zo({window:window,createNamespacedStorage:ta}),la=$n({userAgent:window.navigator.userAgent}),fa=function(e){var n=e.instanceName,t=e.logController,r=t.setDebugEnabled,o=t.logger,i=t.createComponentLogger,a=e.components,c=Qr(),u=zr(c),s=a.concat(Object.values(na)),d=function(e){r(e.enabled,{fromConfig:!1})},l=Re({logger:o,cookieJar:Oe}),f=function(e){var t=wo({options:e,componentCreators:s,coreConfigValidators:aa,createConfig:Io,logger:o,setDebugEnabled:r}),a=t.orgId,d=t.targetMigrationEnabled,f=Ko({orgId:a,targetMigrationEnabled:d}),p=Xo({cookieJar:l,shouldTransferCookie:f,apexDomain:ca,dateProvider:function(){return new Date}}),g=Xe(ia.sendBeacon)?Ro({sendBeacon:ia.sendBeacon.bind(ia),sendFetchRequest:ua,logger:o}):ua,m=Gr({logger:o,sendFetchRequest:ua,sendBeaconRequest:g,isRequestRetryable:si,getRequestRetryDelay:mi}),v=ii({logger:o}),y=Xr({logger:o}),h=lo({extractEdgeInfo:y}),b=ai({orgId:a,cookieJar:Oe}),E=ti({config:t,lifecycle:u,cookieTransfer:p,sendNetworkRequest:m,createResponse:h,processWarningsAndErrors:v,getLocationHint:b,getAssuranceValidationTokenParams:da}),w=yi({lifecycle:u,cookieTransfer:p,createResponse:h,processWarningsAndErrors:v}),C=oo({logger:o}),I=io({generalConsentState:C,logger:o}),S=Qo({config:t,logger:o,lifecycle:u,consent:I,createEvent:co,createDataCollectionRequestPayload:_o,createDataCollectionRequest:qo,sendEdgeNetworkRequest:E,applyResponse:w});return Co({componentCreators:s,lifecycle:u,componentRegistry:c,getImmediatelyAvailableTools:function(e){var r=i(e);return{config:t,componentRegistry:c,consent:I,eventManager:S,fireReferrerHideableImage:sa,logger:r,lifecycle:u,sendEdgeNetworkRequest:E,handleError:Do({errorPrefix:"[".concat(n,"] [").concat(e,"]"),logger:r}),createNamespacedStorage:ta,apexDomain:ca,getBrowser:la}}})},p=Do({errorPrefix:"[".concat(n,"]"),logger:o});return go({logger:o,configureCommand:f,setDebugCommand:d,handleError:p,validateCommandOptions:vo})},pa=function(e){var n=e.eventManager,t=e.lifecycle,r=e.handleError;return function(e){if(e.s_fe)return Promise.resolve();var o=e.target,i=n.createEvent();return i.documentMayUnload(),t.onClick({event:i,clickedElement:o}).then((function(){return i.isEmpty()?Promise.resolve():n.sendEvent(i)})).then(ct).catch((function(e){r(e,"click collection")}))}},ga=function(e){var n=e.eventManager,t=e.lifecycle,r=e.handleError,o=pa({eventManager:n,lifecycle:t,handleError:r});document.addEventListener("click",o,!0)},ma=qr().regexp().default("\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx)$"),va=Mr({clickCollectionEnabled:Tr().default(!0),clickCollection:Mr({internalLinkEnabled:Tr().default(!0),externalLinkEnabled:Tr().default(!0),downloadLinkEnabled:Tr().default(!0),sessionStorageEnabled:Tr().default(!1),eventGroupingEnabled:Tr().default(!1),filterClickProperties:Rr()}).default({internalLinkEnabled:!0,externalLinkEnabled:!0,downloadLinkEnabled:!0,sessionStorageEnabled:!1,eventGroupingEnabled:!1}),downloadLinkQualifier:ma,onBeforeLinkClickSend:Rr().deprecated('The field "onBeforeLinkClickSend" has been deprecated. Use "clickCollection.filterClickDetails" instead.')}),ya="cppXYctnr",ha=function(){return null!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).getElementById(ya)},ba=function(e){var n=e;return/^https?:\/\//i.test(n)||(n="".concat(window.location.protocol,"//").concat(e)),new URL(n).hostname},Ea=function(e,n){return ba(e)!==ba(n)},wa=function(e,n){return n&&("download"===n&&!e.downloadLinkEnabled||"exit"===n&&!e.externalLinkEnabled||"other"===n&&!e.internalLinkEnabled)},Ca=function(e){var n=e.config,t=e.logger,r=e.getClickedElementProperties,o=e.clickActivityStorage,i=n.clickCollectionEnabled,a=n.clickCollection;return i?function(e){var i=e.event,c=e.clickedElement,u=r({clickActivityStorage:o,clickedElement:c,config:n,logger:t}),s=u.linkType;ha()||(u.isValidLink()&&wa(a,s)?t.info("Cancelling link click event due to clickCollection.".concat(s,"LinkEnabled = false.")):!u.isInternalLink()||!a.eventGroupingEnabled||n.onBeforeLinkClickSend&&!a.filterClickDetails||Ea(window.location.hostname,u.linkUrl)?u.isValidLink()?(i.mergeXdm(u.xdm),i.mergeData(u.data),o.save({pageName:u.pageName,pageIDType:u.pageIDType})):u.isValidActivityMapData()&&o.save(u.properties):o.save(u.properties))}:function(){}},Ia=function(e){return{eventType:"web.webinteraction.linkClicks",web:{webInteraction:{name:e.linkName,region:e.linkRegion,type:e.linkType,URL:e.linkUrl,linkClicks:{value:1}}}}},Sa=function(e){return{__adobe:{analytics:{contextData:{a:{activitymap:{page:e.pageName,link:e.linkName,region:e.linkRegion,pageIDType:e.pageIDType}}}}}}},Oa=function(e,n){var t=e.xdm,r=e.data,o=e.clickedElement;if(n.clickedElement=o,t&&t.web&&t.web.webInteraction){var i=t.web.webInteraction,a=i.name,c=i.region,u=i.type,s=i.URL;n.linkName=a,n.linkRegion=c,n.linkType=u,n.linkUrl=s}if(r&&r.__adobe&&r.__adobe.analytics){var d=r.__adobe.analytics.contextData;if(d&&d.a&&d.a.activitymap){var l=d.a.activitymap,f=l.page,p=l.link,g=l.region,m=l.pageIDType;n.pageName=f||n.pageName,n.linkName=p||n.linkName,n.linkRegion=g||n.linkRegion,void 0!==m&&(n.pageIDType=m)}}},ka=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.properties,t=e.logger,r=n||{};return{get pageName(){return r.pageName},set pageName(e){r.pageName=e},get linkName(){return r.linkName},set linkName(e){r.linkName=e},get linkRegion(){return r.linkRegion},set linkRegion(e){r.linkRegion=e},get linkType(){return r.linkType},set linkType(e){r.linkType=e},get linkUrl(){return r.linkUrl},set linkUrl(e){r.linkUrl=e},get pageIDType(){return r.pageIDType},set pageIDType(e){r.pageIDType=e},get clickedElement(){return r.clickedElement},set clickedElement(e){r.clickedElement=e},get properties(){return{pageName:r.pageName,linkName:r.linkName,linkRegion:r.linkRegion,linkType:r.linkType,linkUrl:r.linkUrl,pageIDType:r.pageIDType}},isValidLink:function(){return!!(r.linkUrl&&r.linkType&&r.linkName&&r.linkRegion)},isInternalLink:function(){return this.isValidLink()&&"other"===r.linkType},isValidActivityMapData:function(){return!!r.pageName&&!!r.linkName&&!!r.linkRegion&&void 0!==r.pageIDType},get xdm(){return r.filteredXdm?r.filteredXdm:Ia(this)},get data(){return r.filteredData?r.filteredData:Sa(this)},applyPropertyFilter:function(e){e&&!1===e(r)&&(t&&t.info("Clicked element properties were rejected by filter function: ".concat(JSON.stringify(this.properties,null,2))),r={})},applyOptionsFilter:function(e){var n=this.options;if(n&&n.clickedElement&&(n.xdm||n.data)){if(e&&!1===e(n))return t&&t.info("Clicked element properties were rejected by filter function: ".concat(JSON.stringify(this.properties,null,2))),void(this.options=void 0);this.options=n,r.filteredXdm=n.xdm,r.filteredData=n.data}},get options(){var e={};if(this.isValidLink()&&(e.xdm=this.xdm),this.isValidActivityMapData()&&(e.data=this.data),this.clickedElement&&(e.clickedElement=this.clickedElement),e.xdm||e.data)return e},set options(e){r={},e&&Oa(e,r)}}},Pa=function(e){var n=e.clickActivityStorage;return function(e){if(!ha()){var t=n.load(),r=ka({properties:t});if(r.isValidLink()||r.isValidActivityMapData()){if(r.isValidLink()){var o=r.xdm;delete o.eventType,e.mergeXdm(o)}r.isValidActivityMapData()&&e.mergeData(r.data),n.save({pageName:r.pageName,pageIDType:r.pageIDType})}}}},Da=function(e){var n=e.window,t=e.getLinkName,r=e.getLinkRegion,o=e.getAbsoluteUrlFromAnchorElement,i=e.findClickableElement,a=e.determineLinkType;return function(e){var c=e.clickedElement,u=e.config,s=e.logger,d=e.clickActivityStorage,l=u.onBeforeLinkClickSend,f=u.clickCollection.filterClickDetails,p=ka({logger:s});if(c){var g=i(c);if(g){p.clickedElement=c,p.linkUrl=o(n,g),p.linkType=a(n,u,p.linkUrl,g),p.linkRegion=r(g),p.linkName=t(g),p.pageIDType=0,p.pageName=n.location.href;var m=d.load();m&&m.pageName&&(p.pageName=m.pageName,p.pageIDType=1),f?p.applyPropertyFilter(f):l&&p.applyOptionsFilter(l)}}return p}},Ta="clickData",Ra=function(e){var n=e.storage;return{save:function(e){var t=JSON.stringify(e);n.setItem(Ta,t)},load:function(){var e=null,t=n.getItem(Ta);return t&&(e=JSON.parse(t)),e},remove:function(){n.removeItem(Ta)}}},Aa=function(e){var n=e.clickActivityStorage;return function(e){n.save({pageName:e.getContent().xdm.web.webPageDetails.name,pageIDType:1})}},Na=function(e){return e&&e.replace(/\s+/g," ").trim()},xa=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i,Ma=function(e){return!(e&&e.nodeName&&e.nodeName.match(xa))},qa=function(e){var n=[],t=!1;return Ma(e)?(n.push(e),e.childNodes&&Array.prototype.slice.call(e.childNodes).forEach((function(e){var r=qa(e);n=n.concat(r.supportedNodes),t=t||r.includesUnsupportedNodes}))):t=!0,{supportedNodes:n,includesUnsupportedNodes:t}},ja=function(e,n,t){var r;return t&&t!==e.nodeName.toUpperCase()||(r=e.getAttribute(n)),r},La=function(e){var n={texts:[]};return e.supportedNodes.forEach((function(e){e.getAttribute&&(n.alt||(n.alt=Na(e.getAttribute("alt"))),n.title||(n.title=Na(e.getAttribute("title"))),n.inputValue||(n.inputValue=Na(ja(e,"value","INPUT"))),n.imgSrc||(n.imgSrc=Na(ja(e,"src","IMG")))),e.nodeValue&&n.texts.push(e.nodeValue)})),n},_a=/^(HEADER|MAIN|FOOTER|NAV)$/i,Ua=function(e){var n;return"region"===e.role&&at(e["aria-label"])&&(n=e["aria-label"]),n},Ba=function(e){var n;return e&&e.nodeName&&e.nodeName.match(_a)&&(n=e.nodeName),n},Fa=function(e){return!!e&&/^[a-z0-9]+:\/\//i.test(e)},Ha=function(e){return!(!e.href||"A"!==e.tagName&&"AREA"!==e.tagName||e.onclick&&e.protocol&&!(e.protocol.toLowerCase().indexOf("javascript")<0))},Va=function(e){return!!e&&!!e.onclick},za=function(e){if("INPUT"===e.tagName){var n=e.getAttribute("type");if("submit"===n)return!0;if("image"===n&&e.src)return!0}return!1},Ja=function(e){return"BUTTON"===e.tagName&&"submit"===e.type},Qa=function(e){var n=e.indexOf("?"),t=e.indexOf("#");return n>=0&&(n<t||t<0)?e.substring(0,n):t>=0?e.substring(0,t):e},Ga=function(e,n,t){var r=!1;if(n)if(t&&t.download)r=!0;else if(e){var o=new RegExp(e),i=Qa(n).toLowerCase();r=o.test(i)}return r},Xa=function(e,n){var t=!1;if(n&&e.location.hostname){var r=e.location.hostname.toLowerCase();t=Qa(n).toLowerCase().indexOf(r)<0}return t},Wa=function(e){var n=e.getContent();return void 0!==n.xdm&&void 0!==n.xdm.web&&void 0!==n.xdm.web.webPageDetails&&void 0!==n.xdm.web.webPageDetails.name},Ya=function(){var e={};return{getItem:function(n){return e[n]},setItem:function(n,t){e[n]=t},removeItem:function(n){delete e[n]}}},$a=Da({window:window,getLinkName:function(e){var n=Na(e.innerText||e.textContent),t=qa(e);if(!n||t.includesUnsupportedNodes){var r=La(t);(n=Na(r.texts.join("")))||(n=r.alt||r.title||r.inputValue||r.imgSrc)}return n||""},getLinkRegion:function(e){for(var n,t=e.parentNode;t;){if(n=Na(t.id||Ua(t)||Ba(t)))return n;t=t.parentNode}return"BODY"},getAbsoluteUrlFromAnchorElement:function(e,n){var t=e.location,r=n.href||"";"string"!=typeof r&&(r="");var o=n.protocol,i=n.host;if(r&&!Fa(r)){o||(o=t.protocol?t.protocol:""),o=o?"".concat(o,"//"):"",i||(i=t.host?t.host:"");var a="";if("/"!==r.substring(0,1)){var c=t.pathname.lastIndexOf("/");c=c<0?0:c,a=t.pathname.substring(0,c)}r="".concat(o).concat(i).concat(a,"/").concat(r)}return r},findClickableElement:function(e){for(var n=e;n;){if(Ha(n)||Va(n)||za(n)||Ja(n))return n;n=n.parentNode}return null},determineLinkType:function(e,n,t,r){var o="other";return at(t)&&(Ga(n.downloadLinkQualifier,t,r)?o="download":Xa(e,t)&&(o="exit")),o}}),Ka=function(e){if(!ea){var n=Zn(window)(e.orgId||""),t=Ya(),r=e.clickCollection.sessionStorageEnabled?n.session:t;ea=Ra({storage:r})}},Za=function(e){var n=e.config,t=e.eventManager,r=e.handleError,o=e.logger,i=n.clickCollection;ea||Ka(n);var a=Ca({config:n,logger:o,clickActivityStorage:ea,getClickedElementProperties:$a}),c=Pa({clickActivityStorage:ea}),u=Aa({clickActivityStorage:ea});return{lifecycle:{onComponentsRegistered:function(e){var n=e.lifecycle;ga({eventManager:t,lifecycle:n,handleError:r})},onClick:function(e){var n=e.event,t=e.clickedElement;a({event:n,clickedElement:t})},onBeforeEvent:function(e){var n=e.event;Wa(n)&&(i.eventGroupingEnabled&&c(n),u(n,o,ea))}}}};Za.namespace="ActivityCollector",Za.configValidators=va,Za.buildOnInstanceConfiguredExtraParams=function(e){var n=e.config,t=e.logger;return ea||Ka(n),{getLinkDetails:function(e){return $a({clickActivityStorage:ea,clickedElement:e,config:n,logger:t}).properties}}};var ec=function(e){return"URL destination ".concat("succeeded",": ",e.spec.url)},nc=function(e){var n=e.fireReferrerHideableImage,t=e.logger,r=e.cookieJar,o=e.isPageSsl?{sameSite:"none",secure:!0}:{},i=function(e){e.filter((function(e){return"cookie"===e.type})).forEach((function(e){var n=e.spec,t=n.name,i=n.value,a=n.domain,c=n.ttlDays;r.set(t,i||"",l({domain:a||"",expires:c||10},o))}))},a=function(e){var r=e.filter((function(e){return"url"===e.type}));return Promise.all(r.map((function(e){return n(e.spec).then((function(){t.info(ec(e))})).catch((function(){}))}))).then(ct)};return function(e){return i(e),a(e)}},tc=function(e){var n=e.processDestinations,t=function(e){var t=e.response.getPayloadsByType("activation:push");return n(t)},r=function(e){return{destinations:e.response.getPayloadsByType("activation:pull")}};return function(e){var n=e.response;return t({response:n}).then((function(){return r({response:n})}))}},rc=function(e){var n=e.logger,t=e.fireReferrerHideableImage,r=Oe.withConverter({write:function(e){return encodeURIComponent(e)}}),o=Re({logger:n,cookieJar:r}),i=nc({fireReferrerHideableImage:t,logger:n,cookieJar:o,isPageSsl:"https:"===window.location.protocol});return{lifecycle:{onResponse:tc({processDestinations:i})},commands:{}}};rc.namespace="Audiences";var oc=function(e){return function(n){var t={webPageDetails:{URL:e.location.href||e.location},webReferrer:{URL:e.document.referrer}};Pe(n,{web:t})}},ic=function(e){var n=e.screen.orientation;if(null==n||null==n.type)return null;var t=n.type.split("-");return 0===t.length||"portrait"!==t[0]&&"landscape"!==t[0]?null:t[0]},ac=function(e){if(Xe(e.matchMedia)){if(e.matchMedia("(orientation: portrait)").matches)return"portrait";if(e.matchMedia("(orientation: landscape)").matches)return"landscape"}return null},cc=function(e){return function(n){var t=e.screen,r=t.width,o=t.height,i={},a=yt(o);a>=0&&(i.screenHeight=a);var c=yt(r);c>=0&&(i.screenWidth=c);var u=ic(e)||ac(e);u&&(i.screenOrientation=u),Object.keys(i).length>0&&Pe(n,{device:i})}},uc=function(e){return function(n){var t=e.document.documentElement,r=void 0===t?{}:t,o=r.clientWidth,i=r.clientHeight,a={type:"browser"},c=yt(o);c>=0&&(a.browserDetails={viewportWidth:c});var u=yt(i);u>=0&&(a.browserDetails=a.browserDetails||{},a.browserDetails.viewportHeight=u),Pe(n,{environment:a})}},sc=function(e){return function(n){var t=e(),r={},o=yt(t.getTimezoneOffset());void 0!==o&&(r.localTimezoneOffset=o),(void 0===o||Math.abs(o)<6e3)&&(r.localTime=bt(t)),Pe(n,{placeContext:r})}},dc=function(e){return function(n){var t=e().toISOString();Pe(n,{timestamp:t})}},lc="https://ns.adobe.com/experience/alloy",fc=function(e){var n={name:lc,version:$i,environment:"browser"};Pe(e,{implementationDetails:n})},pc=function(e,n,t,r){var o=e.context.flatMap((function(e,r){return t[e]?[t[e]]:(n.warn("Invalid context[".concat(r,"]: '").concat(e,"' is not available.")),[])})).concat(r);return{namespace:"Context",lifecycle:{onBeforeEvent:function(e){var t=e.event,r={};return Promise.all(o.map((function(e){return Promise.resolve(e(r,n))}))).then((function(){return t.mergeXdm(r)}))}}}},gc=[["architecture","string"],["bitness","string"],["model","string"],["platformVersion","string"],["wow64","boolean"]],mc=function(e){return void 0!==e.userAgentData},vc=function(e){return mc(e)?function(n,t){try{return e.userAgentData.getHighEntropyValues(gc.map((function(e){return e[0]}))).then((function(e){var t={};gc.forEach((function(n){var r=a(n,2),o=r[0],i=r[1];Object.prototype.hasOwnProperty.call(e,o)&&w(e[o])===i&&(t[o]=e[o])})),Pe(n,{environment:{browserDetails:{userAgentClientHints:t}}})}))}catch(e){return t.warn("Unable to collect user-agent client hints. ".concat(e.message)),ct}}:ct},yc=oc(window),hc=cc(window),bc=uc(window),Ec=sc((function(){return new Date})),wc=dc((function(){return new Date})),Cc={web:yc,device:hc,environment:bc,placeContext:Ec},Ic={highEntropyUserAgentHints:vc(navigator)},Sc=l(l({},Cc),Ic),Oc=[wc,fc],kc=function(e){var n=e.config,t=e.logger;return pc(n,t,Sc,Oc)};kc.namespace="Context",kc.configValidators=Mr({context:Dr(qr()).default(Object.keys(Cc))});var Pc="personalization:decisions",Dc=function(e){return null!==e&&"object"===w(e)&&Object.getPrototypeOf(e)===Object.prototype},Tc=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object.keys(e).forEach((function(r){Dc(e[r])||Array.isArray(e[r])?Tc(e[r],n,[].concat(m(t),[r])):n[[].concat(m(t),[r]).join(".")]=e[r]})),n},Rc=function(e){return Dc(e)?Tc(e):e},Ac=function(e){var n=e.renderDecisions,t=e.decisionProvider,r=e.applyResponse,o=e.event,i=e.personalization,a=e.decisionContext,c=l(l({},Rc(o.getContent())),a);return function(e){var a=e.response;if(t.addPayloads(a.getPayloadsByType(Pc)),!o.hasQuery())return{propositions:[]};var u=t.evaluate(c);return r({renderDecisions:n,propositions:u,event:o,personalization:i})}},Nc={MATCHER:"matcher",GROUP:"group",HISTORICAL:"historical"},xc={EQUALS:"eq",NOT_EQUALS:"ne",EXISTS:"ex",NOT_EXISTS:"nx",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"ge",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"le",CONTAINS:"co",NOT_CONTAINS:"nc",STARTS_WITH:"sw",ENDS_WITH:"ew"},Mc={AND:"and",OR:"or"},qc={ANY:"any",ORDERED:"ordered"},jc=(f(f(f(f(f(f(f(f(f(f(fe={},xc.EQUALS,T()),xc.NOT_EQUALS,R()),xc.EXISTS,A()),xc.NOT_EXISTS,N()),xc.GREATER_THAN,M()),xc.GREATER_THAN_OR_EQUAL_TO,q()),xc.LESS_THAN,j()),xc.LESS_THAN_OR_EQUAL_TO,L()),xc.CONTAINS,_()),xc.NOT_CONTAINS,U()),f(f(fe,xc.STARTS_WITH,B()),xc.ENDS_WITH,F())),Lc=["iam.eventType","eventType","type"],_c=["iam.id","id"],Uc="https://ns.adobe.com/personalization/default-content-item",Bc="https://ns.adobe.com/personalization/dom-action",Fc="https://ns.adobe.com/personalization/html-content-item",Hc="https://ns.adobe.com/personalization/json-content-item",Vc="https://ns.adobe.com/personalization/ruleset-item",zc="https://ns.adobe.com/personalization/redirect-item",Jc="https://ns.adobe.com/personalization/message/in-app",Qc="https://ns.adobe.com/personalization/message/content-card",Gc="decisioning.propositionDisplay",Xc="decisioning.propositionInteract",Wc="decisioning.propositionTrigger",Yc="decisioning.propositionDismiss",$c=1,Kc=function(e,n){return function(t){var r=e.getItem(n);if(!r)return t;try{return JSON.parse(r)}catch(e){return t}}},Zc=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(r){e.setItem(n,JSON.stringify(t(r)))}},eu=function(e){var n=new Date;return n.setDate(n.getDate()-e),n},nu=function(e){var n=e.scopeDetails,t=(void 0===n?{}:n).activity;return(void 0===t?{}:t).id},tu=function(){var e={};return{getItem:function(n){return n in e?e[n]:null},setItem:function(n,t){e[n]=t}}},ru=function(e){e.clear()},ou=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})._experience;return!(!e||"object"!==w(e))},iu=function(e){var n=e.scopeDetails;return(void 0===n?{}:n).decisionProvider},au=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return Array.isArray(e)?(e.forEach((function(e){Array.isArray(e)?n.push.apply(n,m(au(e))):n.push(e)})),n):e},cu="text/html",uu="application/json",su=function(e,n,t){return{schema:t.schema,data:t.data,id:t.id||e}},du="schema",lu=f(f({},"cjmiam",(function(e,n,t){var r=t.html,o=t.mobileParameters;return{schema:Jc,data:{mobileParameters:o,webParameters:{},content:r,contentType:cu},id:e}})),du,su),fu=function(){return function(e){var n=e.id,t=e.type,r=e.detail;return"function"==typeof lu[t]?lu[t](n,t,r):r}},pu=function(e){var n=e.schema,t=e.data;if(n===Vc)return!0;if(n!==Hc)return!1;try{var r="string"==typeof t.content?JSON.parse(t.content):t.content;return r&&Object.prototype.hasOwnProperty.call(r,"version")&&Object.prototype.hasOwnProperty.call(r,"rules")}catch(e){return!1}},gu=function(e,n,t){var r=fu(),o=nu(e),i=[],a=function(e){var n=e.data,t=void 0===n?{}:n,r=e.schema===Vc?t:t.content;r&&i.push(le("string"==typeof r?JSON.parse(r):r))},c=function(a){var c=n.getEvent(Gc,o),u=c?c.firstTimestamp:void 0,s=au(i.map((function(e){return e.execute(a)}))).map(r).map((function(e){var n=(t.recordQualified(o)||{}).firstTimestamp;return l(l({},e),{},{data:l(l({},e.data),{},{qualifiedDate:n,displayedDate:u})})}));return l(l({},e),{},{items:s})};return Array.isArray(e.items)&&e.items.filter(pu).forEach(a),{evaluate:c,isEvaluable:i.length>0}},mu={DISPLAY:"display",INTERACT:"interact",TRIGGER:"trigger",DISMISS:"dismiss"},vu=f(f(f(f({},Gc,mu.DISPLAY),Xc,mu.INTERACT),Wc,mu.TRIGGER),Yc,mu.DISMISS),yu=f(f(f(f({},mu.DISPLAY,Gc),mu.INTERACT,Xc),mu.TRIGGER,Wc),mu.DISMISS,Yc),hu=function(e){return vu[e]},bu=function(e){return yu[e]},Eu=function(e){var n=e.eventRegistry;return{recordQualified:function(e){if(e)return n.addEvent({},mu.TRIGGER,e)}}},wu=function(e){var n=e.eventRegistry,t={},r=Eu({eventRegistry:n}),o=function(e){var o=nu(e);if(o){var i=gu(e,n,r);i.isEvaluable&&(t[o]=i)}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.values(t).map((function(n){return n.evaluate(e)})).filter((function(e){return e.items.length>0}))};return{addPayload:o,addPayloads:function(e){e.forEach(o)},evaluate:i}},Cu=function(e){return function(n){var t=n.renderDecisions,r=void 0!==t&&t,o=n.propositions,i=void 0===o?[]:o,a=n.event,c=n.personalization;return e&&e.onDecision({renderDecisions:r,propositions:i,event:a,personalization:c}),{propositions:i}}},Iu="AJO",Su="TGT",Ou="events",ku=1e3,Pu=30,Du=function(e){return"iam.".concat(e)},Tu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ku,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pu;return function(t){var r={};return Object.keys(t).forEach((function(o){r[o]={},Object.values(t[o]).filter((function(e){return new Date(e.firstTimestamp)>=eu(n)})).sort((function(e,n){return e.firstTimestamp-n.firstTimestamp})).slice(-1*e).forEach((function(e){r[o][e.event[Du("id")]]=e}))})),r}},Ru=function(e){var n,t,r,o=e.storage,i=o,a=function(e){n=Kc(i=e,Ou),t=Zc(i,Ou,Tu(ku,Pu)),r=n({})};a(o);var c=function(e,n,o,i){if(n&&o){r[n]||(r[n]={});var a=r[n][o],c=a?a.count:0,u=(new Date).getTime(),s=a?a.firstTimestamp||a.timestamp:u;return r[n][o]={event:l(l({},e),{},f(f(f({},Du("id"),o),Du("eventType"),n),Du("action"),i)),firstTimestamp:s,timestamp:u,count:c+1},t(r),r[n][o]}};return{addExperienceEdgeEvent:function(e){var n=e.getContent().xdm,t=void 0===n?{}:n,r=t._experience;if(ou(t)){var o=r.decisioning,i=void 0===o?{}:o,a=i.propositionEventType,u=void 0===a?{}:a,s=i.propositionAction,d=void 0===s?{}:s,l=i.propositions,f=void 0===l?[]:l,p=Object.keys(u);if(0!==p.length){var g=function(e){return u[e]===$c},m=d.id;p.filter(g).forEach((function(e){f.forEach((function(n){iu(n)===Iu&&c({},e,nu(n),m)}))}))}}},addEvent:c,getEvent:function(e,n){if(r[e])return r[e][n]},toJSON:function(){return r},setStorage:a}},Au=function(e){var n=e.eventRegistry,t=e.window,r=e.getBrowser,o=(new Date).getTime(),i=function(){return l({title:t.title,url:t.url},lt(t.url))},a=function(){return l({url:t.referrer},lt(t.referrer))},c=function(){var e=new Date,n=e.getTime();return{pageLoadTimestamp:o,currentTimestamp:n,currentDate:e.getDate(),"~state.com.adobe.module.lifecycle/lifecyclecontextdata.dayofweek":e.getDay()+1,"~state.com.adobe.module.lifecycle/lifecyclecontextdata.hourofday":e.getHours(),currentMinute:e.getMinutes(),currentMonth:e.getMonth(),currentYear:e.getFullYear(),pageVisitDuration:n-o,"~timestampu":n/1e3,"~timestampz":e.toISOString()}},u=function(){return{height:t.height,width:t.width,scrollY:t.scrollY,scrollX:t.scrollX}},s={browser:{name:r()},page:i(),referringPage:a()},d=function(){return l(l(l({},s),c()),{},{window:u(),"~sdkver":$i})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l(l({},d()),e);return l(l({},Rc(t)),{},{events:n.toJSON()})};return{getContext:f}},Nu=function(){for(var e=arguments.length,n=new Array(e>1?e-1:0),t=1;t<e;t++)n[t-1]=arguments[t];return n},xu=function(){return!0},Mu=function(){var e=Nu,n=xu,t=0,r={},o=function(e){return function(){delete r[e]}},i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"function"!=typeof e?function(){}:(r[t+=1]={callback:e,params:n},{id:t,unsubscribe:o(t)})},a=function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];Object.values(r).forEach((function(t){var r=t.callback,i=t.params,a=e.apply(void 0,[i].concat(o));n.apply(void 0,[i].concat(m(a)))&&r.apply(void 0,m(a))}))},c=function(t){if(t&&r[t]){for(var o=r[t],i=o.callback,a=o.params,c=arguments.length,u=new Array(c>1?c-1:0),s=1;s<c;s++)u[s-1]=arguments[s];var d=e.apply(void 0,[a].concat(u));n.apply(void 0,[a].concat(m(d)))&&i.apply(void 0,m(d))}};return{add:i,emit:a,emitOne:c,hasSubscriptions:function(){return Object.keys(r).length>0},setEmissionPreprocessor:function(n){"function"==typeof n&&(e=n)},setEmissionCondition:function(e){"function"==typeof e&&(n=e)}}},qu=function(e){var n=e.options;return Mr({surfaces:Dr(qr()).uniqueItems(),schemas:Dr(qr()).uniqueItems(),callback:Rr().required()}).noUnknownFields()(n)},ju=function(e){return{id:e.id,scope:e.scope,scopeDetails:e.scopeDetails}},Lu=function(e){var n=e.collect,t=function(){},r=new Set,o=function(e){return[mu.INTERACT,mu.DISMISS].includes(e)},i=function(e,n,t){var i=[e,n].join("-"),a=!t.has(i)&&(o(e)||!r.has(i));return t.add(i),r.add(i),a},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!(t instanceof Array))return Promise.resolve();if(!Object.values(mu).includes(e))return Promise.resolve();var r=[],o=new Set;return t.forEach((function(n){var t=ju(n);i(e,t.id,o)&&r.push(t)})),r.length>0?n({decisionsMeta:r,eventType:bu(e),documentMayUnload:!0}):Promise.resolve()},c=Mu(),u=function(e,n){var t=e.surfacesFilter,r=e.schemasFilter;return[{propositions:n.filter((function(e){return!t||t.includes(e.scope)})).map((function(e){var n=e.items,t=void 0===n?[]:n;return l(l({},e),{},{items:t.filter((function(e){return!r||r.includes(e.schema)}))})})).filter((function(e){return e.items.length>0}))},a]};c.setEmissionPreprocessor(u);var s=function(e){var n=e.surfaces,r=e.schemas,o=e.callback,i=c.add(o,{surfacesFilter:n instanceof Array?n:void 0,schemasFilter:r instanceof Array?r:void 0}),a=i.id,u=i.unsubscribe;return t(a),Promise.resolve({unsubscribe:u})};return{refresh:function(e){(t=function(n){n?c.emitOne(n,e):c.emit(e)})()},command:{optionsValidator:function(e){return qu({options:e})},run:s}}},_u={TYPE:"~type",SOURCE:"~source"},Uu={LIFECYCLE:"com.adobe.eventType.lifecycle",TRACK:"com.adobe.eventType.generic.track",EDGE:"com.adobe.eventType.edge",RULES_ENGINE:"com.adobe.eventType.rulesEngine"},Bu={LAUNCH:"com.adobe.eventSource.applicationLaunch",REQUEST:"com.adobe.eventSource.requestContent"},Fu=function(e){var n=e.options;return Mr({renderDecisions:Tr(),personalization:Mr({decisionContext:Mr({})})}).noUnknownFields()(n)},Hu=function(e){var n=e.contextProvider,t=e.decisionProvider;return{optionsValidator:function(e){return Fu({options:e})},run:function(e){var r=e.renderDecisions,o=e.decisionContext;return(0,e.applyResponse)({renderDecisions:r,propositions:t.evaluate(n.getContext(o))})}}},Vu=function(e){var n=e.eventManager,t=e.mergeDecisionsMeta;return function(e){var r=e.decisionsMeta,o=void 0===r?[]:r,i=e.propositionAction,a=e.documentMayUnload,c=void 0!==a&&a,u=e.eventType,s=void 0===u?Gc:u,d=e.propositionEventTypes,l=void 0===d?[hu(s)]:d,f=e.viewName,p=n.createEvent(),g={eventType:s};return f&&(g.web={webPageDetails:{viewName:f}}),We(o)&&t(p,o,l,i),p.mergeXdm(g),c&&p.documentMayUnload(),n.sendEvent(p)}},zu=function(e,n,t,r){if(0!==n.length){var o={};t.forEach((function(e){o[e]=$c}));var i={_experience:{decisioning:{propositions:n,propositionEventType:o}}};r&&(i._experience.decisioning.propositionAction=r),e.mergeXdm(i)}},Ju=function(e,n){e.mergeQuery({personalization:l({},n)})},Qu=function(e){var n=e.config,t=e.eventManager,r=e.createNamespacedStorage,o=e.consent,i=e.getBrowser,a=n.orgId,c=n.personalizationStorageEnabled,u=Vu({eventManager:t,mergeDecisionsMeta:zu}),s=r("".concat(xn(a),".decisioning."));c||ru(s.persistent);var d,p=Ru({storage:tu()}),g=wu({eventRegistry:p}),m=Au({eventRegistry:p,window:window,getBrowser:i}),v=Hu({contextProvider:m,decisionProvider:g}),y=Lu({collect:u});return{lifecycle:{onDecision:function(e){var n=e.propositions;y.refresh(n)},onComponentsRegistered:function(e){d=Cu(e.lifecycle),c&&o.awaitConsent().then((function(){p.setStorage(s.persistent)})).catch((function(){s&&ru(s.persistent)}))},onBeforeEvent:function(e){var n=e.event,t=e.renderDecisions,r=e.personalization,o=void 0===r?{}:r,i=e.onResponse,a=void 0===i?ct:i,c=o.decisionContext,u=void 0===c?{}:c;a(Ac({renderDecisions:t,decisionProvider:g,applyResponse:d,event:n,personalization:o,decisionContext:m.getContext(l(f(f({},_u.TYPE,Uu.EDGE),_u.SOURCE,Bu.REQUEST),u))}))},onBeforeRequest:function(e){var n=e.request.getPayload().toJSON().events,t=void 0===n?[]:n;0!==t.length&&t.forEach((function(e){return p.addExperienceEdgeEvent(e)}))}},commands:{evaluateRulesets:{run:function(e){var n=e.renderDecisions,t=e.personalization,r=(void 0===t?{}:t).decisionContext,o=void 0===r?{}:r;return v.run({renderDecisions:n,decisionContext:l(f(f({},_u.TYPE,Uu.RULES_ENGINE),_u.SOURCE,Bu.REQUEST),o),applyResponse:d})},optionsValidator:v.optionsValidator},subscribeRulesetItems:y.command}}};Qu.namespace="DecisioningEngine",Qu.configValidators=Mr({personalizationStorageEnabled:Tr().default(!1)});var Gu=n.createEventMergeId=function(){return{eventMergeId:P()}},Xu=function(e){return{commands:{createEventMergeId:{run:e.createEventMergeId}}}},Wu=function(){return Xu({createEventMergeId:Gu})};Wu.namespace="EventMerge";var Yu={PAUSE:"media.pauseStart",PLAY:"media.play",BUFFER_START:"media.bufferStart",AD_START:"media.adStart",Ad_BREAK_START:"media.adBreakStart",SESSION_END:"media.sessionEnd",SESSION_START:"media.sessionStart",SESSION_COMPLETE:"media.sessionComplete",PING:"media.ping",AD_BREAK_COMPLETE:"media.adBreakComplete",AD_COMPLETE:"media.adComplete",AD_SKIP:"media.adSkip",BITRATE_CHANGE:"media.bitrateChange",CHAPTER_COMPLETE:"media.chapterComplete",CHAPTER_SKIP:"media.chapterSkip",CHAPTER_START:"media.chapterStart",ERROR:"media.error",STATES_UPDATE:"media.statesUpdate"},$u=function(e){var n=e.mediaRequestPayload,t=e.action;return Mo({payload:n,edgeSubPath:"/va",getAction:function(){return t},getUseSendBeacon:function(){return!1}})},Ku=function(e){var n=e.config,t=e.eventManager,r=e.consent,o=e.sendEdgeNetworkRequest,i=e.setTimestamp;return{
createMediaEvent:function(e){var r=e.options,o=t.createEvent(),a=r.xdm;if(i(a),o.setUserXdm(a),a.eventType===Yu.AD_START){var c=r.xdm.mediaCollection.advertisingDetails;o.mergeXdm({mediaCollection:{advertisingDetails:{playerName:c.playerName||n.streamingMedia.playerName}}})}return o},createMediaSession:function(e){var r=n.streamingMedia,o=r.playerName,i=r.channel,a=r.appVersion,c=t.createEvent(),u=e.xdm.mediaCollection.sessionDetails;return c.setUserXdm(e.xdm),c.mergeXdm({eventType:Yu.SESSION_START,mediaCollection:{sessionDetails:{playerName:u.playerName||o,channel:u.channel||i,appVersion:u.appVersion||a}}}),c},augmentMediaEvent:function(e){var n=e.event,t=e.playerId,r=e.getPlayerDetails,o=e.sessionID;if(!t||!r)return n;var i=r({playerId:t}),a=i.playhead,c=i.qoeDataDetails;return n.mergeXdm({mediaCollection:{playhead:yt(a),qoeDataDetails:c,sessionID:o}}),n},trackMediaSession:function(e){var n=e.event,r=e.mediaOptions;return t.sendEvent(n,{mediaOptions:r})},trackMediaEvent:function(e){var n=e.event,t=e.action,i=_o(),a=$u({mediaRequestPayload:i,action:t});return i.addEvent(n),n.finalize(),r.awaitConsent().then((function(){return o({request:a}).then((function(){return{}}))}))}}},Zu={MAIN:"main",AD:"ad",COMPLETED:"completed"},es=function(){var e;return{getSession:function(n){return e[n]||{}},storeSession:function(n){var t=n.playerId,r=n.sessionDetails;void 0===e&&(e={}),e[t]=r},stopPing:function(n){var t=n.playerId,r=e[t];r&&(clearTimeout(r.pingId),r.pingId=null,r.playbackState=Zu.COMPLETED)},savePing:function(n){var t=n.playerId,r=n.pingId,o=n.playbackState;e[t]&&(e[t].pingId&&clearTimeout(e[t].pingId),e[t].pingId=r,e[t].playbackState=o)}}},ns=function(e,n){return e===Yu.AD_START||e===Yu.Ad_BREAK_START||e===Yu.AD_SKIP||e===Yu.AD_COMPLETE?"ad":e===Yu.AD_BREAK_COMPLETE||e===Yu.CHAPTER_COMPLETE||e===Yu.CHAPTER_START||e===Yu.CHAPTER_SKIP||e===Yu.SESSION_START?"main":e===Yu.SESSION_END||e===Yu.SESSION_COMPLETE?"completed":n},ts=function(e){var n=e.mediaEventManager,t=e.mediaSessionCacheManager,r=e.config,o=function(e){var i=n.createMediaEvent({options:e}),a=e.playerId,c=e.xdm.eventType,u=c.split(".")[1],s=t.getSession(a),d=s.getPlayerDetails,l=s.sessionPromise,f=s.playbackState;return l.then((function(e){return e.sessionId?(n.augmentMediaEvent({event:i,eventType:c,playerId:a,getPlayerDetails:d,sessionID:e.sessionId}),n.trackMediaEvent({event:i,action:u}).then((function(){if(a)if(c===Yu.SESSION_COMPLETE||c===Yu.SESSION_END)t.stopPing({playerId:a});else{var e=ns(c,f);if("completed"===e)return;var n="ad"===e?r.streamingMedia.adPingInterval:r.streamingMedia.mainPingInterval,i=setTimeout((function(){var e={playerId:a,xdm:{eventType:Yu.PING}};o(e)}),1e3*n);t.savePing({playerId:a,pingId:i,playbackState:e})}}))):Promise.reject(new Error("Failed to trigger media event: ".concat(c,". Session ID is not available for playerId: ").concat(a,".")))}))};return function(e){return o(e)}},rs=function(e){var n=e.config,t=e.mediaEventManager,r=e.mediaSessionCacheManager,o=e.legacy,i=void 0!==o&&o;return function(e){if(!n.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));var o=e.playerId,a=e.getPlayerDetails,c=t.createMediaSession(e);t.augmentMediaEvent({event:c,playerId:o,getPlayerDetails:a});var u=t.trackMediaSession({event:c,mediaOptions:{playerId:o,getPlayerDetails:a,legacy:i}});return r.storeSession({playerId:o,sessionDetails:{sessionPromise:u,getPlayerDetails:a,playbackState:Zu.MAIN}}),u}},os=function(e){return!it(e)||!e.trim()},is=function(e){var n=e.mediaSessionCacheManager,t=e.config,r=e.trackMediaEvent;return function(e){var o=e.response,i=e.playerId,a=e.getPlayerDetails,c=o.getPayloadsByType("media-analytics:new-session");if(We(c)){var u=c[0].sessionId;if(os(u))return{};if(!i||!a)return{sessionId:u};var s=setTimeout((function(){r({playerId:i,xdm:{eventType:Yu.PING}})}),1e3*t.streamingMedia.mainPingInterval);return n.savePing({playerId:i,pingId:s,playbackState:Zu.MAIN}),{sessionId:u}}return{}}},as={Video:"video",Audio:"audio"},cs={VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"},us={FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"},ss={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"},ds={SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pauseStart",Error:"error",StateUpdate:"statesUpdate"},ls={MediaResumed:"media.resumed",GranularAdTracking:"media.granularadtracking"},fs={Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"},ps={Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"},gs={Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"},ms=function(e){var n=e.trackMediaEvent,t=e.trackMediaSession,r=e.mediaResponseHandler,o=e.logger,i=e.createMediaHelper,a=e.createGetInstance,c=e.config;return{lifecycle:{onBeforeEvent:function(e){var n=e.mediaOptions,t=e.onResponse,o=void 0===t?ct:t;if(n){var i=n.legacy,a=n.playerId,c=n.getPlayerDetails;i&&o((function(e){var n=e.response;return r({playerId:a,getPlayerDetails:c,response:n})}))}}},commands:{getMediaAnalyticsTracker:{run:function(){if(!c.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));o.info("Streaming media is configured in legacy mode.");var e=i({logger:o});return Promise.resolve(l({getInstance:function(){return a({logger:o,trackMediaEvent:n,trackMediaSession:t,uuid:P})},Event:ss,MediaType:as,PlayerState:us,StreamType:cs,MediaObjectKey:ls,VideoMetadataKeys:fs,AudioMetadataKeys:ps,AdMetadataKeys:gs},e))}}}}},vs=function(e){var n=e.logger;return{createMediaObject:function(e,t,r,o,i){var a={friendlyName:e,name:t,length:r,streamType:i,contentType:o},c=Mr({friendlyName:qr().nonEmpty(),name:qr().nonEmpty(),length:Nr().required(),streamType:qr().nonEmpty(),contentType:qr().nonEmpty()});try{var u=c(a);return{sessionDetails:{name:u.name,friendlyName:u.friendlyName,length:u.length,streamType:u.streamType,contentType:u.contentType}}}catch(e){return n.warn("An error occurred while creating the Media Object.",e),{}}},createAdBreakObject:function(e,t,r){var o={friendlyName:e,offset:t,index:r},i=Mr({friendlyName:qr().nonEmpty(),offset:Nr(),index:Nr()});try{var a=i(o);return{advertisingPodDetails:{friendlyName:a.friendlyName,offset:a.offset,index:a.index}}}catch(e){return n.warn("An error occurred while creating the Ad Break Object.",e),{}}},createAdObject:function(e,t,r,o){var i={friendlyName:e,name:t,podPosition:r,length:o},a=Mr({friendlyName:qr().nonEmpty(),name:qr().nonEmpty(),podPosition:Nr(),length:Nr()});try{var c=a(i);return{advertisingDetails:{friendlyName:c.friendlyName,name:c.name,podPosition:c.podPosition,length:c.length}}}catch(e){return n.warn("An error occurred while creating the Advertising Object.",e),{}}},createChapterObject:function(e,t,r,o){var i={friendlyName:e,offset:t,length:r,index:o},a=Mr({friendlyName:qr().nonEmpty(),offset:Nr(),length:Nr(),index:Nr()});try{var c=a(i);return{chapterDetails:{friendlyName:c.friendlyName,offset:c.offset,index:c.index,length:c.length}}}catch(e){return n.warn("An error occurred while creating the Chapter Object.",e),{}}},createStateObject:function(e){var t=/^[a-zA-Z0-9_]{1,64}$/,r=qr().matches(t,"This is not a valid state name.");try{return{name:r(e)}}catch(e){return n.warn("An error occurred while creating the State Object.",e),{}}},createQoEObject:function(e,t,r,o){var i={bitrate:e,droppedFrames:t,fps:r,startupTime:o},a=Mr({bitrate:Nr(),droppedFrames:Nr(),fps:Nr(),startupTime:Nr()});try{var c=a(i);return{bitrate:c.bitrate,droppedFrames:c.droppedFrames,framesPerSecond:c.fps,timeToStart:c.startupTime}}catch(e){return n.warn("An error occurred while creating the QOE Object.",e),{}}}}},ys={"a.media.show":"show","a.media.season":"season","a.media.episode":"episode","a.media.asset":"assetID","a.media.genre":"genre","a.media.airDate":"firstAirDate","a.media.digitalDate":"firstDigitalDate","a.media.rating":"rating","a.media.originator":"originator","a.media.network":"network","a.media.type":"showType","a.media.adLoad":"adLoad","a.media.pass.mvpd":"mvpd","a.media.pass.auth":"authorized","a.media.dayPart":"dayPart","a.media.feed":"feed","a.media.format":"streamFormat","a.media.artist":"artist","a.media.album":"album","a.media.label":"label","a.media.author":"author","a.media.station":"station","a.media.publisher":"publisher","media.resumed":"hasResume"},hs={"a.media.ad.advertiser":"advertiser","a.media.ad.campaign":"campaignID","a.media.ad.creative":"creativeID","a.media.ad.placement":"placementID","a.media.ad.site":"siteID","a.media.ad.creativeURL":"creativeURL"},bs=function(e){var n=e.logger,t=e.trackMediaSession,r=e.trackMediaEvent,o=e.uuid,i=null,a=function(){i={qoe:null,lastPlayhead:0,playerId:o()}},c=function(e){var n=e.eventType;return n===ss.BufferComplete||n===ss.SeekComplete?ds.Play:n===ss.StateStart||n===ss.StateEnd?ds.StateUpdate:n===ss.SeekStart?ds.Pause:n},u=function(e){var n=e.eventType,t=e.mediaDetails,r=void 0===t?{}:t,o=e.contextData,i=void 0===o?[]:o,a=c({eventType:n});if(n===ss.StateStart)return{eventType:"media.".concat(a),mediaCollection:{statesStart:[r]}};if(n===ss.StateEnd)return{eventType:"media.".concat(a),mediaCollection:{statesEnd:[r]}};var u={eventType:"media.".concat(a),mediaCollection:l({},r)},s=[];return Object.keys(i).forEach((function(e){ys[e]?u.mediaCollection.sessionDetails[ys[e]]=i[e]:hs[e]?u.mediaCollection.advertisingDetails[hs[e]]=i[e]:s.push({name:e,value:i[e]})})),We(s)&&(u.mediaCollection.customMetadata=s),u};return{trackSessionStart:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(we(e)||kn(e))return n.warn("Invalid media object"),{};null===i&&(n.warn("The Media Session was completed. Restarting a new session."),a());var o=u({eventType:ds.SessionStart,mediaDetails:e,contextData:r});return t({playerId:i.playerId,getPlayerDetails:function(){return{playhead:i.lastPlayhead,qoeDataDetails:i.qoe}},xdm:o})},trackPlay:function(){if(null===i)return n.warn("The Media Session was completed."),{};var e=u({eventType:ds.Play});return r({playerId:i.playerId,xdm:e})},trackPause:function(){if(null===i)return n.warn("The Media Session was completed."),{};var e=u({eventType:ds.Pause});return r({playerId:i.playerId,xdm:e})},trackSessionEnd:function(){if(null===i)return n.warn("The Media Session was completed."),{};var e=u({eventType:ds.SessionEnd});return r({playerId:i.playerId,xdm:e})},trackComplete:function(){if(null===i)return n.warn("The Media Session was completed."),{};var e=u({eventType:ds.SessionComplete});return r({playerId:i.playerId,xdm:e})},trackError:function(e){if(n.warn("trackError(".concat(e,")")),null===i)return n.warn("The Media Session was completed."),{};var t={name:e,source:"player"},o=u({eventType:ds.Error,mediaDetails:{errorDetails:t}});return r({playerId:i.playerId,xdm:o})},trackEvent:function(e,t,o){if(kn(t))return n.warn("Invalid media object."),{};if(null===i)return n.warn("The Media Session was completed."),{};if(!Object.values(ss).includes(e))return n.warn("Invalid event type"),{};var a=u({eventType:e,mediaDetails:t,contextData:o});return r({playerId:i.playerId,xdm:a})},updatePlayhead:function(e){null!==i?tt(e)&&(i.lastPlayhead=parseInt(e,10)):n.warn("The Media Session was completed.")},updateQoEObject:function(e){null!==i?e&&(i.qoe=e):n.warn("The Media Session was completed.")},destroy:function(){n.warn("Destroy called, destroying the tracker."),i=null}}},Es=function(e){var n=e.eventManager,t=e.sendEdgeNetworkRequest,r=e.config,o=e.logger,i=e.consent,a=es(),c=Ku({sendEdgeNetworkRequest:t,config:r,consent:i,eventManager:n,setTimestamp:dc((function(){return new Date}))}),u=ts({mediaSessionCacheManager:a,mediaEventManager:c,config:r}),s=rs({config:r,mediaEventManager:c,mediaSessionCacheManager:a,legacy:!0}),d=is({mediaSessionCacheManager:a,config:r,trackMediaEvent:u});return ms({mediaResponseHandler:d,trackMediaSession:s,trackMediaEvent:u,createMediaHelper:vs,createGetInstance:bs,logger:o,config:r})};Es.namespace="Legacy Media Analytics";var ws=function(e){return{inferences:e.response.getPayloadsByType("rtml:inferences")}},Cs=function(){return{lifecycle:{onResponse:ws},commands:{}}};Cs.namespace="MachineLearning";var Is,Ss="web",Os="webapp",ks="://",Ps="#",Ds=/^(\w+):\/\/([^/#]+)(\/[^#]*)?(#.*)?$/,Ts=/^(?:.*@)?(?:[a-z\d\u00a1-\uffff.-]+|\[[a-f\d:]+])(?::\d+)?$/,Rs=/^\/(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})*$/,As=/^#(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})+$/,Ns=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",n=e.length;n>0&&-1!=="/".indexOf(e.charAt(n-1));)n-=1;return e.substring(0,n)||"/"},xs=function(e){return at(e)?e.toLowerCase():""},Ms=function(e){return at(e)?e.toLowerCase():""},qs=function(e){return at(e)?Ns(e):"/"},js=function(e){var n=e.match(Ds);return n?{surfaceType:xs(n[1]),authority:Ms(n[2]),path:qs(n[3]),fragment:n[4]}:null},Ls=function(e){return"".concat(e.surfaceType).concat(ks).concat(e.authority).concat(e.path||"").concat(e.fragment||"")},_s=function(e){var n=e(),t=n.host.toLowerCase(),r=n.pathname;return Ss+ks+t+Ns(r)},Us=function(e,n){return e.startsWith(Ps)?_s(n)+e:e},Bs=function(e,n,t){var r=function(e){return t.warn(e),null};if(!at(e))return r("Invalid surface: ".concat(e));var o=Us(e,n),i=js(o);return null===i?r("Invalid surface: ".concat(e)):[Ss,Os].includes(i.surfaceType)?i.authority&&Ts.test(i.authority)?i.path&&!Rs.test(i.path)?r("Invalid path ".concat(i.path," in surface: ").concat(e)):i.fragment&&!As.test(i.fragment)?r("Invalid fragment ".concat(i.fragment," in surface: ").concat(e)):i:r("Invalid authority ".concat(i.authority," in surface: ").concat(e)):r("Unsupported surface type ".concat(i.surfaceType," in surface: ").concat(e))},Fs=function(e){return!!e&&0===e.indexOf(Ss+ks)&&-1===e.indexOf(Ps)},Hs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return e.map((function(e){return Bs(e,n,t)})).filter((function(e){return!we(e)})).map(Ls)},Vs=function(e){e.includes(No)||e.push(No)},zs=function(e,n){var t=_s(n);e.includes(t)||e.push(t)},Js=function(e){return e.filter((function(n,t){return e.indexOf(n)===t}))},Qs=function(e){var n=e.getPageLocation,t=e.renderDecisions,r=e.decisionScopes,o=e.personalization,i=e.event,a=e.isCacheInitialized,c=e.logger,u=i.getViewName();return{isRenderDecisions:function(){return t},isSendDisplayEvent:function(){return!!o.sendDisplayEvent},shouldIncludeRenderedPropositions:function(){return!!o.includeRenderedPropositions},getViewName:function(){return u},hasScopes:function(){return r.length>0||We(o.decisionScopes)},hasSurfaces:function(){return We(o.surfaces)},hasViewName:function(){return at(u)},createQueryDetails:function(){var e=m(r);We(o.decisionScopes)&&e.push.apply(e,m(o.decisionScopes));var t=Hs(o.surfaces,n,c);this.shouldRequestDefaultPersonalization()&&(Vs(e),zs(t,n));var i=[Uc,Fc,Hc,zc,Vc,Jc,Qc];return e.includes(No)&&i.push(Bc),{schemas:i,decisionScopes:Js(e),surfaces:Js(t)}},isCacheInitialized:function(){return a},shouldFetchData:function(){return this.hasScopes()||this.hasSurfaces()||this.shouldRequestDefaultPersonalization()},shouldUseCachedData:function(){return this.hasViewName()&&!this.shouldFetchData()},shouldRequestDefaultPersonalization:function(){return o.defaultPersonalizationEnabled||!this.isCacheInitialized()&&!1!==o.defaultPersonalizationEnabled}}},Gs="Rendering is disabled for authoring mode.",Xs={propositions:[]},Ws=function(e){var n=e.logger,t=e.options,r=Mr({propositions:Dr(Mr({id:qr().required(),scope:qr().required(),scopeDetails:Mr({decisionProvider:qr().required()}).required(),items:Dr(Mr({id:qr().required(),schema:qr().required(),data:Pr().required()})).nonEmpty().required()}).required()).nonEmpty().required(),metadata:Mr(Pr()),viewName:qr()}).required();try{return r(t)}catch(e){return n.warn("Invalid options for applyPropositions. No propositions will be applied.",e),Xs}},Ys=function(e){var n=e.getPageLocation,t=e.logger,r=e.fetchDataHandler,o=e.viewChangeHandler,i=e.onClickHandler,a=e.isAuthoringModeEnabled,c=e.mergeQuery,u=e.viewCache,s=e.showContainers,d=e.applyPropositions,l=e.setTargetMigration,f=e.mergeDecisionsMeta,p=e.renderedPropositions,g=e.onDecisionHandler,m=e.handleConsentFlicker;return{lifecycle:{onComponentsRegistered:function(){m()},onDecision:g,onBeforeRequest:function(e){var n=e.request;return l(n),Promise.resolve()},onBeforeEvent:function(e){var i=e.event,d=e.renderDecisions,l=e.decisionScopes,g=void 0===l?[]:l,m=e.personalization,v=void 0===m?{}:m,y=e.onResponse,h=void 0===y?ct:y,b=e.onRequestFailure,E=void 0===b?ct:b;if(h((function(){return{propositions:[]}})),E((function(){return s()})),a())return t.warn(Gs),c(i,{enabled:!1}),Promise.resolve();var w=Qs({getPageLocation:n,renderDecisions:d,decisionScopes:g,personalization:v,event:i,isCacheInitialized:u.isInitialized(),logger:t}),C=[];if(w.shouldIncludeRenderedPropositions()&&C.push(p.clear()),w.shouldFetchData()){var I=u.createCacheUpdate(w.getViewName());E((function(){return I.cancel()})),r({cacheUpdate:I,personalizationDetails:w,event:i,onResponse:h})}else w.shouldUseCachedData()&&C.push(o({personalizationDetails:w,event:i,onResponse:h,onRequestFailure:E}));return Promise.all(C).then((function(e){var n=e.flatMap((function(e){return e}));We(n)&&f(i,n,[mu.DISPLAY])}))},onClick:function(e){var n=e.event,t=e.clickedElement;i({event:n,clickedElement:t})}},commands:{applyPropositions:{optionsValidator:function(e){return Ws({logger:t,options:e})},run:d}}}},$s=function(e){return Ue(Ve,{},{innerHTML:e})},Ks=":eq(",Zs=/:eq\((\d+)\)/g,ed=function(e){return-1===e.indexOf(Ks)},nd=function(e){return e.split(Zs).filter(at)},td=/(#|\.)(-?\w+)/g,rd=function(e,n,t){return"".concat(n).concat(CSS.escape(t))},od=function(e){return e.replace(td,rd)},id=function(e){for(var n=[],t=od(e.trim()),r=nd(t),o=r.length,i=0;i<o;){var a=r[i],c=r[i+1];c?n.push({sel:a,eq:Number(c)}):n.push({sel:a}),i+=2}return n},ad=function(e){var n=document;if(ed(e))return on(e,n);for(var t=id(e),r=t.length,o=[],i=n,c=0;c<r;){var u=t[c],s=u.sel,d=u.eq,l=on(s,i),f=l.length;if(0===f)break;if(null!=d&&d>f-1)break;c<r-1&&(i=null==d?a(l,1)[0]:l[d]),c===r-1&&(o=null==d?l:[l[d]]),c+=1}return o},cd=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementById(e)},ud=function(e,n,t){e.setAttribute(n,t)},sd=function(e,n){return e.getAttribute(n)},dd=function(e,n){e.removeAttribute(n)},ld=function(e,n,t,r){var o;o=r?"".concat(n,":").concat(t," !").concat(r,";"):"".concat(n,":").concat(t,";"),e.style.cssText+=";".concat(o)},fd=function(e){return e.parentNode},pd=function(e){return e.nextElementSibling},gd=function(e,n){if(e){var t=fd(e);t&&t.insertBefore(n,pd(e))}},md=function(e,n){if(e){var t=fd(e);t&&t.insertBefore(n,e)}},vd=function(e){var n=e.children;return n?Ye(n):[]},yd=function(e){var n=e.childNodes;return n?Ye(n):[]},hd=function(e){return e.firstElementChild},bd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(void 0===Is){var n=e.querySelector("[nonce]");Is=n&&(n.nonce||n.getAttribute("nonce"))}return Is},Ed="src",wd=function(e){return e.tagName===He},Cd=function(e){return Ue(He,{src:e})},Id=function(e){on(He,e).forEach((function(e){var n=sd(e,Ed);n&&Cd(n)}))},Sd=function(e,n){return e.tagName===n},Od=function(e){return Sd(e,ze)&&!sd(e,Ed)},kd=function(e){var n=on(ze,e),t=n.length,r=bd();if(r)for(var o=0;o<t;o+=1){var i=n[o];Od(i)&&(i.nonce=r)}},Pd=function(e,n){return new Promise((function(t,r){n.onload=function(){t(n)},n.onerror=function(){r(new Error("Failed to load script: ".concat(e)))}}))},Dd=function(e){var n=document.createElement("script");n.src=e,n.async=!0;var t=Pd(e,n);return document.head.appendChild(n),t},Td=function(e,n){return!!e&&e.tagName===n},Rd=function(e){return Td(e,Je)&&!sd(e,Ed)},Ad=function(e){return Td(e,Je)&&sd(e,Ed)},Nd=function(e){for(var n=on(Je,e),t=[],r=n.length,o=bd(),i=l({},o&&{nonce:o}),a=0;a<r;a+=1){var c=n[a];if(Rd(c)){var u=c.textContent;u&&t.push(Ue(Je,i,{textContent:u}))}}return t},xd=function(e){for(var n=on(Je,e),t=[],r=n.length,o=0;o<r;o+=1){var i=n[o];if(Ad(i)){var a=sd(i,Ed);a&&t.push(a)}}return t},Md=function(e,n){n.forEach((function(n){e.appendChild(n),e.removeChild(n)}))},qd=function(e){return Promise.all(e.map(Dd))},jd=function(e,n,t){var r=$s(n);kd(r);var o=yd(r),i=Nd(r),a=xd(r);return Id(r),o.forEach((function(n){Le(e,n)})),t(e),Md(e,i),qd(a)},Ld=function(e){yd(e).forEach(Cn)},_d=function(e,n,t){return Ld(e),jd(e,n,t)},Ud=function(e,n,t){var r=$s(n);kd(r);var o=yd(r),i=Nd(r),a=xd(r),c=o.length-1;for(Id(r);c>=0;){var u=o[c];t(u);var s=hd(e);s?md(s,u):Le(e,u),c-=1}return Md(e,i),qd(a)},Bd="alloy-prehiding",Fd="{ visibility: hidden }",Hd={},Vd=function(e){if(!Hd[e]){var n=bd(),t=l({},n&&{nonce:n}),r={textContent:"".concat(e," ").concat(Fd)},o=Ue(ze,t,r);Le(document.head,o),Hd[e]=o}},zd=function(e){var n=Hd[e];n&&(Cn(n),delete Hd[e])},Jd=function(e){return function(n){if(n&&!cd(Bd)){var t=bd(),r=l({id:Bd},t&&{nonce:t}),o=Ue(ze,r,{textContent:n});e.logOnContentHiding({status:"hide-containers",message:"Prehiding style applied to hide containers.",logLevel:"info"}),Le(document.head,o)}}},Qd=function(e){return function(){var n=cd(Bd);n&&(e.logOnContentHiding({status:"show-containers",message:"Prehiding style removed to show containers.",logLevel:"info"}),Cn(n))}},Gd=function(e,n,t){t(e),e.textContent=n},Xd=function(e,n,t){var r=$s(n);kd(r);var o=yd(r),i=Nd(r),a=xd(r);return Id(r),o.forEach((function(n){t(n),md(e,n)})),Md(e,i),qd(a)},Wd=function(e,n,t){return Xd(e,n,t).then((function(){Cn(e)}))},Yd=function(e,n,t){var r=$s(n);kd(r);var o=yd(r),i=Nd(r),a=xd(r);Id(r);var c=e;return o.forEach((function(e){t(e),gd(c,e),c=e})),Md(e,i),qd(a)},$d=function(e,n,t){var r=n.priority,i=o(n,he);Object.keys(i).forEach((function(n){ld(e,n,i[n],r)})),t(e)},Kd=function(e,n,t){Object.keys(n).forEach((function(t){ud(e,t,n[t])})),t(e)},Zd=function(e,n,t){wd(e)&&(Cd(n),t(e),dd(e,Ed),ud(e,Ed,n))},el=function(e,n,t){var r=n.from,o=n.to,i=vd(e),a=i[r],c=i[o];a&&c&&(r<o?gd(c,a):md(c,a),t(c),t(a))},nl=function(e,n,t,r){var o=e.map((function(e){return r(e,n,t)}));return Promise.all(o)},tl=function(e){return function(n,t){var r=n.selector,o=n.prehidingSelector,i=n.content;return Vd(o),En(r,ad).then((function(n){return nl(n,i,t,e)})).then((function(){zd(o)}),(function(e){throw zd(o),e}))}},rl=function(e,n,t){t(e)},ol="setHtml",il="customCode",al="setText",cl="setAttribute",ul="setImageSource",sl="setStyle",dl="move",ll="resize",fl="rearrange",pl="remove",gl="insertAfter",ml="insertBefore",vl="replaceHtml",yl="prependHtml",hl="appendHtml",bl="click",El="collectInteractions",wl=function(){var e;return f(f(f(f(f(f(f(f(f(f(e={},ol,tl(_d)),il,tl(Ud)),al,tl(Gd)),cl,tl(Kd)),ul,tl(Zd)),sl,tl($d)),dl,tl($d)),ll,tl($d)),fl,tl(el)),pl,tl(Cn)),f(f(f(f(f(f(e,gl,tl(Yd)),ml,tl(Xd)),vl,tl(Wd)),yl,tl(Ud)),hl,tl(jd)),El,tl(rl))},Cl="personalization:decisions",Il=function(e){var n=e.logger,t=e.prehidingStyle,r=e.showContainers,o=e.hideContainers,i=e.mergeQuery,a=e.processPropositions,c=e.createProposition,u=e.notificationHandler,s=e.consent;return function(e){var d=e.cacheUpdate,l=e.personalizationDetails,f=e.event,p=e.onResponse,g=s.current(),v=g.state,y=g.wasSet;"out"===v&&y||(l.isRenderDecisions()?o(t):r()),i(f,l.createQueryDetails());var h=u(l.isRenderDecisions(),l.isSendDisplayEvent(),l.getViewName());p((function(e){var t=e.response.getPayloadsByType(Cl);We(t)||n.logOnContentRendering({status:"no-offers",message:"No offers were returned.",logLevel:"info",detail:{query:l.createQueryDetails()}});var o,i,u,s=t.map((function(e){return c(e)})),f=qn(s,(function(e){return e.getScopeType()})),p=f.page,g=void 0===p?[]:p,v=f.view,y=void 0===v?[]:v,b=f.proposition,E=void 0===b?[]:b,w=d.update(y);if(l.isRenderDecisions()){var C=a([].concat(m(g),m(w)),E);o=C.render,i=C.returnedPropositions,u=C.returnedDecisions,We(g)&&n.logOnContentRendering({status:"rendering-started",message:"Started rendering propositions for page-wide scope.",logLevel:"info",detail:{scope:No,propositions:g.map((function(e){return e.toJSON()}))}}),We(w)&&n.logOnContentRendering({status:"rendering-started",message:"Rendering propositions started for view scope - ".concat(l.getViewName(),"."),logLevel:"info",detail:{scope:l.getViewName(),propositions:w.map((function(e){return e.toJSON()}))}}),o().then(h),r()}else{var I=a([],[].concat(m(g),m(w),m(E)));i=I.returnedPropositions,u=I.returnedDecisions}return{propositions:i,decisions:u}}))}},Sl=function(e,n){if(ed(e))return wn(e,n);for(var t=ad(e),r=!1,o=0;o<t.length;o+=1)if(t[o]===n){r=!0;break}return r},Ol="view",kl="page",Pl="proposition",Dl=function(e){return e.map((function(e){return e.trackingLabel,e.scopeType,o(e,be)}))},Tl=function(e){return e.filter((function(n,t){var r=JSON.stringify(n);return t===e.findIndex((function(e){return JSON.stringify(e)===r}))}))},Rl=function(e,n,t){for(var r=document.documentElement,o=e,i=0;o&&o!==r;){if(Sl(n,o)){var a=t(n),c={metas:a},u=a.find((function(e){return e.trackingLabel}));u&&(c.label=u.trackingLabel,c.weight=i);var s=a.find((function(e){return e.scopeType===Ol}));return s&&(c.viewName=s.scope,c.weight=i),c}o=o.parentNode,i+=1}return{metas:null}},Al=function(e,n,t){for(var r,o=[],i="",a=Number.MAX_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,u=0;u<n.length;u+=1){var s=Rl(e,n[u],t),d=s.metas,l=s.label,f=s.weight,p=s.viewName;d&&(l&&f<=a&&(i=l,a=f),p&&f<=c&&(r=p,c=f),o.push.apply(o,m(Dl(d))))}return{decisionsMeta:Tl(o),propositionActionLabel:i,propositionActionToken:void 0,viewName:r}},Nl=function(){return-1!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).location.href.indexOf("adobe_authoring_enabled")},xl=function(e,n){if(n||e){var t={};return e&&(t.label=e),n&&(t.tokens=[n]),t}},Ml=function(e){var n=e.mergeDecisionsMeta,t=e.collectInteractions,r=e.collectClicks,o=e.getInteractionMetas,i=e.getClickMetas,a=e.getClickSelectors,c=e.autoCollectPropositionInteractions;return function(e){var u,s,d,l=e.event,f=e.clickedElement,p=[];if([t(f,o,c),r(f,a(),i)].forEach((function(e){var n=e.decisionsMeta,t=e.propositionActionLabel,r=e.propositionActionToken,o=e.viewName;Array.prototype.push.apply(p,n),!u&&t&&(u=t),!s&&r&&(s=r),!d&&o&&(d=o)})),We(p)){var g={eventType:Xc};d&&(g.web={webPageDetails:{viewName:d}}),l.mergeXdm(g),n(l,p,[mu.INTERACT],xl(u,s))}}},ql=function(e){var n=e.createProposition,t=!1,r=Promise.resolve({}),o=function(e,t){var r=e[t.toLowerCase()];return r&&r.length>0?r:[n({scope:t,scopeDetails:{characteristics:{scopeType:Ol}},items:[{schema:Uc}]},!1)]};return{createCacheUpdate:function(e){var n=xe();return t=!0,r=r.then((function(e){return n.promise.then((function(n){return l(l({},e),n)})).catch((function(){return e}))})),{update:function(t){var r=t.filter((function(e){return e.getScope()})),i=qn(r,(function(e){return e.getScope().toLowerCase()}));return n.resolve(i),e?o(i,e):[]},cancel:function(){n.reject()}}},getView:function(e){return r.then((function(n){return o(n,e)}))},isInitialized:function(){return t}}},jl=function(e){var n=e.processPropositions,t=e.viewCache,r=e.logger;return function(e){var o,i,a=e.personalizationDetails,c=e.onResponse,u=a.getViewName();return c((function(){return{propositions:o,decisions:i}})),t.getView(u).then((function(e){var t;if(a.isRenderDecisions()){var c=n(e);return t=c.render,o=c.returnedPropositions,i=c.returnedDecisions,r.logOnContentRendering({status:"rendering-started",message:"Started rendering propositions for view scope - ".concat(u,"."),logLevel:"info",detail:{scope:u,propositions:e.map((function(e){return e.toJSON()}))}}),t()}var s=n([],e);return o=s.returnedPropositions,i=s.returnedDecisions,[]}))}},Ll=function(e){return Object.keys(e).map((function(n){return l({id:n},e[n])}))},_l=function(){var e={};return{storeClickMeta:function(n){var t=n.selector,r=n.meta,o=r.id,i=r.scope,a=r.scopeDetails,c=r.trackingLabel,u=r.scopeType;e[t]||(e[t]={}),e[t][o]={scope:i,scopeDetails:a,trackingLabel:c,scopeType:u}},getClickSelectors:function(){return Object.keys(e)},getClickMetas:function(n){return e[n]?Ll(e[n]):{}}}},Ul=function(){var e={},n={};return{storeInteractionMeta:function(t,r,o,i,a){a=parseInt(a,10),e[a]||(e[a]={},n[a]={}),n[a][t]||(n[a][t]=new Set),n[a][t].add(r),e[a][t]=l(l({},i),{},{scopeType:o})},getInteractionMetas:function(t){return Array.isArray(t)&&0!==t.length?Object.values(t.map((function(e){return parseInt(e,10)})).reduce((function(t,r){return Object.keys(e[r]||{}).forEach((function(o){t[o]||(t[o]={proposition:e[r][o],items:new Set}),t[o].items=new Set([].concat(m(t[o].items),m(n[r][o])))})),t}),{})).map((function(e){var n=e.proposition,t=e.items;return l(l({},n),{},{items:Array.from(t).map((function(e){return{id:e}}))})})):[]}}},Bl=function(e,n){return e===Hc&&n===El},Fl=f(f(f(f({},Bc,(function(){return!0})),Fc,(function(){return!0})),Hc,Bl),Jc,(function(){return!0})),Hl=function(e,n){return"function"==typeof Fl[e]&&Fl[e](e,n)},Vl=function(e){var n=e.processPropositions,t=e.createProposition,r=e.renderedPropositions,o=e.viewCache,i=function(e){var n=e.items,t=e.metadataForScope,r=void 0===t?{}:t,o=r.actionType,i=r.selector;return n.filter((function(e){return Hl(e.schema,o)})).map((function(e){var n=e.schema;return n===Fc||Bl(n,o)?kn(r)?void 0:l(l({},e),{},{schema:Bl(n,o)?Bc:n,data:l(l({},e.data),{},{selector:i,type:o})}):l({},e)})).filter((function(e){return e}))},a=function(e){return!(e.scope===No&&e.renderAttempted)},c=function(e){var n=e.propositions,t=e.metadata;return n.filter(a).map((function(e){return We(e.items)?{id:e.id,scope:e.scope,scopeDetails:e.scopeDetails,items:i({items:e.items,metadataForScope:t[e.scope]})}:e})).filter((function(e){return We(e.items)}))};return function(e){var i=e.propositions,a=void 0===i?[]:i,u=e.metadata,s=void 0===u?{}:u,d=e.viewName,l=xe();r.concat(l.promise);var f=c({propositions:a,metadata:s}).map((function(e){return t(e)}));return Promise.resolve().then((function(){return d?o.getView(d):[]})).then((function(e){var t=n([].concat(m(f),m(e))),r=t.render,o=t.returnedPropositions;return r().then(l.resolve),{propositions:o}}))}},zl=function(e){var n=e.window;return function(){return n.location}},Jl=function(e){return e.targetMigrationEnabled?function(e){e.getPayload().mergeMeta({target:{migration:!0}})}:ct},Ql="BODY > *:eq(0)",Gl=function(e){var n=e.selector;return e.type!==il||n!==Ql?e:l(l({},e),{selector:"BODY"})},Xl="SCRIPT,LINK,STYLE",Wl=function(e){var n=$s(e);return on(Xl,n).map((function(e){return e.outerHTML})).join("")},Yl=function(e){var n=l({},e),t=n.content,r=n.selector;if(os(t))return n;if(null==r)return n;var o=ad(r);return Td(o[0],Qe)?(n.type=hl,n.content=Wl(t),n):n},$l=function(e){return function(n){return n?e.reduce((function(e,n){return l(l({},e),n(e))}),n):n}},Kl=function(e){var n=e.preprocess,t=e.isPageWideSurface,r=function(e,t){var r=e.id,o=e.schema,i=e.data,a=e.characteristics,c=(void 0===a?{}:a).trackingLabel,u=i?i.type:void 0,s=n(i);return{getId:function(){return r},getSchema:function(){return o},getSchemaType:function(){return u},getData:function(){return s},getProposition:function(){return t},getTrackingLabel:function(){return c},getOriginalItem:function(){return e},toString:function(){return JSON.stringify(e)},toJSON:function(){return e}}};return function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=e.id,i=e.scope,a=e.scopeDetails,c=e.items,u=void 0===c?[]:c,s=(a||{}).characteristics,d=(void 0===s?{}:s).scopeType;return{getScope:function(){return i},getScopeType:function(){return i===No||t(i)?kl:d===Ol?Ol:Pl},getItems:function(){var e=this;return u.map((function(n){return r(n,e)}))},getNotification:function(){return{id:o,scope:i,scopeDetails:a}},getId:function(){return o},
toJSON:function(){return e},addToReturnValues:function(t,r,o,i){n&&(t.push(l(l({},e),{},{items:o.map((function(e){return e.getOriginalItem()})),renderAttempted:i})),i||r.push(l(l({},e),{},{items:o.map((function(e){return e.getOriginalItem()}))})))}}}},Zl=function(){var e=Promise.resolve([]);return{concat:function(n){e=e.then((function(e){return n.then((function(n){return e.concat(n)})).catch((function(){return e}))}))},clear:function(){var n=e;return e=Promise.resolve([]),n}}},ef=function(){return{setRenderAttempted:!0,includeInNotification:!0}},nf="always",tf="never",rf="decoratedElementsOnly",of=[nf,tf,rf],af="data-aep-interact-id",cf="data-aep-click-label",uf="data-aep-click-token",sf=0,df=function(e,n){return n?parseInt(n,10):++sf},lf=function(e,n){return!!e&&!!e[n]&&[nf,rf].includes(e[n])},ff=function(e,n,t,r,o,i,a,c){var u=a.scopeDetails,s=(void 0===u?{}:u).decisionProvider;return lf(e,s)||n===bl?function(e){if(e.tagName){var n=df(t,sd(e,af));c(t,r,i,a,n),ud(e,af,n),o&&!sd(e,cf)&&ud(e,cf,o)}}:ct},pf=function(e){var n=e.modules,t=e.logger,r=e.storeInteractionMeta,o=e.storeClickMeta,i=e.autoCollectPropositionInteractions;return function(e){var a=e.getData()||{},c=a.type,u=a.selector;if(!c)return t.warn("Invalid DOM action data: missing type.",e.getData()),{setRenderAttempted:!1,includeInNotification:!1};if(c===bl)return u?(o({selector:u,meta:l(l({},e.getProposition().getNotification()),{},{trackingLabel:e.getTrackingLabel(),scopeType:e.getProposition().getScopeType()})}),{setRenderAttempted:!0,includeInNotification:!1}):(t.warn("Invalid DOM action data: missing selector.",e.getData()),{setRenderAttempted:!1,includeInNotification:!1});if(!n[c])return t.warn("Invalid DOM action data: unknown type.",e.getData()),{setRenderAttempted:!1,includeInNotification:!1};var s=ff(i,c,e.getProposition().getId(),e.getId(),e.getTrackingLabel(),e.getProposition().getScopeType(),e.getProposition().getNotification(),r);return{render:function(){return n[c](e.getData(),s)},setRenderAttempted:!0,includeInNotification:!0}}},gf=function(e){var n=e.modules,t=e.logger,r=e.storeInteractionMeta,o=e.autoCollectPropositionInteractions;return function(e){var i=e.getData()||{},a=i.type;if(!i.selector||!a)return{setRenderAttempted:!1,includeInNotification:!1};if(!n[a])return t.warn("Invalid HTML content data",e.getData()),{setRenderAttempted:!1,includeInNotification:!1};var c=ff(o,a,e.getProposition().getId(),e.getId(),e.getTrackingLabel(),e.getProposition().getScopeType(),e.getProposition().getNotification(),r);return{render:function(){return n[a](e.getData(),c)},setRenderAttempted:!0,includeInNotification:!0}}},mf=function(e){var n=e.logger,t=e.executeRedirect,r=e.collect;return function(e){var o=(e.getData()||{}).content;return o?{render:function(){return r({decisionsMeta:[e.getProposition().getNotification()],documentMayUnload:!0}).then((function(){return n.logOnContentRendering({status:"rendering-redirect",detail:{propositionDetails:e.getProposition().getNotification(),redirect:o},message:"Redirect action ".concat(e.toString()," executed."),logLevel:"info"}),t(o)}))},setRenderAttempted:!0,onlyRenderThis:!0}:(n.warn("Invalid Redirect data",e.getData()),{})}},vf=function(e){var n=e.schemaProcessors,t=e.logger,r=function(e,n){return function(){return Promise.resolve().then(e).then((function(){return t.enabled&&t.info("Action ".concat(n.toString()," executed.")),!0})).catch((function(e){var r=e.message,o=e.stack,i="Failed to execute action ".concat(n.toString(),". ").concat(r," ").concat(o);return t.logOnContentRendering({status:"rendering-failed",detail:{propositionDetails:n.getProposition().getNotification(),item:n.toJSON()},error:e,message:i,logLevel:"warn"}),!1}))}},o=function(e,n){return Promise.all(e.map((function(e){return e()}))).then((function(e){if(e.includes(!0))return n}))},i=function(e){var t=n[e.getSchema()];return t?t(e):{}},a=function(e){for(var n,t,a,c,u=e.renderers,s=e.returnedPropositions,d=e.returnedDecisions,l=e.items,f=e.proposition,p=m(u),g=m(s),v=m(d),y=[],h=[],b=[],E=!1,w=!1,C=0;l.length>C;){c=l[C];var I=i(c);if(n=I.render,t=I.setRenderAttempted,a=I.includeInNotification,w=I.onlyRenderThis){g=[],v=[],t?(y=[c],h=[]):(y=[],h=[c]),p=[],b=[n],E=a;break}n&&b.push(r(n,c)),a&&(E=!0),t?y.push(c):h.push(c),C+=1}if(b.length>0){var S=E?f.getNotification():void 0;p.push((function(){return o(b,S)}))}else E&&p.push((function(){return Promise.resolve(f.getNotification())}));return y.length>0&&f.addToReturnValues(g,v,y,!0),h.length>0&&f.addToReturnValues(g,v,h,!1),{renderers:p,returnedPropositions:g,returnedDecisions:v,onlyRenderThis:w}};return function(e){for(var n,r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=[],u=[],s=[],d=0;e.length>d;){o=(r=e[d]).getItems();var f=a({renderers:c,returnedPropositions:u,returnedDecisions:s,items:o,proposition:r});if(c=f.renderers,u=f.returnedPropositions,s=f.returnedDecisions,n=f.onlyRenderThis)break;d+=1}return n&&e.forEach((function(e,n){n!==d&&e.addToReturnValues(u,s,e.getItems(),!1)})),i.forEach((function(e){e.addToReturnValues(u,s,e.getItems(),!1)})),{returnedPropositions:u,returnedDecisions:s,render:function(){return Promise.all(c.map((function(e){return e()}))).then((function(e){var n=e.filter((function(e){return e})),r=qn(n,(function(e){return e.scope}));return t.logOnContentRendering({status:"rendering-succeeded",detail:l({},r),message:"Scopes: ".concat(JSON.stringify(r)," successfully executed."),logLevel:"info"}),n}))}}}},yf=function(e){var n=e.processPropositions,t=e.createProposition,r=e.notificationHandler;return function(e){var o=e.renderDecisions,i=e.propositions,a=e.event,c=e.personalization,u=void 0===c?{}:c;if(!o)return Promise.resolve();var s=u.sendDisplayEvent,d=void 0===s||s,l=a?a.getViewName():void 0,f=i.map((function(e){return t(e,!0)})),p=n(f),g=p.render,m=p.returnedPropositions,v=r(o,d,l);return g().then(v),Promise.resolve({propositions:m})}},hf="defaultContent",bf=["content","contentType"],Ef=["mobileParameters","webParameters","html"],wf=function(e,n){for(var t=0;t<bf.length;t+=1){var r=bf[t];if(!Object.prototype.hasOwnProperty.call(e,r))return n.warn("Invalid in-app message data: missing property '".concat(r,"'."),e),!1}var o=e.content;if(e.contentType===uu)for(var i=0;i<Ef.length;i+=1){var a=Ef[i];if(!Object.prototype.hasOwnProperty.call(o,a))return n.warn("Invalid in-app message data.content: missing property '".concat(a,"'."),e),!1}return!0},Cf=function(e){var n=e.modules,t=e.logger;return function(e){var r=e.getData(),o=l({},e.getProposition().getNotification());if(!r)return t.warn("Invalid in-app message data: undefined.",r),{};var i=r.type,a=void 0===i?hf:i;return n[a]?wf(r,t)?o?{render:function(){return n[a](l(l({},r),{},{meta:o}))},setRenderAttempted:!0,includeInNotification:!0}:(t.warn("Invalid in-app message meta: undefined.",o),{}):{}:(t.warn("Invalid in-app message data: unknown type.",r),{})}},If=function(e){var n=on("#".concat(e),document);n&&n.length>0&&Cn(n[0])},Sf=function(e){var n={};if(!e||"a"!==e.tagName.toLowerCase())return n;var t=e.href;if(!t||!t.startsWith("adbinapp://"))return n;var r,o,i=t.split("?"),a=i[0].split("://")[1],c=e.innerText,u=e.getAttribute("data-uuid")||"";if(We(i)){var s=ge.default.parse(i[1]);r=s.interaction||"",o=_i(s.link||"")}return{action:a,interaction:r,link:o,label:c,uuid:u}},Of=function(e){return function(n){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.location.href=n:e.location.replace(n),new Promise((function(){}))}},kf="alloy-messaging-container",Pf="alloy-overlay-container",Df="alloy-content-iframe",Tf=function(){return[kf,Pf].forEach(If)},Rf=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Of(window);return function(t){t.preventDefault(),t.stopImmediatePropagation();var r=t.target,o="a"===r.tagName.toLowerCase()?r:r.closest("a");if(o){var i=Sf(o),a=i.action,c=i.interaction,u=i.link,s=i.label,d=i.uuid;e(a,{label:s,id:c,uuid:d,link:u}),"dismiss"===a&&Tf(),at(u)&&u.length>0&&n(u,!0)}}},Af=function(e,n){var t=(new DOMParser).parseFromString(e,cu),r=t.querySelector("script");r&&r.setAttribute("nonce",bd());var o=Ue("iframe",{src:URL.createObjectURL(new Blob([t.documentElement.outerHTML],{type:"text/html"})),id:Df});return o.addEventListener("load",(function(){(0,(o.contentDocument||o.contentWindow.document).addEventListener)("click",n)})),o},Nf=function(e,n,t,r){[{id:Pf,element:r},{id:kf,element:t},{id:Df,element:e}].forEach((function(e){var t=e.id,r=e.element,o=n[t],i=o.style,a=void 0===i?{}:i,c=o.params,u=void 0===c?{}:c;r.style=l(l({},r.style),a);var s=u.parentElement,d=void 0===s?"body":s,f=u.insertionMethod,p=void 0===f?"appendChild":f,g=u.enabled,m=void 0===g||g,v=document.querySelector(d);m&&v&&"function"==typeof v[p]&&v[p](r)}))},xf=function(e){var n=e.verticalAlign,t=e.width,r=e.horizontalAlign,o=e.backdropColor,i=e.height,a=e.cornerRadius,c=e.horizontalInset,u=e.verticalInset,s=e.uiTakeover,d=void 0!==s&&s,l={width:t?"".concat(t,"%"):"100%",backgroundColor:o||"rgba(0, 0, 0, 0.5)",borderRadius:a?"".concat(a,"px"):"0px",border:"none",position:d?"fixed":"relative",overflow:"hidden"};return"left"===r?l.left=c?"".concat(c,"%"):"0":"right"===r?l.right=c?"".concat(c,"%"):"0":"center"===r&&(l.left="50%",l.transform="translateX(-50%)"),"top"===n?l.top=u?"".concat(u,"%"):"0":"bottom"===n?(l.position="fixed",l.bottom=u?"".concat(u,"%"):"0"):"center"===n&&(l.top="50%",l.transform="".concat("center"===r?"".concat(l.transform," "):"","translateY(-50%)"),l.display="flex",l.alignItems="center",l.justifyContent="center"),l.height=i?"".concat(i,"vh"):"100%",l},Mf=function(e){return{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"transparent",opacity:e.backdropOpacity||.5,backgroundColor:e.backdropColor||"#FFFFFF"}},qf=["enabled","parentElement","insertionMethod"],jf=function(e){if(!e)return!1;var n=Object.keys(e);if(!n.includes(kf))return!1;if(!n.includes(Pf))return!1;for(var t=Object.values(e),r=0;r<t.length;r+=1){if(!Mr(t[r],"style"))return!1;if(!Mr(t[r],"params"))return!1;for(var o=0;o<qf.length;o+=1)if(!Mr(t[r].params,qf[o]))return!1}return!0},Lf=function(e){if(e){var n=e.uiTakeover,t=void 0!==n&&n;return f(f(f({},Df,{style:{border:"none",width:"100%",height:"100%"},params:{enabled:!0,parentElement:"#alloy-messaging-container",insertionMethod:"appendChild"}}),kf,{style:xf(e),params:{enabled:!0,parentElement:"body",insertionMethod:"appendChild"}}),Pf,{style:Mf(e),params:{enabled:!0===t,parentElement:"body",insertionMethod:"appendChild"}})}},_f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;Tf();var t=e.content,r=e.contentType,o=e.mobileParameters,i=e.webParameters;if(r===cu){var a=Ue("div",{id:kf}),c=Af(t,Rf(n)),u=Ue("div",{id:Pf});jf(i)||(i=Lf(o)),i&&Nf(c,i,a,u)}},Uf=function(e,n){return new Promise((function(t){var r=e.meta;_f(e,(function(e,t){var o={};o[mu.INTERACT]=$c,-1!==Object.values(mu).indexOf(e)&&(o[e]=$c),n({decisionsMeta:[r],propositionAction:t,eventType:Xc,propositionEventTypes:Object.keys(o)})})),t({meta:r})}))},Bf=function(e){return{defaultContent:function(n){return Uf(n,e)}}},Ff=function(e,n){return function(t,r,o){if(!t)return function(){};if(!r){var i=xe();return n.concat(i.promise),i.resolve}return function(n){n.length>0&&e({decisionsMeta:n,viewName:o})}}},Hf=function(e){var n=e.showContainers,t=e.consent;return function(){var e=t.current(),r=e.state,o=e.wasSet;r===Yr&&o?n():t.awaitConsent().catch(n)}},Vf=function(e){for(var n,t,r=document.documentElement,o=e,i=new Set;o&&o!==r;){var a=sd(o,af);a&&i.add(a),n=n||sd(o,cf),t=t||sd(o,uf),o=o.parentNode}return{interactIds:m(i),clickLabel:n,clickToken:t}},zf=function(e){var n=e.find((function(e){return e.scopeType===Ol}));return n?n.scope:void 0},Jf=function(e,n,t){return function(r){var o=r.scopeDetails,i=(void 0===o?{}:o).decisionProvider;return e[i]===nf||e[i]===rf&&(n||t)}},Qf=function(e,n,t){var r=Vf(e),o=r.interactIds,i=r.clickLabel,a=void 0===i?"":i,c=r.clickToken,u=Jf(t,a,c);if(0===o.length)return{};var s=n(o).filter(u);return{decisionsMeta:Dl(s),propositionActionLabel:a,propositionActionToken:c,viewName:zf(s)}},Gf=function(e){var n=e.config,t=e.logger,r=e.eventManager,o=e.consent,i=n.targetMigrationEnabled,a=n.prehidingStyle,c=n.autoCollectPropositionInteractions,u=Vu({eventManager:r,mergeDecisionsMeta:zu}),s=Qd(t),d=Jd(t),l=Ul(),p=l.storeInteractionMeta,g=l.getInteractionMetas,m=_l(),v=m.storeClickMeta,y=m.getClickSelectors,h=m.getClickMetas,b=zl({window:window}),E=wl(),w=$l([Yl,Gl]),C=Kl({preprocess:w,isPageWideSurface:Fs}),I=ql({createProposition:C}),S=Of(window),O=f(f(f(f(f({},Uc,ef),Bc,pf({modules:E,logger:t,storeInteractionMeta:p,storeClickMeta:v,autoCollectPropositionInteractions:c})),Fc,gf({modules:E,logger:t,storeInteractionMeta:p,autoCollectPropositionInteractions:c})),zc,mf({logger:t,executeRedirect:S,collect:u})),Jc,Cf({modules:Bf(u),logger:t})),k=vf({schemaProcessors:O,logger:t}),P=Zl(),D=Ff(u,P),T=Il({prehidingStyle:a,showContainers:s,hideContainers:d,mergeQuery:Ju,processPropositions:k,createProposition:C,notificationHandler:D,consent:o,logger:t}),R=Ml({mergeDecisionsMeta:zu,collectInteractions:Qf,collectClicks:Al,getInteractionMetas:g,getClickMetas:h,getClickSelectors:y,autoCollectPropositionInteractions:c}),A=jl({processPropositions:k,viewCache:I,logger:t}),N=Vl({processPropositions:k,createProposition:C,renderedPropositions:P,viewCache:I}),x=Jl({targetMigrationEnabled:i}),M=yf({processPropositions:k,createProposition:C,notificationHandler:D}),q=Hf({showContainers:s,consent:o});return Ys({getPageLocation:b,logger:t,fetchDataHandler:T,viewChangeHandler:A,onClickHandler:R,isAuthoringModeEnabled:Nl,mergeQuery:Ju,viewCache:I,showContainers:s,applyPropositions:N,setTargetMigration:x,mergeDecisionsMeta:zu,renderedPropositions:P,onDecisionHandler:M,handleConsentFlicker:q})};Gf.namespace="Personalization";var Xf=of.map((function(e){return Ar(e)}));Gf.configValidators=Mr({prehidingStyle:qr().nonEmpty(),targetMigrationEnabled:Tr().default(!1),autoCollectPropositionInteractions:Mr(f(f({},Iu,kr(Xf).default(nf)),Su,kr(Xf).default(tf))).default(f(f({},Iu,nf),Su,tf)).noUnknownFields()});var Wf=function(e){var n=e.storedConsent,t=e.taskQueue,r=e.defaultConsent,o=e.consent,i=e.sendSetConsentRequest,a=e.validateSetConsentOptions,c=e.consentHashStore,u=e.doesIdentityCookieExist,s=f({},Kr,r),d=n.read(),l=u(),p=void 0!==d[Kr];l&&p||c.clear(),l||(n.clear(),d={}),o.initializeConsent(s,d);var g=function(){if(0===t.length){var e=n.read();void 0!==e[Kr]&&o.setConsent(e)}};return{commands:{setConsent:{optionsValidator:a,run:function(e){var n=e.consent,r=e.identityMap,a=e.edgeConfigOverrides;o.suspend();var u=c.lookup(n);return t.addTask((function(){return u.isNew()?i({consentOptions:n,identityMap:r,edgeConfigOverrides:a}):Promise.resolve()})).then((function(){return u.save()})).finally(g)}}},lifecycle:{onResponse:g,onRequestFailure:g}}},Yf=function(e){return Array.isArray(e)?e.map((function(e){return Yf(e)})):"object"===w(e)&&null!==e?Object.keys(e).sort().reduce((function(n,t){return n[t]=Yf(e[t]),n}),{}):e},$f=function(e){return Ne(JSON.stringify(Yf(e)))},Kf=function(e){var n=e.standard,t=e.version;return"".concat(n,".").concat(t)},Zf=function(e){var n=e.storage;return{clear:function(){n.clear()},lookup:function(e){var t={},r=function(e){var n=Kf(e),r=(e.standard,e.version,o(e,Ee));return t[n]||(t[n]=$f(r).toString()),t[n]};return{isNew:function(){return e.some((function(e){var t=Kf(e),o=n.getItem(t);return null===o||o!==r(e)}))},save:function(){e.forEach((function(e){var t=Kf(e);n.setItem(t,r(e))}))}}}}},ep=function(){var e={},n=jo({content:e,addIdentity:function(n,t){e.identityMap=e.identityMap||{},e.identityMap[n]=e.identityMap[n]||[],e.identityMap[n].push(t)},hasIdentity:function(n){return void 0!==(e.identityMap&&e.identityMap[n])}});return n.setConsent=function(n){e.consent=n},n},np=function(e){var n=e.payload,t=e.datastreamIdOverride;return Mo({payload:n,datastreamIdOverride:t,getAction:function(){return"privacy/set-consent"},getUseSendBeacon:function(){return!1}})},tp=function(e){var n=e.parseConsentCookie,t=e.orgId,r=e.cookieJar,o=Mn(t,Gn);return{read:function(){var e=r.get(o);return e?n(e):{}},clear:function(){r.remove(o)}}},rp=function(e){var n=e.createConsentRequestPayload,t=e.createConsentRequest,r=e.sendEdgeNetworkRequest,o=e.edgeConfigOverrides;return function(e){var i=e.consentOptions,a=e.identityMap,c=e.edgeConfigOverrides,u=Uo({payload:n(),globalConfigOverrides:o,localConfigOverrides:c});u.payload.setConsent(i),Ce(a)&&Object.keys(a).forEach((function(e){a[e].forEach((function(n){u.payload.addIdentity(e,n)}))}));var s=t(u);return r({request:s}).then((function(){}))}},op=function(e){return e.split(";").reduce((function(e,n){var t=a(n.split("="),2),r=t[0],o=t[1];return e[r]=o,e}),{})},ip=Mr({consent:Dr(Pr()).required().nonEmpty(),identityMap:Lr,edgeConfigOverrides:_r}).noUnknownFields().required(),ap=function(e){var n=e.config,t=e.consent,r=e.sendEdgeNetworkRequest,o=e.createNamespacedStorage,i=n.orgId,a=n.defaultConsent,c=tp({parseConsentCookie:op,orgId:i,cookieJar:Oe}),u=Ae(),s=rp({createConsentRequestPayload:ep,createConsentRequest:np,sendEdgeNetworkRequest:r,edgeConfigOverrides:n.edgeConfigOverrides}),d=o("".concat(xn(i),".consentHashes.")),l=Zf({storage:d.persistent}),f=Wn({orgId:i});return Wf({storedConsent:c,taskQueue:u,defaultConsent:a,consent:t,sendSetConsentRequest:s,validateSetConsentOptions:ip,consentHashStore:l,doesIdentityCookieExist:f})};ap.namespace="Privacy";var cp=Mr({streamingMedia:Mr({channel:qr().nonEmpty().required(),playerName:qr().nonEmpty().required(),appVersion:qr(),mainPingInterval:Nr().minimum(10).maximum(50).default(10),adPingInterval:Nr().minimum(1).maximum(10).default(10)}).noUnknownFields()}),up=function(e){var n=e.options;return kr([Mr({playerId:qr().required(),getPlayerDetails:Rr().required(),xdm:Mr({mediaCollection:Mr({sessionDetails:Mr(Pr()).required()})})}).required(),Mr({xdm:Mr({mediaCollection:Mr({playhead:Nr().required(),sessionDetails:Mr(Pr()).required()})})}).required()],"Error validating the createMediaSession command options.")(n)},sp=function(e){var n=e.options;return kr([Mr({playerId:qr().required(),xdm:Mr({eventType:jr.apply(void 0,m(Object.values(Yu))).required(),mediaCollection:Mr(Pr())}).required()}).required(),Mr({xdm:Mr({eventType:jr.apply(void 0,m(Object.values(Yu))).required(),mediaCollection:Mr({playhead:Nr().integer().required(),sessionID:qr().required()}).required()}).required()}).required()],"Error validating the sendMediaEvent command options.")(n)},dp=function(e){var n=e.config,t=e.trackMediaEvent,r=e.trackMediaSession,o=e.mediaResponseHandler;return{lifecycle:{onBeforeEvent:function(e){var n=e.mediaOptions,t=e.onResponse,r=void 0===t?ct:t;if(n){var i=n.legacy,a=n.playerId,c=n.getPlayerDetails;i||r((function(e){var n=e.response;return o({playerId:a,getPlayerDetails:c,response:n})}))}}},commands:{createMediaSession:{optionsValidator:function(e){return up({options:e})},run:r},sendMediaEvent:{optionsValidator:function(e){return sp({options:e})},run:function(e){return n.streamingMedia?t(e):Promise.reject(new Error("Streaming media is not configured."))}}}}},lp=function(e){var n=e.config,t=e.logger,r=e.eventManager,o=e.sendEdgeNetworkRequest,i=e.consent,a=es(),c=Ku({config:n,eventManager:r,logger:t,consent:i,sendEdgeNetworkRequest:o,setTimestamp:dc((function(){return new Date}))}),u=ts({mediaSessionCacheManager:a,mediaEventManager:c,config:n}),s=rs({config:n,mediaEventManager:c,mediaSessionCacheManager:a}),d=is({mediaSessionCacheManager:a,config:n,trackMediaEvent:u});return dp({config:n,trackMediaEvent:u,mediaEventManager:c,mediaResponseHandler:d,trackMediaSession:s})};lp.namespace="Streaming media",lp.configValidators=cp;var fp=Object.freeze({__proto__:null,activityCollector:Za,audiences:rc,context:kc,decisioningEngine:Qu,eventMerge:Wu,legacyMediaAnalytics:Es,machineLearning:Cs,personalization:Gf,privacy:ap,streamingMedia:lp}),pp=window.console,gp=Zn(window),mp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Mr({name:qr().default("alloy"),monitors:Dr(Mr({})).default([]),components:Dr(Rr())}).noUnknownFields()(e),t=n.name,r=n.monitors,o=n.components,i=function(){return(window.__alloyMonitors||[]).concat(r)},a=Br({console:pp,locationSearch:window.location.search,createLogger:Ao,instanceName:t,createNamespacedStorage:gp,getMonitors:i}),c=fa({instanceName:t,logController:a,components:o});return a.logger.logOnInstanceCreated({instance:c}),c};n.createInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Mr({name:qr().default("alloy"),monitors:Dr(Mr({})).default([])}).noUnknownFields()(e),t=n.name,r=n.monitors;return mp({name:t,monitors:r,components:Object.values(fp)})}}},"adobe-alloy/dist/lib/instanceManager/createInstanceManager.js":{script:function(e){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function t(e){return a(e)||i(e)||o(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,n){if(e){if("string"==typeof e)return c(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,n):void 0}}function i(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function a(e){if(Array.isArray(e))return c(e)}function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){d(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n,t){return(n=l(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e){var t=f(e,"string");return"symbol"==n(t)?t:t+""}function f(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(e,n){if(null==e)return{};var t,r,o=g(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.includes(t)||{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function g(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}var m=["name","edgeConfigId","stagingEdgeConfigId","developmentEdgeConfigId","onBeforeEventSend"];e.exports=function(e){var n=e.turbine,r=e.window,o=e.createInstance,i=e.createEventMergeId,a=e.orgId,c=e.wrapOnBeforeEventSend,u=e.getConfigOverrides,d=n.getExtensionSettings().instances,l={},f={};return r.__alloyMonitors=r.__alloyMonitors||[],r.__alloyMonitors.push({onInstanceCreated:function(){f.onInstanceCreated||(f.onInstanceCreated=[]);for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];f.onInstanceCreated.push(n)},onInstanceConfigured:function(){f.onInstanceConfigured||(f.onInstanceConfigured=[]);for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];f.onInstanceConfigured.push(n)},onBeforeCommand:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];"configure"===n[0].commandName&&(f.onBeforeCommand||(f.onBeforeCommand=[]),f.onBeforeCommand.push(n))}}),d.forEach((function(e){var t=e.name,i=e.edgeConfigId,d=e.stagingEdgeConfigId,f=e.developmentEdgeConfigId,g=e.onBeforeEventSend,v=p(e,m),y=o({name:t});r[t]=y,r.__alloyNS||(r.__alloyNS=[]),r.__alloyNS.push(t),l[t]=y;var h=n.environment&&n.environment.stage,b="development"===h&&f||"staging"===h&&d||i;v.edgeConfigOverrides=u(v),y("configure",s(s({},v),{},{datastreamId:b,debugEnabled:n.debugEnabled,orgId:v.orgId||a,onBeforeEventSend:c(g)})),n.onDebugChanged((function(e){y("setDebug",{enabled:e})}))})),{getInstance:function(e){return l[e]},createEventMergeId:function(){return i()},addMonitor:function(e){r.__alloyMonitors.push(e),Object.keys(f).forEach((function(n){e[n]&&f[n].forEach((function(r){e[n].apply(e,t(r))}))}))}}}}},"adobe-alloy/dist/lib/instanceManager/injectWrapOnBeforeEventSend.js":{script:function(e){"use strict";e.exports=function(e){var n=e.version;return function(e){return function(t){if(t.xdm.implementationDetails.name="".concat(t.xdm.implementationDetails.name,"/reactor"),t.xdm.implementationDetails.version="".concat(t.xdm.implementationDetails.version,"+").concat(n),e)return e(t)}}}}},"adobe-alloy/dist/lib/createEventMergeIdCache.js":{script:function(e){"use strict";e.exports=function(){var e={};return{set:function(n,t){e[n]=t},getByCacheId:function(n){return e[n]},clearByEventMergeId:function(n){Object.keys(e).forEach((function(t){e[t]===n&&delete e[t]}))}}}}},"adobe-alloy/dist/lib/createSendEventCallbackStorage.js":{script:function(e){"use strict";e.exports=function(){var e=[];return{add:function(n){e.push(n)},triggerEvent:function(n){e.forEach((function(e){e(n)}))}}}}},"adobe-alloy/dist/lib/createMediaCollectionSessionStorage.js":{script:function(e){"use strict";e.exports=function(){var e={};return{add:function(n){var t=n.playerId,r=n.sessionDetails;if(e[t])throw new Error("Player Id ".concat(t," already exists"));e[t]=r},remove:function(n){var t=n.playerId;e[t]=void 0},get:function(n){var t=n.playerId;return e[t]}}}}},"adobe-alloy/dist/lib/createVariableStore.js":{script:function(e){"use strict";e.exports=function(){return{}}}}}},"adobe-alloy-beta":{displayName:"BETA - Adobe Experience Platform Web SDK",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EPb5b3e59332884b779c88ad5baab87b79/",settings:{instances:[{name:"alloy",edgeConfigId:"96f1c7b0-9607-404a-a6c3-a1e71445a99f",idMigrationEnabled:!1,stagingEdgeConfigId:"96f1c7b0-9607-404a-a6c3-a1e71445a99f",developmentEdgeConfigId:"96f1c7b0-9607-404a-a6c3-a1e71445a99f",thirdPartyCookiesEnabled:!1,personalizationStorageEnabled:!0}]},modules:{"adobe-alloy-beta/dist/lib/instanceManager/index.js":{script:function(e,n,t,r){"use strict";var o,i=t("../alloy"),a=i.createInstance,c=i.createEventMergeId,u=t("./createInstanceManager"),s=t("./injectWrapOnBeforeEventSend"),d=t("../utils/createGetConfigOverrides"),l=s({version:"2.22.0-beta.0"});e.exports=u({turbine:r,window:window,createInstance:a,createEventMergeId:c,orgId:_satellite.company.orgId,wrapOnBeforeEventSend:l,getConfigOverrides:d(null===(o=r.environment)||void 0===o?void 0:o.stage)})}},"adobe-alloy-beta/dist/lib/alloy.js":{script:function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(null==e)return{};var t,r,o=i(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function i(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}function a(e){var n=c(e,"string");return"symbol"===w(n)?n:String(n)}function c(e,n){if("object"!==w(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function u(e,n){return l(e)||d(e,n)||y(e,n)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,c=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==t.return||t.return()}finally{if(c)throw o}}return i}}function l(e){if(Array.isArray(e))return e}function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){g(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function g(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function m(e){return b(e)||h(e)||y(e)||v()}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,n){if(e){if("string"==typeof e)return E(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?E(e,n):void 0}}function h(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function b(e){if(Array.isArray(e))return E(e)}function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function C(e,n){return e(n={exports:{}},n.exports),n.exports}function I(e,n){var t=n||0,r=ht;return[r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]]].join("")}function S(e,n,t){var r=n&&t||0;"string"==typeof e&&(n="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||yt)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n)for(var i=0;i<16;++i)n[r+i]=o[i];return n||Et(o)}function O(e){return"object"===w(e)||void 0===e}function k(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(O(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!O(t[o])&&r===String(t[o]).toLowerCase())return!0;return!1}}}function P(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(O(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!O(t[o])&&r===String(t[o]).toLowerCase())return!1;return!0}}}function D(){return{matches:function(e,n){return void 0!==e[n]&&null!==e[n]}}}function T(){return{matches:function(e,n){return void 0===e[n]||null===e[n]}}}function R(e){return"number"==typeof e}function A(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e[n];if(!R(r))return!1;for(var o=0;o<t.length;o+=1)if(R(t[o])&&r>t[o])return!0;return!1}}}function N(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e[n];if(!R(r))return!1;for(var o=0;o<t.length;o+=1)if(R(t[o])&&r>=t[o])return!0;return!1}}}function x(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e[n];if(!R(r))return!1;for(var o=0;o<t.length;o+=1)if(R(t[o])&&r<t[o])return!0;return!1}}}function M(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e[n];if(!R(r))return!1;for(var o=0;o<t.length;o+=1)if(R(t[o])&&r<=t[o])return!0;return!1}}}function q(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(O(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!O(t[o])&&-1!==r.indexOf(String(t[o]).toLowerCase()))return!0;return!1}}}function j(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(O(e[n]))return!1
;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!O(t[o])&&-1!==r.indexOf(String(t[o]).toLowerCase()))return!1;return!0}}}function L(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(O(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!O(t[o])&&r.startsWith(String(t[o]).toLowerCase()))return!0;return!1}}}function _(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(O(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!O(t[o])&&r.endsWith(t[o].toLowerCase()))return!0;return!1}}}function U(e){return Ls[e]}function B(e){return void 0===e}function F(e,n,t){switch(n){case Ms.GREATER_THAN:return e>t;case Ms.GREATER_THAN_OR_EQUAL_TO:return e>=t;case Ms.LESS_THAN:return e<t;case Ms.LESS_THAN_OR_EQUAL_TO:return e<=t;case Ms.EQUALS:return e===t;case Ms.NOT_EQUALS:return e!==t;default:return!1}}function H(e,n){for(var t=0;t<n.length;t+=1)if(!B(e[n[t]]))return e[n[t]]}function V(e,n){for(var t=Object.keys(e),r=0;r<t.length;r+=1){var o=t[r],i=n.event;if((void 0===i?{}:i)[t[r]]!==e[o])return!1}return!0}function z(e,n,t,r){return e.reduce((function(e,o){var i=H(o,_s);if(!i)return e;var a=n.events[i];if(!a)return e;var c=H(o,Us);if(!c)return e;var u=a[c];if(!u)return e;if(!V(o,u))return e;var s=u.count,d=void 0===s?1:s;return B(t)||B(r)||u.timestamp>=t&&u.timestamp<=r?e+d:e}),0)}function J(e,n,t,r){var o=t;return e.every((function(e){var t=H(e,_s);if(!t)return!1;var i=n.events[t];if(!i)return!1;var a=H(e,Us);if(!a)return!1;var c=i[a];if(!V(e,c))return!1;if(null===c||B(c)||0===c.count)return!1;var u=(B(o)||c.timestamp>=o)&&(B(r)||c.timestamp<=r);return o=c.timestamp,u}))?1:0}function Q(e,n){for(var t=!0,r=0;r<n.length;r+=1)t=t&&n[r].evaluate(e);return t}function G(e,n){for(var t=!1,r=0;r<n.length;r+=1)if(t=t||n[r].evaluate(e))return!0;return!1}function X(e,n){return{version:e,rules:n}}function W(e,n){return{execute:function(t){return e.evaluate(t)?n:[]},toString:function(){return"Rule{condition=".concat(e,", consequences=").concat(n,"}")}}}function Y(e,n){return{evaluate:function(e){return n.evaluate(e)},toString:function(){return"Condition{type=".concat(e,", definition=").concat(n,"}")}}}function $(e,n,t){return{id:e,type:n,detail:t}}function K(e,n){return{evaluate:function(t){return qs.AND===e?Q(t,n):qs.OR===e&&G(t,n)}}}function Z(e,n,t){return{evaluate:function(r){var o=U(n);return!!o&&o.matches(r,e,t)}}}function ee(e,n,t,r,o,i){return{evaluate:function(a){return F(js.ORDERED===i?J(e,a,r,o):z(e,a,r,o),n,t)}}}function ne(e){return Z(e.key,e.matcher,e.values)}function te(e){return K(e.logic,e.conditions.map(oe))}function re(e){var n=e.events,t=e.from,r=e.to;return ee(n,e.matcher,e.value,t,r,e.searchType)}function oe(e){var n=e.type,t=e.definition;if(xs.MATCHER===n)return Y(n,ne(t));if(xs.GROUP===n)return Y(n,te(t));if(xs.HISTORICAL===n)return Y(n,re(t));throw new Error("Can not parse condition")}function ie(e){return $(e.id,e.type,e.detail)}function ae(e){var n=e.condition,t=e.consequences;return W(oe(n),t.map(ie))}function ce(e){return X(e.version,e.rules.map(ae))}function ue(e){var n=ce(e),t=n.version,r=n.rules;return{execute:function(e){return r.map((function(n){return n.execute(e)})).filter((function(e){return e.length>0}))},getVersion:function(){return t},numRules:function(){return r.length}}}Object.defineProperty(n,"__esModule",{value:!0}),n.deepAssign=n.createInstance=n.createEventMergeId=void 0;var se,de,le,fe=r(t("@adobe/reactor-object-assign")),pe=r(t("@adobe/reactor-query-string")),ge=r(t("@adobe/reactor-load-script")),me="Chrome",ve="Edge",ye="EdgeChromium",he="Firefox",be="IE",Ee="Safari",we="Unknown",Ce=function(e,n){return-1!==e.indexOf(n)},Ie=[me,ve,ye,be,we],Se=function(e){return Ce(Ie,e)},Oe=function(e){return null==e},ke=function(e){return!Oe(e)&&!Array.isArray(e)&&"object"===w(e)},Pe=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.length<2?fe.default.apply(void 0,n):n.reduce((function(e,n){return ke(n)&&Object.keys(n).forEach((function(t){var r;Array.isArray(n[t])?Array.isArray(e[t])?(r=e[t]).push.apply(r,m(n[t])):e[t]=m(n[t]):e[t]=n[t]})),e}))},De="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Te=C((function(e){var n;n=function(){function e(){for(var e=0,n={};e<arguments.length;e++){var t=arguments[e];for(var r in t)n[r]=t[r]}return n}function n(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function t(r){function o(){}function i(n,t,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(t);/^[\{\[]/.test(a)&&(t=a)}catch(e){}t=r.write?r.write(t,n):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=n+"="+t+c}}function a(e,t){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var c=i[a].split("="),u=c.slice(1).join("=");t||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var s=n(c[0]);if(u=(r.read||r)(u,s)||n(u),t)try{u=JSON.parse(u)}catch(e){}if(o[s]=u,e===s)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(n,t){i(n,"",e(t,{expires:-1}))},o.defaults={},o.withConverter=t,o}return t((function(){}))},e.exports=n()})),Re={get:Te.get,set:Te.set,remove:Te.remove,withConverter:Te.withConverter},Ae=function e(n,t){Object.keys(t).forEach((function(r){ke(n[r])&&ke(t[r])?e(n[r],t[r]):n[r]=t[r]}))},Ne=function(e){if(Oe(e))throw new TypeError('deepAssign "target" cannot be null or undefined');for(var n=Object(e),t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return r.forEach((function(e){return Ae(n,Object(e))})),n};n.deepAssign=Ne;for(var xe=function(e,n){return function(t){var r=n.split(".").reduce((function(e,n){return e[n]=e[n]||{},e[n]}),e);Ne(r,t)}},Me=function(){var e=[];return{add:function(n){e.push(n)},call:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return Promise.all(e.map((function(e){return e.apply(void 0,t)})))}}},qe=function(e){var n=e.logger,t=e.cookieJar;return p(p({},t),{},{set:function(e,r,o){n.info("Setting cookie",p({name:e,value:r},o)),t.set(e,r,o)}})},je=function(){var e=0,n=Promise.resolve();return{addTask:function(t){e+=1;var r=function(){return t().finally((function(){e-=1}))};return n=n.then(r,r)},get length(){return e}}},Le=function(){for(var e=[],n=0;n<256;n++){for(var t=n,r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e.push(t)}return function(n,t){n=unescape(encodeURIComponent(n)),t||(t=0),t=~t;for(var r=0;r<n.length;r++){var o=255&(t^n.charCodeAt(r));t=t>>>8^e[o]}return(t=~t)>>>0}}(),_e=function(){var e={};return e.promise=new Promise((function(n,t){e.resolve=n,e.reject=t})),e},Ue=function(e,n){return e===n},Be=function(e,n,t){for(var r=0;r<e.length;r+=1)if(t(e[r],n))return r;return-1},Fe=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ue;return e.filter((function(t,r){return Be(e,t,n)===r}))},He=function(e,n){return e.substr(-n.length)===n},Ve=function(e,n){for(var t=0;t<e.length;t+=1){var r=e[t];if(n(r,t,e))return r}},ze=function(e,n){return e.appendChild(n)},Je=function(e,n){Object.keys(n).forEach((function(t){if("style"===t&&ke(n[t])){var r=n[t];Object.keys(r).forEach((function(n){e.style[n]=r[n]}))}else e[t]=n[t]}))},Qe=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:document).createElement(e);return Object.keys(n).forEach((function(e){o.setAttribute(e,n[e])})),Je(o,t),r.forEach((function(e){return ze(o,e)})),o},Ge="BODY",Xe="IFRAME",We="IMG",Ye="DIV",$e="STYLE",Ke="SCRIPT",Ze="HEAD",en=function(e){var n=e.src,t=e.currentDocument,r=void 0===t?document:t;return new Promise((function(e,t){Qe(We,{src:n},{onload:e,onerror:t,onabort:t},[],r)}))},nn=function(e){return"function"==typeof e},tn=function(e){return Array.isArray(e)&&e.length>0},rn=function(e){return Array.isArray(e)?e:null==e?[]:[].slice.call(e)},on=/^\s*>/,an=function(e,n){if(!on.test(n))return rn(e.querySelectorAll(n));var t="alloy-".concat(Date.now());try{return e.classList.add(t),rn(e.querySelectorAll(".".concat(t," ").concat(n)))}finally{e.classList.remove(t)}},cn=function(e,n){return e.substr(0,n.length)===n},un=":shadow",sn=function(e){return e.split(un)},dn=function(e,n){var t=n;if(!cn(t,">"))return t;if(window.document.documentMode)return t.substring(1).trim();var r=e instanceof Element||e instanceof HTMLDocument?":scope":":host";return"".concat(r," ").concat(t)},ln=function(e,n){if(!window.document.documentElement.attachShadow)return an(e,n.replace(un,""));var t=sn(n);if(t.length<2)return an(e,n);for(var r=e,o=0;o<t.length;o+=1){var i=t[o].trim();if(""===i&&r.shadowRoot)r=r.shadowRoot;else{var a=dn(r,i),c=an(r,a);if(0===c.length||!c[0]||!c[0].shadowRoot)return c;r=c[0].shadowRoot}}},fn=function(e){return-1!==e.indexOf(un)},pn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return fn(e)?ln(n,e):an(n,e)},gn="MutationObserver",mn="requestAnimationFrame",vn={childList:!0,subtree:!0},yn="visibilityState",hn="visible",bn=100,En=5e3,wn=function(e){return new Error("Could not find: ".concat(e))},Cn=function(e){return new Promise(e)},In=function(e){return nn(e[gn])},Sn=function(e,n,t,r,o){return Cn((function(i,a){var c=new e[gn]((function(){var e=o(t);tn(e)&&(c.disconnect(),i(e))}));setTimeout((function(){c.disconnect(),a(wn(t))}),r),c.observe(n,vn)}))},On=function(e){return e[yn]===hn},kn=function(e,n,t,r){return Cn((function(o,i){(function t(){var i=r(n);tn(i)?o(i):e[mn](t)})(),setTimeout((function(){i(wn(n))}),t)}))},Pn=function(e,n,t){return Cn((function(r,o){(function n(){var o=t(e);tn(o)?r(o):setTimeout(n,bn)})(),setTimeout((function(){o(wn(e))}),n)}))},Dn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pn,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:En,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:document,i=n(e);return tn(i)?Promise.resolve(i):In(r)?Sn(r,o,e,t,n):On(o)?kn(r,e,t,n):Pn(e,t,n)},Tn=function(e,n){return n.matches?n.matches(e):n.msMatchesSelector(e)},Rn=function(e){var n=e.parentNode;return n?n.removeChild(e):null},An={name:"Adobe Alloy"},Nn={style:{display:"none",width:0,height:0}},xn=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.appendNode,r=void 0===t?ze:t,o=n.awaitSelector,i=void 0===o?Dn:o,a=n.createNode,c=void 0===a?Qe:a,s=n.fireImage,d=void 0===s?en:s,l=d,f=function(){return i(Ge).then((function(n){var t=u(n,1)[0];return e||(e=c(Xe,An,Nn),r(t,e))}))},p=function(e){var n=e.src;return f().then((function(e){var t=e.contentWindow.document;return d({src:n,currentDocument:t})}))};return function(e){var n=e.hideReferrer,t=e.url;return n?p({src:t}):l({src:t})}},Mn=function(e){return ke(e)&&0===Object.keys(e).length},qn=function e(n,t){return Oe(n)||!ke(n)?n:Object.keys(n).reduce((function(r,o){var i=n[o];if(ke(i)){var a=e(i,t);return Mn(a)?r:p(p({},r),{},g({},o,a))}return t(i)?p(p({},r),{},g({},o,i)):r}),{})},jn=function(e,n){return Array.prototype.concat.apply([],e.map(n))},Ln="com.adobe.alloy.",_n=function(e,n){return e.slice(-n)},Un="".concat(Ln,"getTld"),Bn=function(e,n){for(var t="",r=e.location.hostname.toLowerCase().split("."),o=1;o<r.length&&!n.get(Un);)t=_n(r,o+=1).join("."),n.set(Un,Un,{domain:t});return n.remove(Un,{domain:t}),t},Fn="kndctr",Hn=function(e){return e.replace("@","_")},Vn=function(e,n){return"".concat(Fn,"_").concat(Hn(e),"_").concat(n)},zn=function(e,n){var t={};return e.forEach((function(e){var r=n(e);t[r]||(t[r]=[]),t[r].push(e)})),t},Jn="identity",Qn="consent",Gn="cluster",Xn=function(e){var n=e.orgId,t=Vn(n,Jn);return function(){return Boolean(Re.get(t))}},Wn=function(e,n,t){return{getItem:function(r){try{return e[n].getItem(t+r)}catch(e){return null}},setItem:function(r,o){try{return e[n].setItem(t+r,o),!0}catch(e){return!1}},clear:function(){try{return Object.keys(e[n]).forEach((function(r){cn(r,t)&&e[n].removeItem(r)})),!0}catch(e){return!1}}}},Yn=function(e){return function(n){var t=Ln+n;return{session:Wn(e,"sessionStorage",t),persistent:Wn(e,"localStorage",t)}}},$n=function(e,n){return e.filter((function(e){return Ce(n,e)}))},Kn=function(e){return"boolean"==typeof e},Zn=function(e){return"number"==typeof e&&!isNaN(e)},et=function(e){var n=parseInt(e,10);return Zn(n)&&e===n},nt=function(e,n){return 0===n.indexOf("".concat(Fn,"_").concat(Hn(e),"_"))},tt=function(e){return"string"==typeof e},rt=function(e){return tt(e)&&e.length>0},ot=function(e,n){var t=new Map;return function(){var r=n?n.apply(void 0,arguments):arguments.length<=0?void 0:arguments[0];if(t.has(r))return t.get(r);var o=e.apply(void 0,arguments);return t.set(r,o),o}},it=function(){},at=function(e,n,t){var r=String(e),o=String(t);if(r.length>=n||0===o.length)return r;for(var i=n-r.length;i>o.length;)o+=o;return o.slice(0,i)+r},ct=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t.parser[n.strictMode?"strict":"loose"].exec(e),o={},i=14;i--;)o[t.key[i]]=r[i]||"";return o[t.q.name]={},o[t.key[12]].replace(t.q.parser,(function(e,n,r){n&&(o[t.q.name][n]=r)})),o}},ut=function(e){var n={},t=e.split(".");switch(t.length){case 1:n.subdomain="",n.domain=e,n.topLevelDomain="";break;case 2:n.subdomain="",n.domain=e,n.topLevelDomain=t[1];break;case 3:n.subdomain="www"===t[0]?"":t[0],n.domain=e,n.topLevelDomain=t[2];break;case 4:n.subdomain="www"===t[0]?"":t[0],n.domain=e,n.topLevelDomain="".concat(t[2],".").concat(t[3])}return n},st=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ut;tt(e)||(e="");var t=ct(e)||{},r=t.host,o=void 0===r?"":r,i=t.path,a=void 0===i?"":i,c=t.query,u=void 0===c?"":c,s=t.anchor;return p({path:a,query:u,fragment:void 0===s?"":s},n(o))},dt=function(e){if(Oe(e)||"object"!==w(e))return null;var n=qn(e,(function(e){return!(Oe(e)||!Kn(e)&&!Zn(e)&&!rt(e)&&!tn(e))}));return Mn(n)?null:n},lt=function(e){return e instanceof Error?e:new Error(e)},ft=function(e){var n=e.error,t=e.message;try{n.message=t}catch(e){}},pt=function(e){var n=e.error,t=e.message,r=lt(n),o="".concat(t,"\nCaused by: ").concat(r.message);return ft({error:r,message:o}),r},gt=function(e){return tt(e)&&"true"===e.toLowerCase()},mt=function(e,n){if(Zn(e)||tt(e)){var t=Math.round(Number(e));if(!isNaN(t))return t}return n},vt=function(e){var n=e.getFullYear(),t=at(e.getMonth()+1,2,"0"),r=at(e.getDate(),2,"0"),o=at(e.getHours(),2,"0"),i=at(e.getMinutes(),2,"0"),a=at(e.getSeconds(),2,"0"),c=at(e.getMilliseconds(),3,"0"),u=mt(e.getTimezoneOffset(),0),s=u>0?"-":"+",d=at(Math.floor(Math.abs(u)/60),2,"0"),l=at(Math.abs(u)%60,2,"0");return"".concat(n,"-").concat(t,"-").concat(r,"T").concat(o,":").concat(i,":").concat(a,".").concat(c).concat(s).concat(d,":").concat(l)},yt=C((function(e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var t=new Uint8Array(16);e.exports=function(){return n(t),t}}else{var r=new Array(16);e.exports=function(){for(var e,n=0;n<16;n++)3&n||(e=4294967296*Math.random()),r[n]=e>>>((3&n)<<3)&255;return r}}})),ht=[],bt=0;bt<256;++bt)ht[bt]=(bt+256).toString(16).substr(1);var Et=I,wt=S,Ct=function(e){return function(n,t){return null==n?n:e.call(this,n,t)}},It=function(e,n){return function(t,r){return n.call(this,e.call(this,t,r),r)}},St=function(e,n){return function(t,r){var o=this,i=[],a=[e,n].reduce((function(e,n){try{return n.call(o,e,r)}catch(n){return i.push(n),e}}),t);if(i.length)throw new Error(i.join("\n"));return a}},Ot=function(e,n,t){return(0,fe.default)(It(e,n),e,t)},kt=function(e,n,t){return(0,fe.default)(It(e,Ct(n)),e,t)},Pt=function(e,n,t){return(0,fe.default)(St(Ct(n),e),e,t)},Dt=function(e,n,t,r){if(!e)throw new Error("'".concat(t,"': Expected ").concat(r,", but got ").concat(JSON.stringify(n),"."))},Tt=function(e,n){return Dt(Kn(e),e,n,"true or false"),e},Rt=function(e,n){return Dt(nn(e),e,n,"a function"),e},At=function(e){return function(n,t){var r=this;Dt(Array.isArray(n),n,t,"an array");var o=[],i=n.map((function(i,a){try{return e.call(r,i,"".concat(t,"[").concat(a,"]"),n)}catch(e){return void o.push(e.message)}}));if(o.length)throw new Error(o.join("\n"));return i}},Nt=function(e){return function(n){return null==n?e:n}},xt=function(e,n,t){return function(r,i){Dt(ke(r),r,i,"an object");var c=r[e],u=r[t],s=o(r,[e,t].map(a)),d=n(c,i);if(void 0!==d){var l="The field '".concat(e,"' is deprecated. Use '").concat(t,"' instead.");if(i&&(l="'".concat(i,"': ").concat(l)),void 0!==u&&u!==d)throw new Error(l);this&&this.logger&&this.logger.warn(l)}return p(g({},t,u||d),s)}},Mt=function(e){return function(n,t){return Dt(n===e,n,t,"".concat(e)),n}},qt=function(e){return function(n,t){var r=this;Dt(ke(n),n,t,"an object");var o=[],i={};if(Object.keys(n).forEach((function(a){var c=n[a],u=t?"".concat(t,".").concat(a):a;try{var s=e.call(r,c,u);void 0!==s&&(i[a]=s)}catch(e){o.push(e.message)}})),o.length)throw new Error(o.join("\n"));return i}},jt=function(e,n){return function(t,r){return Dt(t>=n,t,r,"".concat(e," greater than or equal to ").concat(n)),t}},Lt=function(e,n){return function(t,r){return Dt(t<=n,t,r,"".concat(e," less than or equal to ").concat(n)),t}},_t=function(e){return function(n,t){var r=[];if(Object.keys(n).forEach((function(n){if(!e[n]){var o=t?"".concat(t,".").concat(n):n;r.push("'".concat(o,"': Unknown field."))}})),r.length)throw new Error(r.join("\n"));return n}},Ut=function(e){return function(n,t){return ke(n)?Dt(!Mn(n),n,t,e):Dt(n.length>0,n,t,e),n}},Bt=function(e){return function(n,t){var r=this;Dt(ke(n),n,t,"an object");var o=[],i={};if(Object.keys(e).forEach((function(a){var c=n[a],u=e[a],s=t?"".concat(t,".").concat(a):a;try{var d=u.call(r,c,s);void 0!==d&&(i[a]=d)}catch(e){o.push(e.message)}})),Object.keys(n).forEach((function(e){Object.prototype.hasOwnProperty.call(i,e)||(i[e]=n[e])})),o.length)throw new Error(o.join("\n"));return i}},Ft=function(e,n){return function(t,r){var o,i=this,a=Ve(e,(function(e){try{return o=e.call(i,t,r),!0}catch(e){return!1}}));return Dt(a,t,r,n),o}},Ht=function(){var e=[];return function(n,t){return Dt(-1===e.indexOf(n),n,t,"a unique value across instances"),e.push(n),n}},Vt=function(e){for(var n=Object.create(null),t=0;t<e.length;t+=1){var r=e[t];if(r in n)return!1;n[r]=!0}return!0},zt=function(){return function(e,n){Dt(Vt(e),e,n,"array values to be unique")}},Jt=/^[a-z0-9.-]{1,}$/i,Qt=function(e,n){return Dt(Jt.test(e),e,n,"a valid domain"),e},Gt=function(e,n){return Dt(et(e),e,n,"an integer"),e},Xt=function(e,n){return Dt(Zn(e),e,n,"a number"),e},Wt=function(e){try{return null!==new RegExp(e)}catch(e){return!1}},Yt=function(e,n){return Dt(Wt(e),e,n,"a regular expression"),e},$t=function(e,n){if(null==e)throw new Error("'".concat(n,"' is a required option"));return e},Kt=function(e,n){return Dt(tt(e),e,n,"a string"),e},Zt=function(e){return e};Zt.default=function(e){return Ot(this,Nt(e))},Zt.required=function(){return Ot(this,$t)};var er=function(){return kt(this,Qt)},nr=function(e){return kt(this,jt("an integer",e))},tr=function(e){return kt(this,jt("a number",e))},rr=function(e){return kt(this,Lt("a number",e))},or=function(){return kt(this,Gt,{minimum:nr})},ir=function(){return kt(this,Ut("a non-empty string"))},ar=function(){return kt(this,Ut("a non-empty array"))},cr=function(){return kt(this,Ut("a non-empty object"))},ur=function(){return kt(this,Yt)},sr=function(){return kt(this,Ht())},dr=function(){return kt(this,zt())},lr=function(){return this},fr=function(e){return kt(this,At(e),{nonEmpty:ar,uniqueItems:dr})},pr=function(){return kt(this,Tt)},gr=function(){return kt(this,Rt)},mr=function(e){return kt(this,Mt(e))},vr=function(){return kt(this,Xt,{minimum:tr,maximum:rr,integer:or,unique:sr})},yr=function(e){return kt(this,qt(e),{nonEmpty:cr})},hr=function e(n){return{noUnknownFields:function(){return kt(this,_t(n))},nonEmpty:cr,concat:function(t){var r=p(p({},n),t.schema);return kt(this,t,e(r))},deprecated:function(e,n,t){return Pt(this,xt(e,n,t))},schema:n}},br=function(e){return kt(this,Bt(e),hr(e))},Er=function(){return kt(this,Kt,{regexp:ur,domain:er,nonEmpty:ir,unique:sr})},wr=function(e,n){return Ot(this,Ft(e,n))}.bind(Zt),Cr=lr.bind(Zt),Ir=fr.bind(Zt),Sr=pr.bind(Zt),Or=gr.bind(Zt),kr=mr.bind(Zt),Pr=vr.bind(Zt),Dr=yr.bind(Zt),Tr=br.bind(Zt),Rr=Er.bind(Zt),Ar=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return wr(n.map(kr),"one of these values: [".concat(JSON.stringify(n),"]"))},Nr=Dr(Ir(Tr({authenticatedState:Ar("ambiguous","authenticated","loggedOut"),id:Rr(),namespace:Tr({code:Rr()}).noUnknownFields(),primary:Sr(),xid:Rr()}).noUnknownFields()).required()),xr=Tr({}),Mr=function(e){return Object.keys(e).map((function(n){return e[n]}))},qr="alloy_debug",jr=function(e){var n=e.console,t=e.locationSearch,r=e.createLogger,o=e.instanceName,i=e.createNamespacedStorage,a=e.getMonitors,c=pe.default.parse(t),u=i("instance.".concat(o,".")),s=u.session.getItem("debug"),d="true"===s,l=null===s,f=function(){return d},p=function(e,n){var t=n.fromConfig;t&&!l||(d=e),t||(u.session.setItem("debug",e.toString()),l=!1)};return void 0!==c[qr]&&p(gt(c[qr]),{fromConfig:!1}),{setDebugEnabled:p,logger:r({getDebugEnabled:f,context:{instanceName:o},getMonitors:a,console:n}),createComponentLogger:function(e){return r({getDebugEnabled:f,context:{instanceName:o,componentName:e},getMonitors:a,console:n})}}},Lr=["onComponentsRegistered","onBeforeEvent","onBeforeRequest","onResponse","onRequestFailure","onClick","onDecision"],_r=function(e,n){return function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Promise.all(e.getLifecycleCallbacks(n).map((function(e){return new Promise((function(n){n(e.apply(void 0,r))}))})))}},Ur=function(e){return function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return Promise.resolve().then((function(){return e.apply(void 0,t)}))}},Br=function(e){return Lr.reduce((function(n,t){return n[t]=Ur(_r(e,t)),n}),{})},Fr=function(e,n){return function(){var t;try{t=e.apply(void 0,arguments)}catch(e){throw pt({error:e,message:n})}return t instanceof Promise&&(t=t.catch((function(e){throw pt({error:e,message:n})}))),t}},Hr=function(){var e={},n={},t=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=$n(Object.keys(e),Object.keys(t));if(r.length)throw new Error("[ComponentRegistry] Could not register ".concat(n," ")+"because it has existing command(s): ".concat(r.join(",")));Object.keys(t).forEach((function(r){var o=t[r];o.commandName=r,o.run=Fr(o.run,"[".concat(n,"] An error occurred while executing the ").concat(r," command.")),e[r]=o}))},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(r){n[r]=n[r]||[],n[r].push(Fr(t[r],"[".concat(e,"] An error occurred while executing the ").concat(r," lifecycle hook.")))}))};return{register:function(e,n){var o=n.commands,i=n.lifecycle;t(e,o),r(e,i)},getCommand:function(n){return e[n]},getCommandNames:function(){return Object.keys(e)},getLifecycleCallbacks:function(e){return n[e]||[]}}},Vr=function(e){var n=e.logger,t=e.sendFetchRequest,r=e.sendBeaconRequest,o=e.isRequestRetryable,i=e.getRequestRetryDelay;return function(e){var a=e.requestId,c=e.url,u=e.payload,s=e.useSendBeacon,d=JSON.stringify(u),l=JSON.parse(d);n.logOnBeforeNetworkRequest({url:c,requestId:a,payload:l});var f=function e(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(s?r:t)(c,d).then((function(t){var r;if(o({response:t,retriesAttempted:u})){var s=i({response:t,retriesAttempted:u});return new Promise((function(n){setTimeout((function(){n(e(u+1))}),s)}))}try{r=JSON.parse(t.body)}catch(e){}return n.logOnNetworkResponse(p(p({requestId:a,url:c,payload:l},t),{},{parsedBody:r,retriesAttempted:u})),{statusCode:t.statusCode,body:t.body,parsedBody:r,getHeader:t.getHeader}}))};return f().catch((function(e){throw n.logOnNetworkError({requestId:a,url:c,payload:l,error:e}),pt({error:e,message:"Network request failed."})}))}},zr=function(e){var n=e.logger;return function(e){if(e){var t=e.split(";");if(t.length>=2&&t[1].length>0)try{var r=parseInt(t[1],10);if(!isNaN(r))return{regionId:r}}catch(e){}n.warn('Invalid adobe edge: "'.concat(e,'"'))}return{}}},Jr="in",Qr="out",Gr="pending",Xr="general",Wr="declinedConsent",Yr="default",$r="initial",Kr="new",Zr=function(e){var n=new Error(e);return n.code=Wr,n.message=e,n},eo=function(e){var n=e.logger,t=[],r=function(){for(;t.length;)t.shift().resolve()},o=function(){for(;t.length;)t.shift().reject(Zr("The user declined consent."))},i=function(){return Promise.resolve()},a=function(){return Promise.resolve()},c=function(){return Promise.reject(Zr("No consent preferences have been set."))},u=function(){return Promise.reject(Zr("The user declined consent."))},s=function(e){if(e)return Promise.reject(new Error("Consent is pending."));var n=_e();return t.push(n),n.promise};return{in:function(e){e===Yr?this.awaitConsent=i:(e===$r?n.info("Loaded user consent preferences. The user previously consented."):e===Kr&&this.awaitConsent!==a&&n.info("User consented."),r(),this.awaitConsent=a)},out:function(e){e===Yr?(n.warn("User consent preferences not found. Default consent of out will be used."),this.awaitConsent=c):(e===$r?n.warn("Loaded user consent preferences. The user previously declined consent."):e===Kr&&this.awaitConsent!==u&&n.warn("User declined consent."),o(),this.awaitConsent=u)},pending:function(e){e===Yr&&n.info("User consent preferences not found. Default consent of pending will be used. Some commands may be delayed."),this.awaitConsent=s},awaitConsent:function(){return Promise.reject(new Error("Consent has not been initialized."))},withConsent:function(){return this.awaitConsent(!0)}}},no=function(e){var n=e.generalConsentState,t=e.logger,r=function(e,r){switch(e[Xr]){case Jr:n.in(r);break;case Qr:n.out(r);break;case Gr:n.pending(r);break;default:t.warn("Unknown consent value: ".concat(e[Xr]))}};return{initializeConsent:function(e,n){n[Xr]?r(n,$r):r(e,Yr)},setConsent:function(e){r(e,Kr)},suspend:function(){n.pending()},awaitConsent:function(){return n.awaitConsent()},withConsent:function(){return n.withConsent()}}},to=function(e){return e&&e._experience&&e._experience.decisioning&&tn(e._experience.decisioning.propositions)?e._experience.decisioning.propositions:[]},ro=function(){var e,n,t={},r=!1,o=!1,i=!0,a=function(e){if(o)throw new Error("".concat(e," cannot be called after event is finalized."))},c={hasQuery:function(){return Object.prototype.hasOwnProperty.call(this.getContent(),"query")},getContent:function(){var r=JSON.parse(JSON.stringify(t));return e&&Ne(r,{xdm:e}),n&&Ne(r,{data:n}),r},setUserXdm:function(n){a("setUserXdm"),e=n},setUserData:function(e){a("setUserData"),n=e},mergeXdm:function(e){a("mergeXdm"),e&&Ne(t,{xdm:e})},mergeData:function(e){a("mergeData"),e&&Ne(t,{data:e})},mergeMeta:function(e){a("mergeMeta"),e&&Ne(t,{meta:e})},mergeQuery:function(e){a("mergeQuery"),e&&Ne(t,{query:e})},documentMayUnload:function(){r=!0},finalize:function(r){if(!o){var a=Fe([].concat(m(to(e)),m(to(t.xdm))),(function(e,n){return e===n||e.id&&n.id&&e.id===n.id&&e.scope&&n.scope&&e.scope===n.scope}));if(e&&this.mergeXdm(e),a.length>0&&(t.xdm._experience.decisioning.propositions=a),n&&c.mergeData(n),o=!0,r){i=!1;var u={xdm:t.xdm||{},data:t.data||{}},s=r(u);i=!1!==s,t.xdm=u.xdm||{},t.data=u.data||{},Mn(t.xdm)&&delete t.xdm,Mn(t.data)&&delete t.data}}},getDocumentMayUnload:function(){return r},isEmpty:function(){return Mn(t)&&(!e||Mn(e))&&(!n||Mn(n))},shouldSend:function(){return i},getViewName:function(){if(e&&e.web&&e.web.webPageDetails)return e.web.webPageDetails.viewName},toJSON:function(){if(!o)throw new Error("toJSON called before finalize");return t}};return c},oo="Retry-After",io="x-adobe-edge",ao=function(e){var n=e.extractEdgeInfo;return function(e){var t=e.content,r=void 0===t?{}:t,o=e.getHeader,i=r.handle,a=void 0===i?[]:i,c=r.errors,u=void 0===c?[]:c,s=r.warnings,d=void 0===s?[]:s;return{getPayloadsByType:function(e){return jn(a.filter((function(n){return n.type===e})),(function(e){return e.payload}))},getErrors:function(){return u},getWarnings:function(){return d},getEdge:function(){return n(o(io))},toJSON:function(){return r}}}},co="configure",uo="setDebug",so=function(e){var n,t=e.logger,r=e.configureCommand,o=e.setDebugCommand,i=e.handleError,a=e.validateCommandOptions,c=function(e,i){var c;if(e===co){if(n)throw new Error("The library has already been configured and may only be configured once.");c=function(){return(n=r(i)).then((function(){}))}}else{if(!n)throw new Error("The library must be configured first. Please do so by executing the configure command.");c=e===uo?function(){return o(i)}:function(){return n.then((function(n){var t=n.getCommand(e);if(!t||!nn(t.run)){var r=[co,uo].concat(n.getCommandNames()).join(", ");throw new Error("The ".concat(e," command does not exist. List of available commands: ").concat(r,"."))}var o=a({command:t,options:i});return t.run(o)}),(function(){return t.warn("An error during configuration is preventing the ".concat(e," command from executing.")),new Promise((function(){}))}))}}return c};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r){var o=c(e,n);t.logOnBeforeCommand({commandName:e,options:n}),r(o())})).catch((function(n){return i(n,"".concat(e," command"))})).catch((function(r){throw t.logOnCommandRejected({commandName:e,options:n,error:r}),r})).then((function(r){var o=ke(r)?r:{};return t.logOnCommandResolved({commandName:e,options:n,result:o}),o}))}},lo="https://adobe.ly/3sHgQHb",fo=function(e){var n=e.command,t=e.options,r=n.commandName,o=n.documentationUri,i=void 0===o?lo:o,a=n.optionsValidator,c=t;if(a)try{c=a(t)}catch(e){var u="Invalid ".concat(r," command options:\n\t - ").concat(e," For command documentation see: ").concat(i);throw new Error(u)}return c},po=function(e){var n=e.options;return Tr({type:Rr(),xdm:Tr({eventType:Rr(),identityMap:Nr}),data:Tr({}),documentUnloading:Sr(),renderDecisions:Sr(),decisionScopes:Ir(Rr()).uniqueItems(),personalization:Tr({decisionScopes:Ir(Rr()).uniqueItems(),surfaces:Ir(Rr()).uniqueItems(),sendDisplayEvent:Sr().default(!0),includeRenderedPropositions:Sr().default(!1),defaultPersonalizationEnabled:Sr(),decisionContext:Tr({})}).default({sendDisplayEvent:!0}),datasetId:Rr(),mergeId:Rr(),edgeConfigOverrides:xr,initializePersonalization:Sr()}).required().noUnknownFields()(n)},go=function(e){var n=e.options;return Tr({renderDecisions:Sr(),responseHeaders:Dr(Rr().required()),responseBody:Tr({handle:Ir(Tr({type:Rr().required(),payload:Cr().required()})).required()}).required(),personalization:Tr({sendDisplayEvent:Sr().default(!0),decisionContext:Tr({})}).default({sendDisplayEvent:!0})}).noUnknownFields()(n)},mo=function(e){var n=e.eventManager,t=e.logger;return{commands:{sendEvent:{documentationUri:"https://adobe.ly/3GQ3Q7t",optionsValidator:function(e){return po({options:e})},run:function(e){var r=e.xdm,i=e.data,a=e.documentUnloading,c=e.type,u=e.mergeId,s=e.datasetId,d=e.edgeConfigOverrides,l=o(e,["xdm","data","documentUnloading","type","mergeId","datasetId","edgeConfigOverrides"]),f=n.createEvent();return a&&f.documentMayUnload(),f.setUserXdm(r),f.setUserData(i),
c&&f.mergeXdm({eventType:c}),u&&f.mergeXdm({eventMergeId:u}),d&&(l.edgeConfigOverrides=d),s&&(t.warn("The 'datasetId' option has been deprecated. Please use 'edgeConfigOverrides.com_adobe_experience_platform.datasets.event.datasetId' instead."),l.edgeConfigOverrides=d||{},Ne(l.edgeConfigOverrides,{com_adobe_experience_platform:{datasets:{event:{datasetId:s}}}})),n.sendEvent(f,l)}},applyResponse:{documentationUri:"",optionsValidator:function(e){return go({options:e})},run:function(e){var t=e.renderDecisions,r=void 0!==t&&t,o=e.decisionContext,i=void 0===o?{}:o,a=e.responseHeaders,c=void 0===a?{}:a,u=e.responseBody,s=void 0===u?{handle:[]}:u,d=e.personalization,l=n.createEvent();return n.applyResponse(l,{renderDecisions:r,decisionContext:i,responseHeaders:c,responseBody:s,personalization:d})}}}}};mo.namespace="DataCollector";var vo=function(e){var n=e.eventManager,t=e.lifecycle,r=e.handleError;return function(e){var o=e.target,i=n.createEvent();return i.documentMayUnload(),t.onClick({event:i,clickedElement:o}).then((function(){return i.isEmpty()?Promise.resolve():n.sendEvent(i)})).then(it).catch((function(e){r(e,"click collection")}))}},yo=function(e){var n=e.eventManager,t=e.lifecycle,r=e.handleError,o=vo({eventManager:n,lifecycle:t,handleError:r});document.addEventListener("click",o,!0)},ho=Rr().regexp().default("\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx)$"),bo=Tr({clickCollectionEnabled:Sr().default(!0),onBeforeLinkClickSend:Or(),downloadLinkQualifier:ho}),Eo=function(e){var n=e.getLinkDetails,t=e.config,r=e.logger;return t.clickCollectionEnabled?function(e){var o=e.targetElement,i=e.event,a=n({targetElement:o,config:t,logger:r});a&&(i.mergeXdm(a.xdm),i.setUserData(a.data))}:function(){}},wo=function(e){var n=e.window,t=e.getLinkName,r=e.getLinkRegion,o=e.getAbsoluteUrlFromAnchorElement,i=e.findSupportedAnchorElement,a=e.determineLinkType;return function(e){var c=e.targetElement,u=e.config,s=e.logger,d=i(c);if(d){var l=o(n,d);if(l){var f=a(n,u,l,d),p=r(d),g=t(d),m=u.onBeforeLinkClickSend,v={xdm:{eventType:"web.webinteraction.linkClicks",web:{webInteraction:{name:g,region:p,type:f,URL:l,linkClicks:{value:1}}}},data:{},clickedElement:c};if(!m)return v;if(!1!==m(v))return v;s.info("This link click event is not triggered because it was canceled in onBeforeLinkClickSend.")}else s.info("This link click event is not triggered because the HTML element doesn't have an URL.")}else s.info("This link click event is not triggered because the HTML element is not an anchor.")}},Co=function(e){return e&&/^[a-z0-9]+:\/\//i.test(e)},Io=function(e){return!(!e.href||"A"!==e.tagName&&"AREA"!==e.tagName||e.onclick&&e.protocol&&!(e.protocol.toLowerCase().indexOf("javascript")<0))},So=function(e){var n=e.indexOf("?"),t=e.indexOf("#");return n>=0&&(n<t||t<0)?e.substring(0,n):t>=0?e.substring(0,t):e},Oo=function(e,n,t){var r=new RegExp(e),o=So(n).toLowerCase();return!!t.download||r.test(o)},ko=function(e,n){var t=e.location.hostname.toLowerCase();return!(So(n).toLowerCase().indexOf(t)>=0)},Po=function(e){return e&&e.replace(/\s+/g," ").trim()},Do=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i,To=function(e){return!(e&&e.nodeName&&e.nodeName.match(Do))},Ro=function e(n){var t=[],r=!1;return To(n)?(t.push(n),n.childNodes&&Array.prototype.slice.call(n.childNodes).forEach((function(n){var o=e(n);t=t.concat(o.supportedNodes),r=r||o.includesUnsupportedNodes}))):r=!0,{supportedNodes:t,includesUnsupportedNodes:r}},Ao=function(e,n,t){var r;return t&&t!==e.nodeName.toUpperCase()||(r=e.getAttribute(n)),r},No=function(e){var n={texts:[]};return e.supportedNodes.forEach((function(e){e.getAttribute&&(n.alt||(n.alt=Po(e.getAttribute("alt"))),n.title||(n.title=Po(e.getAttribute("title"))),n.inputValue||(n.inputValue=Po(Ao(e,"value","INPUT"))),n.imgSrc||(n.imgSrc=Po(Ao(e,"src","IMG")))),e.nodeValue&&n.texts.push(e.nodeValue)})),n},xo=/^(HEADER|MAIN|FOOTER|NAV)$/i,Mo=function(e){var n;return"region"===e.role&&rt(e["aria-label"])&&(n=e["aria-label"]),n},qo=function(e){var n;return e&&e.nodeName&&e.nodeName.match(xo)&&(n=e.nodeName),n},jo=wo({window:window,getLinkName:function(e){var n=Po(e.innerText||e.textContent),t=Ro(e);if(!n||t.includesUnsupportedNodes){var r=No(t);(n=Po(r.texts.join("")))||(n=r.alt||r.title||r.inputValue||r.imgSrc)}return n||""},getLinkRegion:function(e){for(var n,t=e.parentNode;t;){if(n=Po(t.id||Mo(t)||qo(t)))return n;t=t.parentNode}return"BODY"},getAbsoluteUrlFromAnchorElement:function(e,n){var t=e.location,r=n.href?n.href:"",o=n.protocol,i=n.host;if(!Co(r)){o||(o=t.protocol?t.protocol:""),o=o?"".concat(o,"//"):"",i||(i=t.host?t.host:"");var a="";if("/"!==r.substring(0,1)){var c=t.pathname.lastIndexOf("/");c=c<0?0:c,a=t.pathname.substring(0,c)}r="".concat(o).concat(i).concat(a,"/").concat(r)}return r},findSupportedAnchorElement:function(e){for(var n=e;n;){if(Io(n))return n;n=n.parentNode}return null},determineLinkType:function(e,n,t,r){var o="other";return Oo(n.downloadLinkQualifier,t,r)?o="download":ko(e,t)&&(o="exit"),o}}),Lo=function(e){var n=e.config,t=e.eventManager,r=e.handleError,o=e.logger,i=Eo({getLinkDetails:jo,config:n,logger:o});return{lifecycle:{onComponentsRegistered:function(e){var n=e.lifecycle;yo({eventManager:t,lifecycle:n,handleError:r})},onClick:function(e){var n=e.event,t=e.clickedElement;i({targetElement:t,event:n})}}}};Lo.namespace="ActivityCollector",Lo.configValidators=bo,Lo.buildOnInstanceConfiguredExtraParams=function(e){var n=e.config,t=e.logger;return{getLinkDetails:function(e){return jo({targetElement:e,config:n,logger:t})}}};var _o=function(e,n){return"ID sync ".concat(n?"succeeded":"failed",": ").concat(e.spec.url)},Uo=function(e){var n=e.fireReferrerHideableImage,t=e.logger;return function(e){var r=e.filter((function(e){return"url"===e.type}));return r.length?Promise.all(r.map((function(e){return n(e.spec).then((function(){t.info(_o(e,!0))})).catch((function(){t.error(_o(e,!1))}))}))).then(it):Promise.resolve()}},Bo=Tr({thirdPartyCookiesEnabled:Sr().default(!0),idMigrationEnabled:Sr().default(!0)}),Fo=Tr({namespaces:Ir(kr("ECID")).nonEmpty().uniqueItems().default(["ECID"]),edgeConfigOverrides:xr}).noUnknownFields().default({namespaces:["ECID"]}),Ho=Tr({url:Rr().required().nonEmpty(),edgeConfigOverrides:xr}).required().noUnknownFields(),Vo=function(e){var n,t=e.addEcidQueryToPayload,r=e.addQueryStringIdentityToPayload,o=e.ensureSingleIdentity,i=e.setLegacyEcid,a=e.handleResponseForIdSyncs,c=e.getEcidFromResponse,u=e.getIdentity,s=e.consent,d=e.appendIdentityToUrl,l=e.logger,f={};return{lifecycle:{onBeforeRequest:function(e){var n=e.request,i=e.onResponse,a=e.onRequestFailure;return t(n.getPayload()),r(n.getPayload()),o({request:n,onResponse:i,onRequestFailure:a})},onResponse:function(e){var t=e.response;return n||(n=c(t))&&i(n),f=(0,fe.default)(f,t.getEdge()),a(t)}},commands:{getIdentity:{optionsValidator:Fo,run:function(e){return s.awaitConsent().then((function(){return n?void 0:u(e)})).then((function(){return{identity:{ECID:n},edge:f}}))}},appendIdentityToUrl:{optionsValidator:Ho,run:function(e){return s.withConsent().then((function(){return n?void 0:u(e)})).then((function(){return{url:d(n,e.url)}})).catch((function(n){return l.warn("Unable to append identity to url. ".concat(n.message)),e}))}}}}},zo=function(e){var n=e.config,t=e.getEcidFromVisitor,r=e.apexDomain,o=e.isPageSsl,i=e.cookieJar,a=n.idMigrationEnabled,c=n.orgId,u="AMCV_".concat(c),s=function(){var e=null,n="s_ecid",t=i.get(n)||i.get(u);if(t){var r=/(^|\|)MCMID\|(\d+)($|\|)/,o=t.match(r);o&&(e=o[2])}return e};return{getEcid:function(){if(a){var e=s();return e?Promise.resolve(e):t()}return Promise.resolve()},setEcid:function(e){if(a&&s()!==e){var n=o?{sameSite:"none",secure:!0}:{};i.set(u,"MCMID|".concat(e),p({domain:r,expires:390},n))}}}},Jo=function(e){var n=e.logger;return new Promise((function(e,t){if(ke(window.adobe)&&ke(window.adobe.optIn)){var r=window.adobe.optIn;n.info("Delaying request while waiting for legacy opt-in to let Visitor retrieve ECID from server."),r.fetchPermissions((function(){r.isApproved([r.Categories.ECID])?(n.info("Received legacy opt-in approval to let Visitor retrieve ECID from server."),e()):t(new Error("Legacy opt-in was declined."))}),!0)}else e()}))},Qo=function(e){var n=e.Visitor;return nn(n)&&nn(n.getInstance)&&n},Go=function(e){var n=e.logger,t=e.orgId,r=e.awaitVisitorOptIn;return function(){var e=Qo(window);return e?r({logger:n}).then((function(){return n.info("Delaying request while using Visitor to retrieve ECID from server."),new Promise((function(r){e.getInstance(t,{}).getMarketingCloudVisitorID((function(e){n.info("Resuming previously delayed request that was waiting for ECID from Visitor."),r(e)}),!0)}))})).catch((function(e){e?n.info("".concat(e.message,", retrieving ECID from experience edge")):n.info("An error occurred while obtaining the ECID from Visitor.")})):Promise.resolve()}},Xo=function(e){var n=e.processIdSyncs;return function(e){return n(e.getPayloadsByType("identity:exchange"))}},Wo=function(e){var n,t=e.doesIdentityCookieExist,r=e.setDomainForInitialIdentityPayload,o=e.addLegacyEcidToPayload,i=e.awaitIdentityCookie,a=e.logger,c=function(e){return r(e),o(e.getPayload())};return function(e){var r=e.request,o=e.onResponse,u=e.onRequestFailure;if(t())return r.setIsIdentityEstablished(),Promise.resolve();if(n){a.info("Delaying request while retrieving ECID from server.");var s=n;return n=s.catch((function(){return i({onResponse:o,onRequestFailure:u})})),s.then((function(){a.info("Resuming previously delayed request."),r.setIsIdentityEstablished()})).catch((function(){return c(r)}))}return n=i({onResponse:o,onRequestFailure:u}),c(r)}},Yo="ECID",$o=function(e){e.mergeQuery({identity:{fetch:[Yo]}})},Ko=function(e){return function(n){for(var t=Object.keys(e),r=0;r<t.length;r+=1){var o=t[r];if(e[o].test(n))return o}return we}},Zo=ot((function(e){var n;return Ko((g(n={},ve,/Edge\/([0-9\._]+)/),g(n,ye,/Edg\/([0-9\.]+)/),g(n,me,/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/),g(n,he,/Firefox\/([0-9\.]+)(?:\s|$)/),g(n,be,/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/),g(n,Ee,/Version\/([0-9\._]+).*Safari/),n))(e.navigator.userAgent)})),ei=function(e){var n=e.thirdPartyCookiesEnabled,t=e.areThirdPartyCookiesSupportedByDefault;return function(e){n&&t(Zo(window))&&e.setUseIdThirdPartyDomain()}},ni=function(e){var n=e.getLegacyEcid,t=e.addEcidToPayload;return function(e){return e.hasIdentity(Yo)?Promise.resolve():n().then((function(n){n&&t(e,n)}))}},ti="adobe_mc",ri=300,oi=function(e){var n=e.locationSearch,t=e.dateProvider,r=e.orgId,o=e.logger;return function(e){if(!e.hasIdentity(Yo)){var i=pe.default.parse(n)[ti];if(void 0!==i){var a=i.split("|").reduce((function(e,n){var t=u(n.split("="),2),r=t[0],o=t[1];return e[r]=o,e}),{}),c=parseInt(a.TS,10),s=a.MCMID,d=decodeURIComponent(a.MCORGID);t().getTime()/1e3<=c+ri&&d===r&&s?(o.info("Found valid ECID identity ".concat(s," from the adobe_mc query string parameter.")),e.addIdentity(Yo,{id:s})):o.info("Detected invalid or expired adobe_mc query string parameter.")}}}},ii=function(e,n){e.addIdentity(Yo,{id:n})},ai=function(e){var n=e.doesIdentityCookieExist,t=e.orgId;return function(e){var r=e.onResponse,o=e.onRequestFailure;return new Promise((function(e,i){r((function(){if(!n()){var r=new Error("An identity was not set properly. Please verify that the org ID ".concat(t," configured in Alloy matches the org ID specified in the edge configuration."));throw i(r),r}e()})),o((function(){n()?e():i(new Error("No identity was set on response."))}))}))}},ci=function(e){var n=e.getPayloadsByType("identity:result"),t=Ve(n,(function(e){return e.namespace&&e.namespace.code===Yo}));return t?t.id:void 0},ui=function(e){return function(n,t){e.xdm=e.xdm||{},e.xdm.identityMap=e.xdm.identityMap||{},e.xdm.identityMap[n]=e.xdm.identityMap[n]||[],e.xdm.identityMap[n].push(t)}},si=function(e){var n=e.payload,t=e.getAction,r=e.getUseSendBeacon,o=e.datastreamIdOverride,i=e.edgeSubPath,a=wt(),c=!1,u=!1;return{getId:function(){return a},getPayload:function(){return n},getAction:function(){return t({isIdentityEstablished:u})},getDatastreamIdOverride:function(){return o},getUseSendBeacon:function(){return r({isIdentityEstablished:u})},getEdgeSubPath:function(){return i||""},getUseIdThirdPartyDomain:function(){return c},setUseIdThirdPartyDomain:function(){c=!0},setIsIdentityEstablished:function(){u=!0}}},di=function(e){var n=e.payload,t=e.datastreamIdOverride,r=function(e){var t=e.isIdentityEstablished;return n.getDocumentMayUnload()&&t};return si({payload:n,getAction:function(e){var n=e.isIdentityEstablished;return r({isIdentityEstablished:n})?"collect":"interact"},getUseSendBeacon:r,datastreamIdOverride:t})},li=function(e){var n=e.content,t=e.addIdentity,r=e.hasIdentity,o=xe(n,"meta.configOverrides");return{mergeMeta:xe(n,"meta"),mergeState:xe(n,"meta.state"),mergeQuery:xe(n,"query"),mergeConfigOverride:function(e){return o(dt(e))},addIdentity:t,hasIdentity:r,toJSON:function(){return n}}},fi=function(e){return function(n){return void 0!==(e.xdm&&e.xdm.identityMap&&e.xdm.identityMap[n])}},pi=function(){var e={},n=li({content:e,addIdentity:ui(e),hasIdentity:fi(e)});return n.addEvent=function(n){e.events=e.events||[],e.events.push(n)},n.getDocumentMayUnload=function(){return(e.events||[]).some((function(e){return e.getDocumentMayUnload()}))},n},gi=function(e){var n=e.localConfigOverrides,t=e.globalConfigOverrides,r=e.payload,i={payload:r},a=n||{},c=a.datastreamId,u=o(a,["datastreamId"]);return c&&(i.datastreamIdOverride=c),r.mergeConfigOverride(t),r.mergeConfigOverride(u),i},mi="adb_validation_sessionid",vi="validation.",yi="clientId",hi=function(e){var n=e.persistent.getItem(yi);return n||(n=wt(),e.persistent.setItem(yi,n)),n},bi=function(e){var n=e.window,t=(0,e.createNamespacedStorage)(vi);return function(){var e=pe.default.parse(n.location.search)[mi];if(!e)return"";var r=hi(t),o="".concat(e,"|").concat(r);return"&".concat(pe.default.stringify({adobeAepValidationToken:o}))}},Ei=function(e){var n=e.sendEdgeNetworkRequest,t=e.createIdentityRequestPayload,r=e.createIdentityRequest,o=e.globalConfigOverrides;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.namespaces,a=e.edgeConfigOverrides,c=gi({payload:t(i),globalConfigOverrides:o,localConfigOverrides:a}),u=r(c);return n({request:u})}},wi=function(e){var n=e.payload,t=e.datastreamIdOverride;return si({payload:n,datastreamIdOverride:t,getAction:function(){return"identity/acquire"},getUseSendBeacon:function(){return!1}})},Ci=function(e){var n={query:{identity:{fetch:e}}};return li({content:n,addIdentity:ui(n),hasIdentity:fi(n)})},Ii=/^([^?#]*)(\??[^#]*)(#?.*)$/,Si=function(e){return""===e?"?":"?"===e?"":"&"},Oi=function(e){var n=e.dateProvider,t=e.orgId;return function(e,r){var o=Math.round(n().getTime()/1e3),i=encodeURIComponent("TS=".concat(o,"|MCMID=").concat(e,"|MCORGID=").concat(encodeURIComponent(t))),a=u(r.match(Ii),4),c=a[1],s=a[2],d=a[3],l=Si(s);return"".concat(c).concat(s).concat(l,"adobe_mc=").concat(i).concat(d)}},ki=function(e){var n=e.config,t=e.logger,r=e.consent,o=e.fireReferrerHideableImage,i=e.sendEdgeNetworkRequest,a=e.apexDomain,c=n.orgId,u=n.thirdPartyCookiesEnabled,s=n.edgeConfigOverrides,d=Go({logger:t,orgId:c,awaitVisitorOptIn:Jo}),l=qe({logger:t,cookieJar:Re}),f=zo({config:n,getEcidFromVisitor:d,apexDomain:a,cookieJar:l,isPageSsl:"https:"===window.location.protocol}),p=Xn({orgId:c}),g=Ei({sendEdgeNetworkRequest:i,createIdentityRequestPayload:Ci,createIdentityRequest:wi,globalConfigOverrides:s}),m=ei({thirdPartyCookiesEnabled:u,areThirdPartyCookiesSupportedByDefault:Se}),v=ni({getLegacyEcid:f.getEcid,addEcidToPayload:ii}),y=oi({locationSearch:window.document.location.search,dateProvider:function(){return new Date},orgId:c,logger:t}),h=ai({doesIdentityCookieExist:p,orgId:c}),b=Wo({doesIdentityCookieExist:p,setDomainForInitialIdentityPayload:m,addLegacyEcidToPayload:v,awaitIdentityCookie:h,logger:t}),E=Uo({fireReferrerHideableImage:o,logger:t}),w=Xo({processIdSyncs:E}),C=Oi({dateProvider:function(){return new Date},orgId:c,globalConfigOverrides:s});return Vo({addEcidQueryToPayload:$o,addQueryStringIdentityToPayload:y,ensureSingleIdentity:b,setLegacyEcid:f.setEcid,handleResponseForIdSyncs:w,getEcidFromResponse:ci,getIdentity:g,consent:r,appendIdentityToUrl:C,logger:t,config:n})};ki.namespace="Identity",ki.configValidators=Bo;var Pi=function(e,n){return"URL destination ".concat(n?"succeeded":"failed",": ").concat(e.spec.url)},Di=function(e){var n=e.fireReferrerHideableImage,t=e.logger,r=e.cookieJar,o=e.isPageSsl?{sameSite:"none",secure:!0}:{},i=function(e){e.filter((function(e){return"cookie"===e.type})).forEach((function(e){var n=e.spec,t=n.name,i=n.value,a=n.domain,c=n.ttlDays;r.set(t,i||"",p({domain:a||"",expires:c||10},o))}))},a=function(e){var r=e.filter((function(e){return"url"===e.type}));return Promise.all(r.map((function(e){return n(e.spec).then((function(){t.info(Pi(e,!0))})).catch((function(){}))}))).then(it)};return function(e){return i(e),a(e)}},Ti=function(e){var n=e.processDestinations,t=function(e){var t=e.response.getPayloadsByType("activation:push");return n(t)},r=function(e){return{destinations:e.response.getPayloadsByType("activation:pull")}};return function(e){var n=e.response;return t({response:n}).then((function(){return r({response:n})}))}},Ri=function(e){var n=e.logger,t=e.fireReferrerHideableImage,r=Re.withConverter({write:function(e){return encodeURIComponent(e)}}),o=qe({logger:n,cookieJar:r}),i=Di({fireReferrerHideableImage:t,logger:n,cookieJar:o,isPageSsl:"https:"===window.location.protocol});return{lifecycle:{onResponse:Ti({processDestinations:i})},commands:{}}};Ri.namespace="Audiences";var Ai,Ni="web",xi="webapp",Mi="://",qi="#",ji=/^(\w+):\/\/([^/#]+)(\/[^#]*)?(#.*)?$/,Li=/^(?:.*@)?(?:[a-z\d\u00a1-\uffff.-]+|\[[a-f\d:]+])(?::\d+)?$/,_i=/^\/(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})*$/,Ui=/^#(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})+$/,Bi=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",n=e.length;n>0&&-1!=="/".indexOf(e.charAt(n-1));)n-=1;return e.substring(0,n)||"/"},Fi=function(e){return rt(e)?e.toLowerCase():""},Hi=function(e){return rt(e)?e.toLowerCase():""},Vi=function(e){return rt(e)?Bi(e):"/"},zi=function(e){var n=e.match(ji);return n?{surfaceType:Fi(n[1]),authority:Hi(n[2]),path:Vi(n[3]),fragment:n[4]}:null},Ji=function(e){return"".concat(e.surfaceType).concat(Mi).concat(e.authority).concat(e.path||"").concat(e.fragment||"")},Qi=function(e){var n=e(),t=n.host.toLowerCase(),r=n.pathname;return Ni+Mi+t+Bi(r)},Gi=function(e,n){return cn(e,qi)?Qi(n)+e:e},Xi=function(e,n,t){var r=function(e){return t.warn(e),null};if(!rt(e))return r("Invalid surface: ".concat(e));var o=Gi(e,n),i=zi(o);return null===i?r("Invalid surface: ".concat(e)):Ce([Ni,xi],i.surfaceType)?i.authority&&Li.test(i.authority)?i.path&&!_i.test(i.path)?r("Invalid path ".concat(i.path," in surface: ").concat(e)):i.fragment&&!Ui.test(i.fragment)?r("Invalid fragment ".concat(i.fragment," in surface: ").concat(e)):i:r("Invalid authority ".concat(i.authority," in surface: ").concat(e)):r("Unsupported surface type ".concat(i.surfaceType," in surface: ").concat(e))},Wi=function(e){return!!e&&0===e.indexOf(Ni+Mi)&&-1===e.indexOf(qi)},Yi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return e.map((function(e){return Xi(e,n,t)})).filter((function(e){return!Oe(e)})).map(Ji)},$i="__view__",Ki="https://ns.adobe.com/personalization/default-content-item",Zi="https://ns.adobe.com/personalization/dom-action",ea="https://ns.adobe.com/personalization/html-content-item",na="https://ns.adobe.com/personalization/json-content-item",ta="https://ns.adobe.com/personalization/ruleset-item",ra="https://ns.adobe.com/personalization/redirect-item",oa="https://ns.adobe.com/personalization/message/in-app",ia="https://ns.adobe.com/personalization/message/feed-item",aa=function(e){Ce(e,$i)||e.push($i)},ca=function(e,n){var t=Qi(n);Ce(e,t)||e.push(t)},ua=function(e){return e.filter((function(n,t){return e.indexOf(n)===t}))},sa=function(e){var n=e.getPageLocation,t=e.renderDecisions,r=e.decisionScopes,o=e.personalization,i=e.event,a=e.isCacheInitialized,c=e.logger,u=i.getViewName();return{isRenderDecisions:function(){return t},isSendDisplayEvent:function(){return!!o.sendDisplayEvent},shouldIncludeRenderedPropositions:function(){return!!o.includeRenderedPropositions},getViewName:function(){return u},hasScopes:function(){return r.length>0||tn(o.decisionScopes)},hasSurfaces:function(){return tn(o.surfaces)},hasViewName:function(){return rt(u)},createQueryDetails:function(){var e=m(r);tn(o.decisionScopes)&&e.push.apply(e,m(o.decisionScopes));var t=Yi(o.surfaces,n,c);this.shouldRequestDefaultPersonalization()&&(aa(e),ca(t,n));var i=[Ki,ea,na,ra,ta,oa,ia];return Ce(e,$i)&&i.push(Zi),{schemas:i,decisionScopes:ua(e),surfaces:ua(t)}},isCacheInitialized:function(){return a},shouldFetchData:function(){return this.hasScopes()||this.hasSurfaces()||this.shouldRequestDefaultPersonalization()},shouldUseCachedData:function(){return this.hasViewName()&&!this.shouldFetchData()},shouldRequestDefaultPersonalization:function(){return o.defaultPersonalizationEnabled||!this.isCacheInitialized()&&!1!==o.defaultPersonalizationEnabled}}},da="Rendering is disabled for authoring mode.",la="decisioning.propositionDisplay",fa="decisioning.propositionInteract",pa="decisioning.propositionTrigger",ga="decisioning.propositionDismiss",ma=1,va={DISPLAY:"display",INTERACT:"interact",TRIGGER:"trigger",DISMISS:"dismiss"},ya=(g(se={},la,va.DISPLAY),g(se,fa,va.INTERACT),g(se,pa,va.TRIGGER),g(se,ga,va.DISMISS),se),ha=function(e){return ya[e]},ba={propositions:[]},Ea=function(e){var n=e.logger,t=e.options,r=Tr({propositions:Ir(Tr(Cr())),metadata:Tr(Cr()),viewName:Rr()}).required();try{return r(t)}catch(e){return n.warn("Invalid options for applyPropositions. No propositions will be applied.",e),ba}},wa=function(e){var n=e.getPageLocation,t=e.logger,r=e.fetchDataHandler,o=e.viewChangeHandler,i=e.onClickHandler,a=e.isAuthoringModeEnabled,c=e.mergeQuery,u=e.viewCache,s=e.showContainers,d=e.applyPropositions,l=e.setTargetMigration,f=e.mergeDecisionsMeta,p=e.renderedPropositions;return{lifecycle:{onDecision:e.onDecisionHandler,onBeforeRequest:function(e){var n=e.request;return l(n),Promise.resolve()},onBeforeEvent:function(e){var i=e.event,d=e.renderDecisions,l=e.decisionScopes,g=void 0===l?[]:l,m=e.personalization,v=void 0===m?{}:m,y=e.onResponse,h=void 0===y?it:y,b=e.onRequestFailure,E=void 0===b?it:b;if(h((function(){return{propositions:[]}})),E((function(){return s()})),a())return t.warn(da),c(i,{enabled:!1}),Promise.resolve();var w=sa({getPageLocation:n,renderDecisions:d,decisionScopes:g,personalization:v,event:i,isCacheInitialized:u.isInitialized(),logger:t}),C=[];if(w.shouldIncludeRenderedPropositions()&&C.push(p.clear()),w.shouldFetchData()){var I=u.createCacheUpdate(w.getViewName());E((function(){return I.cancel()})),r({cacheUpdate:I,personalizationDetails:w,event:i,onResponse:h})}else w.shouldUseCachedData()&&C.push(o({personalizationDetails:w,event:i,onResponse:h,onRequestFailure:E}));return Promise.all(C).then((function(e){var n=jn(e,(function(e){return e}));tn(n)&&f(i,n,[va.DISPLAY])}))},onClick:function(e){var n=e.event,t=e.clickedElement;i({event:n,clickedElement:t})}},commands:{applyPropositions:{optionsValidator:function(e){return Ea({logger:t,options:e})},run:d}}}},Ca=function(e){return Qe(Ye,{},{innerHTML:e})},Ia=C((function(e){var n,t;n=De,t=function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var n=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var n,t=String(e),r=t.length,o=-1,i="",a=t.charCodeAt(0);++o<r;)0!=(n=t.charCodeAt(o))?i+=n>=1&&n<=31||127==n||0==o&&n>=48&&n<=57||1==o&&n>=48&&n<=57&&45==a?"\\"+n.toString(16)+" ":0==o&&1==r&&45==n||!(n>=128||45==n||95==n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122)?"\\"+t.charAt(o):t.charAt(o):i+="\ufffd";return i};return e.CSS||(e.CSS={}),e.CSS.escape=n,n},e.exports=t(n)})),Sa=":eq(",Oa=/:eq\((\d+)\)/g,ka=function(e){return-1===e.indexOf(Sa)},Pa=function(e){return e.split(Oa).filter(rt)},Da=/(#|\.)(-?\w+)/g,Ta=function(e,n,t){return"".concat(n).concat(Ia(t))},Ra=function(e){return e.replace(Da,Ta)},Aa=function(e){for(var n=[],t=Ra(e.trim()),r=Pa(t),o=r.length,i=0;i<o;){var a=r[i],c=r[i+1];c?n.push({sel:a,eq:Number(c)}):n.push({sel:a}),i+=2}return n},Na=function(e){var n=document;if(ka(e))return pn(e,n);for(var t=Aa(e),r=t.length,o=[],i=n,a=0;a<r;){var c=t[a],s=c.sel,d=c.eq,l=pn(s,i),f=l.length;if(0===f)break;if(null!=d&&d>f-1)break;a<r-1&&(i=null==d?u(l,1)[0]:l[d]),a===r-1&&(o=null==d?l:[l[d]]),a+=1}return o},xa=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementById(e)},Ma=function(e,n,t){e.setAttribute(n,t)},qa=function(e,n){return e.getAttribute(n)},ja=function(e,n){e.removeAttribute(n)},La=function(e,n,t,r){var o;o=r?"".concat(n,":").concat(t," !").concat(r,";"):"".concat(n,":").concat(t,";"),e.style.cssText+=";".concat(o)},_a=function(e){return e.parentNode},Ua=function(e){return e.nextElementSibling},Ba=function(e,n){if(e){var t=_a(e);t&&t.insertBefore(n,Ua(e))}},Fa=function(e,n){if(e){var t=_a(e);t&&t.insertBefore(n,e)}},Ha=function(e){var n=e.children;return n?rn(n):[]},Va=function(e){var n=e.childNodes;return n?rn(n):[]},za=function(e){return e.firstElementChild},Ja=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(void 0===Ai){var n=e.querySelector("[nonce]");Ai=n&&(n.nonce||n.getAttribute("nonce"))}return Ai},Qa="alloy-prehiding",Ga="{ visibility: hidden }",Xa={},Wa=function(e){if(!Xa[e]){var n=Ja(),t=p({},n&&{nonce:n}),r={textContent:"".concat(e," ").concat(Ga)},o=Qe($e,t,r);ze(document.head,o),Xa[e]=o}},Ya=function(e){var n=Xa[e];n&&(Rn(n),delete Xa[e])},$a=function(e){if(e&&!xa(Qa)){var n=Ja(),t=p({id:Qa},n&&{nonce:n}),r=Qe($e,t,{textContent:e});ze(document.head,r)}},Ka=function(){var e=xa(Qa);e&&Rn(e)},Za=function(e,n){e.textContent=n},ec="src",nc=function(e){return e.tagName===We},tc=function(e){return Qe(We,{src:e})},rc=function(e){pn(We,e).forEach((function(e){var n=qa(e,ec);n&&tc(n)}))},oc=function(e,n){return e.tagName===n},ic=function(e){return oc(e,$e)&&!qa(e,ec)},ac=function(e){var n=pn($e,e),t=n.length,r=Ja();if(r)for(var o=0;o<t;o+=1){var i=n[o];ic(i)&&(i.nonce=r)}},cc=function(e,n){return!!e&&e.tagName===n},uc=function(e){return cc(e,Ke)&&!qa(e,ec)},sc=function(e){return cc(e,Ke)&&qa(e,ec)},dc=function(e){for(var n=pn(Ke,e),t=[],r=n.length,o=Ja(),i=p({},o&&{nonce:o}),a=0;a<r;a+=1){var c=n[a];if(uc(c)){var u=c.textContent;u&&t.push(Qe(Ke,i,{textContent:u}))}}return t},lc=function(e){for(var n=pn(Ke,e),t=[],r=n.length,o=0;o<r;o+=1){var i=n[o];if(sc(i)){var a=qa(i,ec);a&&t.push(a)}}return t},fc=function(e,n){n.forEach((function(n){e.appendChild(n),e.removeChild(n)}))},pc=function(e){return Promise.all(e.map(ge.default))},gc=function(e,n){var t=Ca(n);ac(t);var r=Va(t),o=dc(t),i=lc(t);return rc(t),r.forEach((function(n){ze(e,n)})),fc(e,o),pc(i)},mc=function(e){Va(e).forEach(Rn)},vc=function(e,n){mc(e),gc(e,n)},yc=function(e,n){var t=Ca(n);ac(t);var r=Va(t),o=dc(t),i=lc(t),a=r.length-1;for(rc(t);a>=0;){var c=r[a],u=za(e);u?Fa(u,c):ze(e,c),a-=1}return fc(e,o),pc(i)},hc=function(e,n){var t=Ca(n);ac(t);var r=Va(t),o=dc(t),i=lc(t);return rc(t),r.forEach((function(n){Fa(e,n)})),fc(e,o),pc(i)},bc=function(e,n){hc(e,n),Rn(e)},Ec=function(e,n){var t=Ca(n);ac(t);var r=Va(t),o=dc(t),i=lc(t);return rc(t),r.forEach((function(n){Ba(e,n)})),fc(e,o),pc(i)},wc=function(e,n){var t=n.priority,r=o(n,["priority"]);Object.keys(r).forEach((function(n){La(e,n,r[n],t)}))},Cc=function(e,n){Object.keys(n).forEach((function(t){Ma(e,t,n[t])}))},Ic=function(e,n){nc(e)&&(tc(n),ja(e,ec),Ma(e,ec,n))},Sc=function(e,n){var t=n.from,r=n.to,o=Ha(e),i=o[t],a=o[r];i&&a&&(t<r?Ba(a,i):Fa(a,i))},Oc=function(e,n,t){var r=e.map((function(e){return t(e,n)}));return Promise.all(r)},kc=function(e){return function(n){var t=n.selector,r=n.prehidingSelector,o=n.content;return Wa(r),Dn(t,Na).then((function(n){return Oc(n,o,e)})).then((function(){Ya(r)}),(function(e){throw Ya(r),e}))}},Pc=function(){return{setHtml:kc(vc),customCode:kc(yc),setText:kc(Za),setAttribute:kc(Cc),setImageSource:kc(Ic),setStyle:kc(wc),move:kc(wc),resize:kc(wc),rearrange:kc(Sc),remove:kc(Rn),insertAfter:kc(Ec),insertBefore:kc(hc),replaceHtml:kc(bc),prependHtml:kc(yc),appendHtml:kc(gc)}},Dc=function(e){var n=e.eventManager,t=e.mergeDecisionsMeta;return function(e){var r=e.decisionsMeta,o=void 0===r?[]:r,i=e.propositionAction,a=e.documentMayUnload,c=void 0!==a&&a,u=e.eventType,s=void 0===u?la:u,d=e.propositionEventTypes,l=void 0===d?[ha(s)]:d,f=e.viewName,p=n.createEvent(),g={eventType:s};return f&&(g.web={webPageDetails:{viewName:f}}),tn(o)&&t(p,o,l,i),p.mergeXdm(g),c&&p.documentMayUnload(),n.sendEvent(p)}},Tc="personalization:decisions",Rc=function(e){var n=e.prehidingStyle,t=e.showContainers,r=e.hideContainers,o=e.mergeQuery,i=e.processPropositions,a=e.createProposition,c=e.notificationHandler;return function(e){var u=e.cacheUpdate,s=e.personalizationDetails,d=e.event,l=e.onResponse;s.isRenderDecisions()?r(n):t(),o(d,s.createQueryDetails());var f=c(s.isSendDisplayEvent(),s.getViewName());l((function(e){var n,r,o,c=e.response.getPayloadsByType(Tc).map((function(e){return a(e)})),d=zn(c,(function(e){return e.getScopeType()})),l=d.page,p=void 0===l?[]:l,g=d.view,v=void 0===g?[]:g,y=d.proposition,h=void 0===y?[]:y,b=u.update(v);if(s.isRenderDecisions()){var E=i([].concat(m(p),m(b)),h);n=E.render,r=E.returnedPropositions,o=E.returnedDecisions,n().then(f),t()}else{var w=i([],[].concat(m(p),m(b),m(h)));r=w.returnedPropositions,o=w.returnedDecisions}return{propositions:r,decisions:o}}))}},Ac=function(e,n){if(ka(e))return Tn(e,n);for(var t=Na(e),r=!1,o=0;o<t.length;o+=1)if(t[o]===n){r=!0;break}return r},Nc="view",xc="page",Mc="proposition",qc=function(e,n,t){for(var r=document.documentElement,o=e,i=0;o&&o!==r;){if(Ac(n,o)){var a=t(n),c={metas:a},u=a.find((function(e){return e.trackingLabel}));u&&(c.label=u.trackingLabel,c.weight=i);var s=a.find((function(e){return e.scopeType===Nc}));return s&&(c.viewName=s.scope,c.weight=i),c}o=o.parentNode,i+=1}return{metas:null}},jc=function(e){return e.map((function(e){return e.trackingLabel,e.scopeType,o(e,["trackingLabel","scopeType"])}))},Lc=function(e){return e.filter((function(n,t){var r=JSON.stringify(n);return t===e.findIndex((function(e){return JSON.stringify(e)===r}))}))},_c=function(e,n,t){for(var r,o=[],i="",a=Number.MAX_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,u=0;u<n.length;u+=1){var s=qc(e,n[u],t),d=s.metas,l=s.label,f=s.weight,p=s.viewName;d&&(l&&f<=a&&(i=l,a=f),p&&f<=c&&(r=p,c=f),o.push.apply(o,m(jc(d))))}return{decisionsMeta:Lc(o),eventLabel:i,viewName:r}},Uc=function(){return-1!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).location.href.indexOf("adobe_authoring_enabled")},Bc=function(e,n,t,r){if(0!==n.length){var o={};t.forEach((function(e){o[e]=ma}));var i={_experience:{decisioning:{propositions:n,propositionEventType:o}}};r&&(i._experience.decisioning.propositionAction=r),e.mergeXdm(i)}},Fc=function(e,n){e.mergeQuery({personalization:p({},n)})},Hc=function(e){var n=e.mergeDecisionsMeta,t=e.collectClicks,r=e.getClickSelectors,o=e.getClickMetasBySelector;return function(e){var i=e.event,a=e.clickedElement,c=r();if(tn(c)){var u=t(a,c,o),s=u.decisionsMeta,d=u.eventLabel,l=u.viewName;if(tn(s)){var f={eventType:fa};l&&(f.web={webPageDetails:{viewName:l}}),i.mergeXdm(f),n(i,s,[va.INTERACT],d?{label:d}:void 0)}}}},Vc=function(e){var n=e.createProposition,t=!1,r=Promise.resolve({}),o=function(e,t){var r=e[t.toLowerCase()];return r&&r.length>0?r:[n({scope:t,scopeDetails:{characteristics:{scopeType:Nc}},items:[{schema:Ki}]},!1)]};return{createCacheUpdate:function(e){var n=_e();return t=!0,r=r.then((function(e){return n.promise.then((function(n){return(0,fe.default)({},e,n)})).catch((function(){return e}))})),{update:function(t){var r=t.filter((function(e){return e.getScope()})),i=zn(r,(function(e){return e.getScope().toLowerCase()}));return n.resolve(i),e?o(i,e):[]},cancel:function(){n.reject()}}},getView:function(e){return r.then((function(n){return o(n,e)}))},isInitialized:function(){return t}}},zc=function(e){var n=e.processPropositions,t=e.viewCache;return function(e){var r,o,i=e.personalizationDetails,a=e.onResponse,c=i.getViewName();return a((function(){return{propositions:r,decisions:o}})),t.getView(c).then((function(e){var t;if(i.isRenderDecisions()){var a=n(e);return t=a.render,r=a.returnedPropositions,
o=a.returnedDecisions,t()}var c=n([],e);return r=c.returnedPropositions,o=c.returnedDecisions,[]}))}},Jc=function(e){return Object.keys(e).map((function(n){return p({id:n},e[n])}))},Qc=function(){var e={};return{storeClickMetrics:function(n){var t=n.selector,r=n.meta,o=r.id,i=r.scope,a=r.scopeDetails,c=r.trackingLabel,u=r.scopeType;e[t]||(e[t]={}),e[t][o]={scope:i,scopeDetails:a,trackingLabel:c,scopeType:u}},getClickSelectors:function(){return Object.keys(e)},getClickMetasBySelector:function(n){return e[n]?Jc(e[n]):{}}}},Gc=[Zi,ea,oa],Xc=function(e){var n=e.processPropositions,t=e.createProposition,r=e.renderedPropositions,o=e.viewCache,i=function(e){return Gc.indexOf(e.schema)>-1},a=function(e){var n=e.items,t=e.metadataForScope;return n.filter(i).map((function(e){return e.schema!==ea?p({},e):ke(t)?p(p({},e),{},{data:p(p({},e.data),{},{selector:t.selector,type:t.actionType})}):void 0})).filter((function(e){return e}))},c=function(e){return!(e.scope===$i&&e.renderAttempted)},u=function(e){var n=e.propositions,t=e.metadata;return n.filter(c).map((function(e){return tn(e.items)?{id:e.id,scope:e.scope,scopeDetails:e.scopeDetails,items:a({items:e.items,metadataForScope:t[e.scope]})}:e})).filter((function(e){return tn(e.items)}))};return function(e){var i=e.propositions,a=void 0===i?[]:i,c=e.metadata,s=void 0===c?{}:c,d=e.viewName,l=_e();r.concat(l.promise);var f=u({propositions:a,metadata:s}).map((function(e){return t(e)}));return Promise.resolve().then((function(){return d?o.getView(d):[]})).then((function(e){var t=n([].concat(m(f),m(e))),r=t.render,o=t.returnedPropositions;return r().then(l.resolve),{propositions:o}}))}},Wc=function(e){var n=e.window;return function(){return n.location}},Yc=function(e){return e.targetMigrationEnabled?function(e){e.getPayload().mergeMeta({target:{migration:!0}})}:it},$c="customCode",Kc="BODY > *:eq(0)",Zc=function(e){var n=e.selector;return e.type!==$c||n!==Kc?e:(0,fe.default)({},e,{selector:"BODY"})},eu=function(e){return!tt(e)||!e.trim()},nu="appendHtml",tu="SCRIPT,LINK,STYLE",ru=function(e){var n=Ca(e);return pn(tu,n).map((function(e){return e.outerHTML})).join("")},ou=function(e){var n=(0,fe.default)({},e),t=n.content,r=n.selector;if(eu(t))return n;if(null==r)return n;var o=Na(r);return cc(o[0],Ze)?(n.type=nu,n.content=ru(t),n):n},iu=function(e){return function(n){return n?e.reduce((function(e,n){return(0,fe.default)(e,n(e))}),n):n}},au=function(e){var n=e.preprocess,t=e.isPageWideSurface,r=function(e,t){var r=e.schema,o=e.data,i=e.characteristics,a=(i=void 0===i?{}:i).trackingLabel,c=n(o);return{getSchema:function(){return r},getData:function(){return c},getProposition:function(){return t},getTrackingLabel:function(){return a},getOriginalItem:function(){return e},toString:function(){return JSON.stringify(e)},toJSON:function(){return e}}};return function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=e.id,i=e.scope,a=e.scopeDetails,c=e.items,u=void 0===c?[]:c,s=(a||{}).characteristics,d=(s=void 0===s?{}:s).scopeType;return{getScope:function(){return i||i},getScopeType:function(){return i===$i||t(i)?xc:d===Nc?Nc:Mc},getItems:function(){var e=this;return u.map((function(n){return r(n,e)}))},getNotification:function(){return{id:o,scope:i,scopeDetails:a}},toJSON:function(){return e},addToReturnValues:function(t,r,o,i){n&&(t.push(p(p({},e),{},{items:o.map((function(e){return e.getOriginalItem()})),renderAttempted:i})),i||r.push(p(p({},e),{},{items:o.map((function(e){return e.getOriginalItem()}))})))}}}},cu=function(){var e=Promise.resolve([]);return{concat:function(n){e=e.then((function(e){return n.then((function(n){return e.concat(n)})).catch((function(){return e}))}))},clear:function(){var n=e;return e=Promise.resolve([]),n}}},uu=function(){return{setRenderAttempted:!0,includeInNotification:!0}},su=function(e){var n=e.modules,t=e.logger,r=e.storeClickMetrics;return function(e){var o=e.getData()||{},i=o.type,a=o.selector;return i?"click"===i?a?(r({selector:a,meta:p(p({},e.getProposition().getNotification()),{},{trackingLabel:e.getTrackingLabel(),scopeType:e.getProposition().getScopeType()})}),{setRenderAttempted:!0,includeInNotification:!1}):(t.warn("Invalid DOM action data: missing selector.",e.getData()),{setRenderAttempted:!1,includeInNotification:!1}):n[i]?{render:function(){return n[i](e.getData())},setRenderAttempted:!0,includeInNotification:!0}:(t.warn("Invalid DOM action data: unknown type.",e.getData()),{setRenderAttempted:!1,includeInNotification:!1}):(t.warn("Invalid DOM action data: missing type.",e.getData()),{setRenderAttempted:!1,includeInNotification:!1})}},du=function(e){var n=e.modules,t=e.logger;return function(e){var r=e.getData()||{},o=r.type;return r.selector&&o?n[o]?{render:function(){n[o](e.getData())},setRenderAttempted:!0,includeInNotification:!0}:(t.warn("Invalid HTML content data",e.getData()),{setRenderAttempted:!1,includeInNotification:!1}):{setRenderAttempted:!1,includeInNotification:!1}}},lu=function(e){var n=e.logger,t=e.executeRedirect,r=e.collect;return function(e){var o=(e.getData()||{}).content;return o?{render:function(){return r({decisionsMeta:[e.getProposition().getNotification()],documentMayUnload:!0}).then((function(){return t(o)}))},setRenderAttempted:!0,onlyRenderThis:!0}:(n.warn("Invalid Redirect data",e.getData()),{})}},fu=function(e){var n=e.schemaProcessors,t=e.logger,r=function(e,n){return function(){return Promise.resolve().then(e).then((function(){return t.enabled&&t.info("Action ".concat(n.toString()," executed.")),!0})).catch((function(e){if(t.enabled){var r=e.message,o=e.stack,i="Failed to execute action ".concat(n.toString(),". ").concat(r," ").concat(o);t.warn(i)}return!1}))}},o=function(e,n){return Promise.all(e.map((function(e){return e()}))).then((function(e){if(e.includes(!0))return n}))},i=function(e){var t=n[e.getSchema()];return t?t(e):{}},a=function(e){for(var n,t,a,c,u=e.renderers,s=e.returnedPropositions,d=e.returnedDecisions,l=e.items,f=e.proposition,p=m(u),g=m(s),v=m(d),y=[],h=[],b=[],E=!1,w=!1,C=0;l.length>C;){c=l[C];var I=i(c);if(n=I.render,t=I.setRenderAttempted,a=I.includeInNotification,w=I.onlyRenderThis){g=[],v=[],t?(y=[c],h=[]):(y=[],h=[c]),p=[],b=[n],E=a;break}n&&b.push(r(n,c)),a&&(E=!0),t?y.push(c):h.push(c),C+=1}if(b.length>0){var S=E?f.getNotification():void 0;p.push((function(){return o(b,S)}))}else E&&p.push((function(){return f.getNotification()}));return y.length>0&&f.addToReturnValues(g,v,y,!0),h.length>0&&f.addToReturnValues(g,v,h,!1),{renderers:p,returnedPropositions:g,returnedDecisions:v,onlyRenderThis:w}};return function(e){for(var n,t,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[],c=[],u=[],s=0;e.length>s;){r=(t=e[s]).getItems();var d=a({renderers:i,returnedPropositions:c,returnedDecisions:u,items:r,proposition:t});if(i=d.renderers,c=d.returnedPropositions,u=d.returnedDecisions,n=d.onlyRenderThis)break;s+=1}return n&&e.forEach((function(e,n){n!==s&&e.addToReturnValues(c,u,e.getItems(),!1)})),o.forEach((function(e){e.addToReturnValues(c,u,e.getItems(),!1)})),{returnedPropositions:c,returnedDecisions:u,render:function(){return Promise.all(i.map((function(e){return e()}))).then((function(e){return e.filter((function(e){return e}))}))}}}},pu=function(e){var n=e.processPropositions,t=e.createProposition,r=e.notificationHandler;return function(e){var o=e.renderDecisions,i=e.propositions,a=e.event,c=e.personalization,u=void 0===c?{}:c;if(!o)return Promise.resolve();var s=u.sendDisplayEvent,d=void 0===s||s,l=a?a.getViewName():void 0,f=i.map((function(e){return t(e,!0)})),p=n(f),g=p.render,m=p.returnedPropositions,v=r(d,l);return g().then(v),Promise.resolve({propositions:m})}},gu="text/html",mu="application/json",vu="defaultContent",yu=["content","contentType"],hu=["mobileParameters","webParameters","html"],bu=function(e,n){for(var t=0;t<yu.length;t+=1){var r=yu[t];if(!Object.prototype.hasOwnProperty.call(e,r))return n.warn("Invalid in-app message data: missing property '".concat(r,"'."),e),!1}var o=e.content;if(e.contentType===mu)for(var i=0;i<hu.length;i+=1){var a=hu[i];if(!Object.prototype.hasOwnProperty.call(o,a))return n.warn("Invalid in-app message data.content: missing property '".concat(a,"'."),e),!1}return!0},Eu=function(e){var n=e.modules,t=e.logger;return function(e){var r=e.getData(),o=p({},e.getProposition().getNotification());if(!r)return t.warn("Invalid in-app message data: undefined.",r),{};var i=r.type,a=void 0===i?vu:i;return n[a]?bu(r,t)?o?{render:function(){return n[a](p(p({},r),{},{meta:o}))},setRenderAttempted:!0,includeInNotification:!0}:(t.warn("Invalid in-app message meta: undefined.",o),{}):{}:(t.warn("Invalid in-app message data: unknown type.",r),{})}},wu=function(e){var n=pn("#".concat(e),document);n&&n.length>0&&Rn(n[0])},Cu=function(e){var n={};if(!e||"a"!==e.tagName.toLowerCase())return n;var t=e.href;if(!t||!cn(t,"adbinapp://"))return n;var r,o,i=t.split("?"),a=i[0].split("://")[1],c=e.innerText,u=e.getAttribute("data-uuid")||"";if(tn(i)){var s=pe.default.parse(i[1]);r=s.interaction||"",o=decodeURIComponent(s.link||"")}return{action:a,interaction:r,link:o,label:c,uuid:u}},Iu=function(e){return function(n){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.location.href=n:e.location.replace(n),new Promise((function(){}))}},Su="alloy-messaging-container",Ou="alloy-overlay-container",ku="alloy-content-iframe",Pu=function(){return[Su,Ou].forEach(wu)},Du=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Iu(window);return function(t){t.preventDefault(),t.stopImmediatePropagation();var r=t.target,o="a"===r.tagName.toLowerCase()?r:r.closest("a");if(o){var i=Cu(o),a=i.action,c=i.interaction,u=i.link,s=i.label,d=i.uuid;e(a,{label:s,id:c,uuid:d,link:u}),"dismiss"===a&&Pu(),rt(u)&&u.length>0&&n(u,!0)}}},Tu=function(e,n){var t=(new DOMParser).parseFromString(e,gu),r=t.querySelector("script");r&&r.setAttribute("nonce",Ja());var o=Qe("iframe",{src:URL.createObjectURL(new Blob([t.documentElement.outerHTML],{type:"text/html"})),id:ku});return o.addEventListener("load",(function(){(0,(o.contentDocument||o.contentWindow.document).addEventListener)("click",n)})),o},Ru=function(e,n,t,r){[{id:Ou,element:r},{id:Su,element:t},{id:ku,element:e}].forEach((function(e){var t=e.id,r=e.element,o=n[t],i=o.style,a=void 0===i?{}:i,c=o.params,u=void 0===c?{}:c;(0,fe.default)(r.style,a);var s=u.parentElement,d=void 0===s?"body":s,l=u.insertionMethod,f=void 0===l?"appendChild":l,p=u.enabled,g=void 0===p||p,m=document.querySelector(d);g&&m&&"function"==typeof m[f]&&m[f](r)}))},Au=function(e){var n=e.verticalAlign,t=e.width,r=e.horizontalAlign,o=e.backdropColor,i=e.height,a=e.cornerRadius,c=e.horizontalInset,u=e.verticalInset,s=e.uiTakeover,d=void 0!==s&&s,l={width:t?"".concat(t,"%"):"100%",backgroundColor:o||"rgba(0, 0, 0, 0.5)",borderRadius:a?"".concat(a,"px"):"0px",border:"none",position:d?"fixed":"relative",overflow:"hidden"};return"left"===r?l.left=c?"".concat(c,"%"):"0":"right"===r?l.right=c?"".concat(c,"%"):"0":"center"===r&&(l.left="50%",l.transform="translateX(-50%)"),"top"===n?l.top=u?"".concat(u,"%"):"0":"bottom"===n?(l.position="fixed",l.bottom=u?"".concat(u,"%"):"0"):"center"===n&&(l.top="50%",l.transform="".concat("center"===r?"".concat(l.transform," "):"","translateY(-50%)"),l.display="flex",l.alignItems="center",l.justifyContent="center"),l.height=i?"".concat(i,"vh"):"100%",l},Nu=function(e){return{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"transparent",opacity:e.backdropOpacity||.5,backgroundColor:e.backdropColor||"#FFFFFF"}},xu=["enabled","parentElement","insertionMethod"],Mu=function(e){if(!e)return!1;var n=Object.keys(e);if(!Ce(n,Su))return!1;if(!Ce(n,Ou))return!1;for(var t=Mr(e),r=0;r<t.length;r+=1){if(!Tr(t[r],"style"))return!1;if(!Tr(t[r],"params"))return!1;for(var o=0;o<xu.length;o+=1)if(!Tr(t[r].params,xu[o]))return!1}return!0},qu=function(e){var n;if(e){var t=e.uiTakeover,r=void 0!==t&&t;return g(n={},ku,{style:{border:"none",width:"100%",height:"100%"},params:{enabled:!0,parentElement:"#alloy-messaging-container",insertionMethod:"appendChild"}}),g(n,Su,{style:Au(e),params:{enabled:!0,parentElement:"body",insertionMethod:"appendChild"}}),g(n,Ou,{style:Nu(e),params:{enabled:!0===r,parentElement:"body",insertionMethod:"appendChild"}}),n}},ju=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;Pu();var t=e.content,r=e.contentType,o=e.mobileParameters,i=e.webParameters;if(r===gu){var a=Qe("div",{id:Su}),c=Tu(t,Du(n)),u=Qe("div",{id:Ou});Mu(i)||(i=qu(o)),i&&Ru(c,i,a,u)}},Lu=function(e,n){return new Promise((function(t){var r=e.meta;ju(e,(function(e,t){var o={};o[va.INTERACT]=ma,-1!==Object.values(va).indexOf(e)&&(o[e]=ma),n({decisionsMeta:[r],propositionAction:t,eventType:fa,propositionEventTypes:Object.keys(o)})})),t({meta:r})}))},_u=function(e){return{defaultContent:function(n){return Lu(n,e)}}},Uu=function(e,n){return function(t,r){if(!t){var o=_e();return n.concat(o.promise),o.resolve}return function(n){n.length>0&&e({decisionsMeta:n,viewName:r})}}},Bu=function(e){var n,t=e.config,r=e.logger,o=e.eventManager,i=t.targetMigrationEnabled,a=t.prehidingStyle,c=Dc({eventManager:o,mergeDecisionsMeta:Bc}),u=Qc(),s=u.getClickMetasBySelector,d=u.getClickSelectors,l=u.storeClickMetrics,f=Wc({window:window}),p=Pc(),m=iu([ou,Zc]),v=au({preprocess:m,isPageWideSurface:Wi}),y=Vc({createProposition:v}),h=Iu(window),b=(g(n={},Ki,uu),g(n,Zi,su({modules:p,logger:r,storeClickMetrics:l})),g(n,ea,du({modules:p,logger:r})),g(n,ra,lu({logger:r,executeRedirect:h,collect:c})),g(n,oa,Eu({modules:_u(c),logger:r})),n),E=fu({schemaProcessors:b,logger:r}),w=cu(),C=Uu(c,w),I=Rc({prehidingStyle:a,showContainers:Ka,hideContainers:$a,mergeQuery:Fc,processPropositions:E,createProposition:v,notificationHandler:C}),S=Hc({mergeDecisionsMeta:Bc,collectClicks:_c,getClickSelectors:d,getClickMetasBySelector:s}),O=zc({processPropositions:E,viewCache:y}),k=Xc({processPropositions:E,createProposition:v,renderedPropositions:w,viewCache:y}),P=Yc({targetMigrationEnabled:i}),D=pu({processPropositions:E,createProposition:v,notificationHandler:C});return wa({getPageLocation:f,logger:r,fetchDataHandler:I,viewChangeHandler:O,onClickHandler:S,isAuthoringModeEnabled:Uc,mergeQuery:Fc,viewCache:y,showContainers:Ka,applyPropositions:k,setTargetMigration:P,mergeDecisionsMeta:Bc,renderedPropositions:w,onDecisionHandler:D})};Bu.namespace="Personalization",Bu.configValidators=Tr({prehidingStyle:Rr().nonEmpty(),targetMigrationEnabled:Sr().default(!1)});var Fu=function(e){return function(n){var t={webPageDetails:{URL:e.location.href||e.location},webReferrer:{URL:e.document.referrer}};Ne(n,{web:t})}},Hu=function(e){var n=e.screen.orientation;if(null==n||null==n.type)return null;var t=n.type.split("-");return 0===t.length||"portrait"!==t[0]&&"landscape"!==t[0]?null:t[0]},Vu=function(e){if(nn(e.matchMedia)){if(e.matchMedia("(orientation: portrait)").matches)return"portrait";if(e.matchMedia("(orientation: landscape)").matches)return"landscape"}return null},zu=function(e){return function(n){var t=e.screen,r=t.width,o=t.height,i={},a=mt(o);a>=0&&(i.screenHeight=a);var c=mt(r);c>=0&&(i.screenWidth=c);var u=Hu(e)||Vu(e);u&&(i.screenOrientation=u),Object.keys(i).length>0&&Ne(n,{device:i})}},Ju=function(e){return function(n){var t=e.document.documentElement,r=(t=void 0===t?{}:t).clientWidth,o=t.clientHeight,i={type:"browser"},a=mt(r);a>=0&&(i.browserDetails={viewportWidth:a});var c=mt(o);c>=0&&(i.browserDetails=i.browserDetails||{},i.browserDetails.viewportHeight=c),Ne(n,{environment:i})}},Qu=function(e){return function(n){var t=e(),r={},o=mt(t.getTimezoneOffset());void 0!==o&&(r.localTimezoneOffset=o),(void 0===o||Math.abs(o)<6e3)&&(r.localTime=vt(t)),Ne(n,{placeContext:r})}},Gu=function(e){return function(n){var t=e().toISOString();Ne(n,{timestamp:t})}},Xu="https://ns.adobe.com/experience/alloy",Wu="2.19.1",Yu=function(e){var n={name:Xu,version:Wu,environment:"browser"};Ne(e,{implementationDetails:n})},$u=function(e,n,t,r){var o=e.context,i=jn(o,(function(e,r){return t[e]?[t[e]]:(n.warn("Invalid context[".concat(r,"]: '").concat(e,"' is not available.")),[])})).concat(r);return{namespace:"Context",lifecycle:{onBeforeEvent:function(e){var t=e.event,r={};return Promise.all(i.map((function(e){return Promise.resolve(e(r,n))}))).then((function(){return t.mergeXdm(r)}))}}}},Ku=[["architecture","string"],["bitness","string"],["model","string"],["platformVersion","string"],["wow64","boolean"]],Zu=function(e){return void 0!==e.userAgentData},es=function(e){return Zu(e)?function(n,t){try{return e.userAgentData.getHighEntropyValues(Ku.map((function(e){return e[0]}))).then((function(e){var t={};Ku.forEach((function(n){var r=u(n,2),o=r[0],i=r[1];Object.prototype.hasOwnProperty.call(e,o)&&w(e[o])===i&&(t[o]=e[o])})),Ne(n,{environment:{browserDetails:{userAgentClientHints:t}}})}))}catch(e){return t.warn("Unable to collect user-agent client hints. ".concat(e.message)),it}}:it},ns=Fu(window),ts=zu(window),rs=Ju(window),os=Qu((function(){return new Date})),is=Gu((function(){return new Date})),as={web:ns,device:ts,environment:rs,placeContext:os},cs={highEntropyUserAgentHints:es(navigator)},us=p(p({},as),cs),ss=[is,Yu],ds=function(e){var n=e.config,t=e.logger;return $u(n,t,us,ss)};ds.namespace="Context",ds.configValidators=Tr({context:Ir(Rr()).default(Object.keys(as))});var ls=function(e){var n=e.storedConsent,t=e.taskQueue,r=e.defaultConsent,o=e.consent,i=e.sendSetConsentRequest,a=e.validateSetConsentOptions,c=e.consentHashStore,u=e.doesIdentityCookieExist,s=g({},Xr,r),d=n.read(),l=u(),f=void 0!==d[Xr];l&&f||c.clear(),l||(n.clear(),d={}),o.initializeConsent(s,d);var p=function(){if(0===t.length){var e=n.read();void 0!==e[Xr]&&o.setConsent(e)}};return{commands:{setConsent:{optionsValidator:a,run:function(e){var n=e.consent,r=e.identityMap,a=e.edgeConfigOverrides;o.suspend();var u=c.lookup(n);return t.addTask((function(){return u.isNew()?i({consentOptions:n,identityMap:r,edgeConfigOverrides:a}):Promise.resolve()})).then((function(){return u.save()})).finally(p)}}},lifecycle:{onResponse:p,onRequestFailure:p}}},fs=function e(n){return Array.isArray(n)?n.map((function(n){return e(n)})):"object"===w(n)&&null!==n?Object.keys(n).sort().reduce((function(t,r){return t[r]=e(n[r]),t}),{}):n},ps=function(e){return Le(JSON.stringify(fs(e)))},gs=function(e){var n=e.standard,t=e.version;return"".concat(n,".").concat(t)},ms=function(e){var n=e.storage;return{clear:function(){n.clear()},lookup:function(e){var t={},r=function(e){var n=gs(e),r=(e.standard,e.version,o(e,["standard","version"]));return t[n]||(t[n]=ps(r).toString()),t[n]};return{isNew:function(){return e.some((function(e){var t=gs(e),o=n.getItem(t);return null===o||o!==r(e)}))},save:function(){e.forEach((function(e){var t=gs(e);n.setItem(t,r(e))}))}}}}},vs=function(){var e={},n=li({content:e,addIdentity:function(n,t){e.identityMap=e.identityMap||{},e.identityMap[n]=e.identityMap[n]||[],e.identityMap[n].push(t)},hasIdentity:function(n){return void 0!==(e.identityMap&&e.identityMap[n])}});return n.setConsent=function(n){e.consent=n},n},ys=function(e){var n=e.payload,t=e.datastreamIdOverride;return si({payload:n,datastreamIdOverride:t,getAction:function(){return"privacy/set-consent"},getUseSendBeacon:function(){return!1}})},hs=function(e){var n=e.parseConsentCookie,t=e.orgId,r=e.cookieJar,o=Vn(t,Qn);return{read:function(){var e=r.get(o);return e?n(e):{}},clear:function(){r.remove(o)}}},bs=function(e){var n=e.createConsentRequestPayload,t=e.createConsentRequest,r=e.sendEdgeNetworkRequest,o=e.edgeConfigOverrides;return function(e){var i=e.consentOptions,a=e.identityMap,c=e.edgeConfigOverrides,u=gi({payload:n(),globalConfigOverrides:o,localConfigOverrides:c});u.payload.setConsent(i),ke(a)&&Object.keys(a).forEach((function(e){a[e].forEach((function(n){u.payload.addIdentity(e,n)}))}));var s=t(u);return r({request:s}).then((function(){}))}},Es=function(e){return e.split(";").reduce((function(e,n){var t=u(n.split("="),2),r=t[0],o=t[1];return e[r]=o,e}),{})},ws=Tr({consent:Ir(Cr()).required().nonEmpty(),identityMap:Nr,edgeConfigOverrides:xr}).noUnknownFields().required(),Cs=function(e){var n=e.config,t=e.consent,r=e.sendEdgeNetworkRequest,o=e.createNamespacedStorage,i=n.orgId,a=n.defaultConsent,c=hs({parseConsentCookie:Es,orgId:i,cookieJar:Re}),u=je(),s=bs({createConsentRequestPayload:vs,createConsentRequest:ys,sendEdgeNetworkRequest:r,edgeConfigOverrides:n.edgeConfigOverrides}),d=o("".concat(Hn(i),".consentHashes.")),l=ms({storage:d.persistent}),f=Xn({orgId:i});return ls({storedConsent:c,taskQueue:u,defaultConsent:a,consent:t,sendSetConsentRequest:s,validateSetConsentOptions:ws,consentHashStore:l,doesIdentityCookieExist:f})};Cs.namespace="Privacy";var Is=function(){return{eventMergeId:wt()}};n.createEventMergeId=Is;var Ss=function(e){return{commands:{createEventMergeId:{run:e.createEventMergeId}}}},Os=function(){return Ss({createEventMergeId:Is})};Os.namespace="EventMerge";var ks=function(e){var n=e.config,t=e.componentRegistry,r=[].concat(m(t.getCommandNames()),[co,uo]).sort(),o=p({},n);return Object.keys(n).forEach((function(e){var t=n[e];"function"==typeof t&&(o[e]=t.toString())})),{version:Wu,configs:o,commands:r}},Ps=function(e){var n=e.config,t=e.componentRegistry,r=ks({config:n,componentRegistry:t});return{commands:{getLibraryInfo:{run:function(){return{libraryInfo:r}}}}}};Ps.namespace="LibraryInfo";var Ds="personalization:decisions",Ts=function(e){return null!==e&&"object"===w(e)&&Object.getPrototypeOf(e)===Object.prototype},Rs=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object.keys(n).forEach((function(o){Ts(n[o])||Array.isArray(n[o])?e(n[o],t,[].concat(m(r),[o])):t[[].concat(m(r),[o]).join(".")]=n[o]})),t},As=function(e){return Ts(e)?Rs(e):e},Ns=function(e){var n=e.renderDecisions,t=e.decisionProvider,r=e.applyResponse,o=e.event,i=e.personalization,a=e.decisionContext,c=p(p({},As(o.getContent())),a);return function(e){var a=e.response;if(t.addPayloads(a.getPayloadsByType(Ds)),!o.hasQuery())return{propositions:[]};var u=t.evaluate(c);return r({renderDecisions:n,propositions:u,event:o,personalization:i})}},xs={MATCHER:"matcher",GROUP:"group",HISTORICAL:"historical"},Ms={EQUALS:"eq",NOT_EQUALS:"ne",EXISTS:"ex",NOT_EXISTS:"nx",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"ge",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"le",CONTAINS:"co",NOT_CONTAINS:"nc",STARTS_WITH:"sw",ENDS_WITH:"ew"},qs={AND:"and",OR:"or"},js={ANY:"any",ORDERED:"ordered"},Ls=(g(de={},Ms.EQUALS,k()),g(de,Ms.NOT_EQUALS,P()),g(de,Ms.EXISTS,D()),g(de,Ms.NOT_EXISTS,T()),g(de,Ms.GREATER_THAN,A()),g(de,Ms.GREATER_THAN_OR_EQUAL_TO,N()),g(de,Ms.LESS_THAN,x()),g(de,Ms.LESS_THAN_OR_EQUAL_TO,M()),g(de,Ms.CONTAINS,q()),g(de,Ms.NOT_CONTAINS,j()),g(de,Ms.STARTS_WITH,L()),g(de,Ms.ENDS_WITH,_()),de),_s=["iam.eventType","eventType","type"],Us=["iam.id","id"],Bs=function(e,n){return function(t){var r=e.getItem(n);if(!r)return t;try{return JSON.parse(r)}catch(e){return t}}},Fs=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(r){e.setItem(n,JSON.stringify(t(r)))}},Hs=function(e){var n=new Date;return n.setDate(n.getDate()-e),n},Vs=function(e){var n=e.scopeDetails,t=(void 0===n?{}:n).activity;return(void 0===t?{}:t).id},zs=function(){var e={};return{getItem:function(n){return n in e?e[n]:null},setItem:function(n,t){e[n]=t}}},Js=function(e){e.clear()},Qs=function(e){var n=e.eventType,t=void 0===n?"":n,r=e._experience;return!(!t||""===t||!r||"object"!==w(r))},Gs=function(e){var n=e.scopeDetails;return(void 0===n?{}:n).decisionProvider},Xs=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return Array.isArray(n)?(n.forEach((function(n){Array.isArray(n)?t.push.apply(t,m(e(n))):t.push(n)})),t):n},Ws=function(e,n,t){return{schema:t.schema,data:t.data,id:t.id||e}},Ys="schema",$s=(g(le={},"cjmiam",(function(e,n,t){var r=t.html,o=t.mobileParameters;return{schema:oa,data:{mobileParameters:o,webParameters:{},content:r,contentType:gu},id:e}})),g(le,Ys,Ws),le),Ks=function(){return function(e){var n=e.id,t=e.type,r=e.detail;return"function"==typeof $s[t]?$s[t](n,t,r):r}},Zs=function(e){var n=e.schema,t=e.data;if(n===ta)return!0;if(n!==na)return!1;try{var r="string"==typeof t.content?JSON.parse(t.content):t.content;return r&&Object.prototype.hasOwnProperty.call(r,"version")&&Object.prototype.hasOwnProperty.call(r,"rules")}catch(e){return!1}},ed=function(e,n,t){var r=Ks(),o=Vs(e),i=[],a=function(e){var n=e.data,t=void 0===n?{}:n,r=e.schema===ta?t:t.content;r&&i.push(ue("string"==typeof r?JSON.parse(r):r))},c=function(a){var c=n.getEvent(la,o),u=c?c.firstTimestamp:void 0,s=Xs(i.map((function(e){return e.execute(a)}))).map(r).map((function(e){var n=(t.recordQualified(o)||{}).firstTimestamp;return p(p({},e),{},{data:p(p({},e.data),{},{qualifiedDate:n,displayedDate:u})})}));return p(p({},e),{},{items:s})};return Array.isArray(e.items)&&e.items.filter(Zs).forEach(a),{evaluate:c,isEvaluable:i.length>0}},nd=function(e){var n=e.eventRegistry;return{recordQualified:function(e){if(e)return n.addEvent({},va.TRIGGER,e)}}},td=function(e){var n=e.eventRegistry,t={},r=nd({eventRegistry:n}),o=function(e){var o=Vs(e);if(o){var i=ed(e,n,r);i.isEvaluable&&(t[o]=i)}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.values(t).map((function(n){return n.evaluate(e)})).filter((function(e){return e.items.length>0}))};return{addPayload:o,addPayloads:function(e){e.forEach(o)},evaluate:i}},rd=function(e){return function(n){var t=n.renderDecisions,r=void 0!==t&&t,o=n.propositions,i=void 0===o?[]:o,a=n.event,c=n.personalization;return i.length>0&&e&&e.onDecision({renderDecisions:r,propositions:i,event:a,personalization:c}),{propositions:i}}},od="AJO",id="events",ad=1e3,cd=30,ud=function(e){return"iam.".concat(e)},sd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ad,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cd;return function(t){var r={};return Object.keys(t).forEach((function(o){r[o]={},Object.values(t[o]).filter((function(e){return new Date(e.firstTimestamp)>=Hs(n)})).sort((function(e,n){return e.firstTimestamp-n.firstTimestamp})).slice(-1*e).forEach((function(e){r[o][e.event[ud("id")]]=e}))})),r}},dd=function(e){var n,t,r,o=e.storage,i=o,a=function(e){n=Bs(i=e,id),t=Fs(i,id,sd(ad,cd)),r=n({})};a(o);var c=function(e,n,o,i){var a;if(n&&o){r[n]||(r[n]={});var c=r[n][o],u=c?c.count:0,s=(new Date).getTime(),d=c?c.firstTimestamp||c.timestamp:s;return r[n][o]={event:p(p({},e),{},(a={},g(a,ud("id"),o),g(a,ud("eventType"),n),g(a,ud("action"),i),a)),firstTimestamp:d,timestamp:s,count:u+1},t(r),r[n][o]}};return{addExperienceEdgeEvent:function(e){var n=e.getContent().xdm,t=void 0===n?{}:n,r=t._experience;if(Qs(t)){var o=r.decisioning,i=void 0===o?{}:o,a=i.propositionEventType,u=void 0===a?{}:a,s=i.propositionAction,d=void 0===s?{}:s,l=i.propositions,f=void 0===l?[]:l,p=Object.keys(u);if(0!==p.length){var g=function(e){return u[e]===ma},m=d.id;p.filter(g).forEach((function(e){f.forEach((function(n){Gs(n)===od&&c({},e,Vs(n),m)}))}))}}},addEvent:c,getEvent:function(e,n){if(r[e])return r[e][n]},toJSON:function(){return r},setStorage:a}},ld=function(e){var n=e.eventRegistry,t=e.window,r=(new Date).getTime(),o=function(){return p({title:t.title,url:t.url},st(t.url))},i=function(){return p({url:t.referrer},st(t.referrer))},a=function(){var e=new Date,n=e.getTime();return{pageLoadTimestamp:r,currentTimestamp:n,currentDate:e.getDate(),"~state.com.adobe.module.lifecycle/lifecyclecontextdata.dayofweek":e.getDay()+1,"~state.com.adobe.module.lifecycle/lifecyclecontextdata.hourofday":e.getHours(),currentMinute:e.getMinutes(),currentMonth:e.getMonth(),currentYear:e.getFullYear(),pageVisitDuration:n-r,"~timestampu":n/1e3,"~timestampz":e.toISOString()}},c=function(){return{height:t.height,width:t.width,scrollY:t.scrollY,scrollX:t.scrollX}},u={browser:{name:Zo(t)},page:o(),referringPage:i()},s=function(){return p(p(p({},u),a()),{},{window:c(),"~sdkver":Wu})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=p(p({},s()),e);return p(p({},As(t)),{},{events:n.toJSON()})};return{getContext:d}},fd=function(){for(var e=arguments.length,n=new Array(e>1?e-1:0),t=1;t<e;t++)n[t-1]=arguments[t];return n},pd=function(){return!0},gd=function(){var e=fd,n=pd,t=0,r={},o=function(e){return function(){delete r[e]}},i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"function"!=typeof e?function(){}:(r[t+=1]={callback:e,params:n},o(t))},a=function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];Mr(r).forEach((function(t){var r=t.callback,i=t.params,a=e.apply(void 0,[i].concat(o));n.apply(void 0,[i].concat(m(a)))&&r.apply(void 0,m(a))}))};return{add:i,emit:a,hasSubscriptions:function(){return Object.keys(r).length>0},setEmissionPreprocessor:function(n){"function"==typeof n&&(e=n)},setEmissionCondition:function(e){"function"==typeof e&&(n=e)}}},md=function(e){var n=e.options;return Tr({surfaces:Ir(Rr()).uniqueItems(),schemas:Ir(Rr()).uniqueItems(),callback:Or().required()}).noUnknownFields()(n)},vd=function(e,n){var t=e.surfacesFilter,r=e.schemasFilter;return[{propositions:n.filter((function(e){return!t||Ce(t,e.scope)})).map((function(e){var n=e.items,t=void 0===n?[]:n;return p(p({},e),{},{items:t.filter((function(e){return!r||Ce(r,e.schema)}))})})).filter((function(e){return e.items.length>0}))}]},yd=function(e,n){return n.propositions.length>0},hd=function(){var e=gd();e.setEmissionPreprocessor(vd),e.setEmissionCondition(yd);var n=function(n){var t=n.surfaces,r=n.schemas,o=n.callback,i=e.add(o,{surfacesFilter:t instanceof Array?t:void 0,schemasFilter:r instanceof Array?r:void 0});return Promise.resolve({unsubscribe:i})};return{refresh:function(n){e.hasSubscriptions()&&e.emit(n)},command:{optionsValidator:function(e){return md({options:e})},run:n}}},bd={TYPE:"~type",SOURCE:"~source"},Ed={LIFECYCLE:"com.adobe.eventType.lifecycle",TRACK:"com.adobe.eventType.generic.track",EDGE:"com.adobe.eventType.edge",RULES_ENGINE:"com.adobe.eventType.rulesEngine"},wd={LAUNCH:"com.adobe.eventSource.applicationLaunch",REQUEST:"com.adobe.eventSource.requestContent"},Cd=function(e){var n=e.options;return Tr({renderDecisions:Sr(),personalization:Tr({decisionContext:Tr({})})}).noUnknownFields()(n)},Id=function(e){var n=e.contextProvider,t=e.decisionProvider;return{optionsValidator:function(e){return Cd({options:e})},run:function(e){var r=e.renderDecisions,o=e.decisionContext;return(0,e.applyResponse)({renderDecisions:r,propositions:t.evaluate(n.getContext(o))})}}},Sd=function(e){var n=e.config,t=e.createNamespacedStorage,r=e.consent,o=n.orgId,i=n.personalizationStorageEnabled,a=t("".concat(Hn(o),".decisioning."));i||Js(a.persistent);var c,u=dd({storage:zs()}),s=td({eventRegistry:u}),d=ld({eventRegistry:u,window:window}),l=Id({contextProvider:d,decisionProvider:s}),f=hd();return{lifecycle:{onDecision:function(e){var n=e.propositions;f.refresh(n)},onComponentsRegistered:function(e){c=rd(e.lifecycle),i&&r.awaitConsent().then((function(){u.setStorage(a.persistent)})).catch((function(){a&&Js(a.persistent)}))},onBeforeEvent:function(e){var n,t=e.event,r=e.renderDecisions,o=e.personalization,i=void 0===o?{}:o,a=e.onResponse,l=void 0===a?it:a,f=i.decisionContext,m=void 0===f?{}:f;l(Ns({renderDecisions:r,decisionProvider:s,applyResponse:c,event:t,personalization:i,decisionContext:d.getContext(p((n={},g(n,bd.TYPE,Ed.EDGE),g(n,bd.SOURCE,wd.REQUEST),n),m))})),u.addExperienceEdgeEvent(t)}},commands:{evaluateRulesets:{run:function(e){var n,t=e.renderDecisions,r=e.personalization,o=(void 0===r?{}:r).decisionContext,i=void 0===o?{}:o;return l.run({renderDecisions:t,decisionContext:p((n={},g(n,bd.TYPE,Ed.RULES_ENGINE),g(n,bd.SOURCE,wd.REQUEST),n),i),applyResponse:c})},optionsValidator:l.optionsValidator},subscribeRulesetItems:f.command}}};Sd.namespace="DecisioningEngine",Sd.configValidators=Tr({personalizationStorageEnabled:Sr().default(!1)});var Od=function(e){return{inferences:e.response.getPayloadsByType("rtml:inferences")}},kd=function(){return{lifecycle:{onResponse:Od},commands:{}}};kd.namespace="MachineLearning";var Pd=function(){var e;return{getSession:function(n){return e[n]||{}},stopHeartbeat:function(n){var t=n.playerId,r=e[t];r&&(clearInterval(r.heartbeatId),r.heartbeatId=null)},updateLastTriggeredEventTS:function(n){var t=n.playerId,r=e[t];r&&(r.latestTriggeredEvent=Date.now())},storeSession:function(n){var t=n.playerId,r=n.sessionDetails;void 0===e&&(e={}),e[t]=r},saveHeartbeat:function(n){
var t=n.playerId,r=n.heartbeatId,o=e[t];o&&(o.heartbeatId=r)}}},Dd=function(e){var n=e.options;return wr([Tr({playerId:Rr().required(),xdm:Tr({eventType:Rr().required(),mediaCollection:Tr(Cr())}).required()}).required(),Tr({xdm:Tr({eventType:Rr().required(),mediaCollection:Tr({playhead:Pr().integer().required(),sessionID:Rr().required()}).required()}).required()}).required()],"Error validating the sendMediaEvent command options.")(n)},Td=function(e){var n=e.options;return wr([Tr({playerId:Rr().required(),onBeforeMediaEvent:Or().required(),xdm:Tr({mediaCollection:Tr({sessionDetails:Tr(Cr()).required()})})}).required(),Tr({xdm:Tr({mediaCollection:Tr({playhead:Pr().required(),sessionDetails:Tr(Cr()).required()})})}).required()],"Error validating the createMediaSession command options.")(n)},Rd={PAUSE:"media.pauseStart",PLAY:"media.play",BUFFERING:"media.buffering",AD_START:"media.adStart",SESSION_END:"media.sessionEnd",SESSION_START:"media.sessionStart",SESSION_COMPLETE:"media.sessionComplete"},Ad=function(){var e={},n=li({content:e,addIdentity:ui(e),hasIdentity:fi(e)});return n.addEvent=function(n){e.events=e.events||[],e.events.push(n)},n},Nd=function(e){var n=e.mediaRequestPayload,t=e.action;return si({payload:n,edgeSubPath:"/va",getAction:function(){return t},getUseSendBeacon:function(){return!1}})},xd=function(e){var n=e.config,t=e.eventManager,r=e.consent,o=e.sendEdgeNetworkRequest;return{createMediaEvent:function(e){var n=e.options.xdm,t={xdm:void 0===n?{}:n};return Gu((function(){return new Date}))(t.xdm),t},createMediaSession:function(e){var r=n.mediaCollection,o=r.playerName,i=r.channel,a=r.version,c=t.createEvent();return c.setUserXdm(e.xdm),c.mergeXdm({eventType:Rd.SESSION_START,mediaCollection:{sessionDetails:{playerName:e.xdm.mediaCollection.sessionDetails.playerName||o,channel:e.xdm.mediaCollection.sessionDetails.channel||i,appVersion:e.xdm.mediaCollection.sessionDetails.appVersion||a}}}),c},augmentMediaEvent:function(e){var n=e.event,t=e.playerId,r=e.onBeforeMediaEvent,o=e.sessionID;if(!t||!r)return n;var i=r({playerId:t}),a=i.playhead,c=i.qoeDataDetails;return n.mergeXdm?(n.mergeXdm({mediaCollection:{playhead:mt(a),qoeDataDetails:c}}),n):Ne(n,{xdm:{mediaCollection:{playhead:mt(a),qoeDataDetails:c,sessionID:o}}})},trackMediaSession:function(e){var n=e.event,r=e.playerId,o=e.onBeforeMediaEvent;return t.sendEvent(n,{playerId:r,onBeforeMediaEvent:o})},trackMediaEvent:function(e){var n=e.event,t=n.xdm.eventType.split(".")[1],i=Ad(),a=Nd({mediaRequestPayload:i,action:t});return i.addEvent(n),r.awaitConsent().then((function(){return o({request:a}).then((function(){return{}}))}))}}},Md=function(e){var n=e.config,t=e.mediaEventManager,r=e.mediaSessionCacheManager;return function(e){var o=e.playerId,i=e.sessionId,a=e.onBeforeMediaEvent,c=Date.now(),u=n.mediaCollection.mainPingInterval,s=r.getSession(o);if(Math.abs(c-s.latestTriggeredEvent)/1e3>u){var d=a(o),l=d.playhead,f=d.qoeDataDetails,p={eventType:"media.ping",mediaCollection:{playhead:mt(l),sessionID:i,qoeDataDetails:f}},g=t.createMediaEvent({options:{xdm:p}});return t.trackMediaEvent({event:g}).then((function(){r.updateLastTriggeredEventTS({playerId:o})}))}return Promise.resolve()}},qd=function(e){var n=e.mediaSessionCacheManager;return function(e){var t=e.playerId,r=e.xdm;if(t){var o=r.eventType;o!==Rd.SESSION_COMPLETE&&o!==Rd.SESSION_END||n.stopHeartbeat({playerId:t}),n.updateLastTriggeredEventTS({playerId:t})}}},jd=function(e){var n=e.config,t=e.logger,r=e.eventManager,o=e.sendEdgeNetworkRequest,i=e.consent,a=Pd(),c=xd({config:n,eventManager:r,logger:t,consent:i,sendEdgeNetworkRequest:o}),u=Md({config:n,mediaEventManager:c,mediaSessionCacheManager:a}),s=qd({mediaSessionCacheManager:a});return{lifecycle:{onBeforeEvent:function(e){var n=e.playerId,r=e.onBeforeMediaEvent,o=e.onResponse;(void 0===o?it:o)((function(e){var o=e.response.getPayloadsByType("media-analytics:new-session");if(t.info("Media session ID returned: ",o),o.length>0){if(n&&r){var i=setInterval((function(){u({sessionId:o[0].sessionId,playerId:n,onBeforeMediaEvent:r})}),1e3);a.saveHeartbeat({playerId:n,heartbeatId:i})}return{sessionId:o[0].sessionId}}return{}}))}},commands:{createMediaSession:{optionsValidator:function(e){return Td({options:e})},run:function(e){var n=e.playerId,t=e.onBeforeMediaEvent,r=c.createMediaSession(e);c.augmentMediaEvent({event:r,playerId:n,onBeforeMediaEvent:t});var o=c.trackMediaSession({event:r,playerId:n,onBeforeMediaEvent:t});return a.storeSession({playerId:n,sessionDetails:{sessionPromise:o,onBeforeMediaEvent:t,latestTriggeredEvent:Date.now()}}),o}},sendMediaEvent:{optionsValidator:function(e){return Dd({options:e})},run:function(e){var n=c.createMediaEvent({options:e}),t=e.playerId,r=a.getSession(t),o=r.onBeforeMediaEvent;r.sessionPromise.then((function(e){var r=c.augmentMediaEvent({event:n,playerId:t,onBeforeMediaEvent:o,sessionID:e.sessionId});return c.trackMediaEvent({event:r}).then((function(){s({playerId:t,xdm:r.xdm})}))}))}}}}};jd.namespace="Media Collection",jd.configValidators=Tr({mediaCollection:Tr({channel:Rr().nonEmpty().required(),playerName:Rr().nonEmpty().required(),version:Rr(),mainPingInterval:Pr().minimum(10).maximum(60).default(10),adPingInterval:Pr().minimum(10).maximum(60).default(10)}).noUnknownFields()});var Ld={Video:"video",Audio:"audio"},_d={VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"},Ud={FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"},Bd=p({SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pauseStart"},{AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"}),Fd={MediaResumed:"media.resumed",GranularAdTracking:"media.granularadtracking"},Hd={Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"},Vd={Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"},zd={Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"},Jd={"a.media.show":"show","a.media.season":"season","a.media.episode":"episode","a.media.asset":"assetID","a.media.genre":"genre","a.media.airDate":"firstAirDate","a.media.digitalDate":"firstDigitalDate","a.media.rating":"rating","a.media.originator":"originator","a.media.network":"network","a.media.type":"showType","a.media.adLoad":"adLoad","a.media.pass.mvpd":"mvpd","a.media.pass.auth":"authorized","a.media.dayPart":"dayPart","a.media.feed":"feed","a.media.format":"streamFormat","a.media.artist":"artist","a.media.album":"album","a.media.label":"label","a.media.author":"author","a.media.station":"station","a.media.publisher":"publisher","media.resumed":"hasResume"},Qd={"a.media.ad.advertiser":"advertiser","a.media.ad.campaign":"campaignID","a.media.ad.creative":"creativeID","a.media.ad.placement":"placementID","a.media.ad.site":"siteID","a.media.ad.creativeURL":"creativeURL"},Gd=function(e,n,t,r,o){var i={friendlyName:e,name:n,length:t,streamType:o,contentType:r},a=Tr({friendlyName:Rr().nonEmpty(),name:Rr().nonEmpty(),length:Pr().required(),streamType:Rr().nonEmpty(),contentType:Rr().nonEmpty()});try{var c=a(i);return{sessionDetails:{name:c.name,friendlyName:c.friendlyName,length:c.length,streamType:c.streamType,contentType:c.contentType}}}catch(e){return{}}},Xd=function(e,n,t){var r={friendlyName:e,offset:n,index:t},o=Tr({friendlyName:Rr().nonEmpty(),offset:Pr(),index:Pr()});try{var i=o(r);return{advertisingPodDetails:{friendlyName:i.friendlyName,offset:i.offset,index:i.index}}}catch(e){return{}}},Wd=function(e,n,t,r){var o={friendlyName:e,name:n,podPosition:t,length:r},i=Tr({friendlyName:Rr().nonEmpty(),name:Rr().nonEmpty(),podPosition:Pr(),length:Pr()});try{var a=i(o);return{advertisingDetails:{friendlyName:a.friendlyName,name:a.name,podPosition:a.podPosition,length:a.length}}}catch(e){return{}}},Yd=function(e,n,t,r){var o={friendlyName:e,offset:n,length:t,index:r},i=Tr({friendlyName:Rr().nonEmpty(),offset:Pr(),length:Pr(),index:Pr()});try{var a=i(o);return{chapterDetails:{friendlyName:a.friendlyName,offset:a.offset,index:a.index,length:a.length}}}catch(e){return{}}},$d=function(e){var n=new RegExp("^[a-zA-Z0-9_\\.]{1,64}$"),t={state:e},r=Tr({state:Rr().regexp(n)});try{return{stateDetails:{name:r(t).name}}}catch(e){return{}}},Kd=function(e,n,t,r){var o={bitrate:e,droppedFrames:n,fps:t,startupTime:r},i=Tr({bitrate:Pr(),droppedFrames:Pr(),fps:Pr(),startupTime:Pr()});try{var a=i(o);return{qoeDetails:{bitrate:a.bitrate,droppedFrames:a.droppedFrames,fps:a.fps,startupTime:a.startupTime}}}catch(e){return{}}},Zd=function(e){var n=[],t={};return Object.keys(e).forEach((function(r){Jd[r]?t[Jd[r]]=e[r]:n.push({name:r,value:e[r]})})),{sessionDetails:t,customMetadata:n}},el=function(e){var n=e.eventType,t=e.info,r=e.context,o=t,i=[];return r&&!Mn(r)&&(n===Bd.AdStart?Object.keys(r).forEach((function(e){Qd[e]?o.advertisingDetails[Jd[e]]=r[e]:i.push({name:e,value:r[e]})})):Object.keys(r).forEach((function(e){i.push({name:e,value:r[e]})})),o.customMetadata=i),o},nl=function(e){var n=e.mainPingInterval,t=e.playerState,r=e.trackEvent;return function(){var e=Date.now();if(Math.abs(e-t.latestTriggeredEvent)/1e3>n)return r({eventType:"ping"})}},tl=function(e){var n,t=e.config,r=e.logger,o=e.mediaEventManager,i=t.mediaCollection.mainPingInterval,a={qoe:null,lastPlayhead:0,latestTriggeredEvent:null},c=_e(),u=function(){a.latestTriggeredEvent=Date.now()},s=function(e){var n=e.eventType;return n===Bd.BufferComplete?"media.".concat(Bd.Play):"media.".concat(n)},d=function(e){var n=e.eventType,t=e.mediaDetails;return c.promise.then((function(e){var r={eventType:s({eventType:n}),mediaCollection:{sessionID:e,playhead:a.lastPlayhead}};Ne(r.mediaCollection,t);var i=o.createMediaEvent({options:{xdm:r}});return o.trackMediaEvent({event:i}).then((function(){u()}))})).catch((function(e){r.info(e)}))},l=nl({mainPingInterval:i,deferSession:c,playerState:a,trackEvent:d});return{trackSessionStart:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Mn(e))return c.reject("invalid media object"),{};var r={playhead:0},i=Zd(t),a=i.sessionDetails,s=i.customMetadata;Ne(r,e,{sessionDetails:a},{customMetadata:s});var d=o.createMediaSession({xdm:{mediaCollection:r}});return o.trackMediaSession({event:d}).then((function(e){u(),c.resolve(e.sessionId),n=setInterval((function(){l()}),1e3)}))},trackPlay:function(){return d({eventType:Bd.Play})},trackPause:function(){return d({eventType:Bd.Pause})},trackSessionEnd:function(){return clearInterval(n),d({eventType:Bd.SessionEnd}).then((function(){c=null}))},trackComplete:function(){return clearInterval(n),d({eventType:Bd.SessionComplete})},trackError:function(e){r.info("trackError(".concat(e,")"));var n={errorDetails:{name:e,source:"player"}};return d({eventType:Bd.SessionEnd,mediaDetails:n})},trackEvent:function(e,n,t){if(Mn(n))return r.info("invalid media object"),{};var o=el({eventType:e,info:n,context:t});return d({eventType:e,mediaDetails:o})},updatePlayhead:function(e){Zn(e)&&(a.lastPlayhead=parseInt(e,10))},updateQoEObject:function(e){e&&(a.qoe=e)},destroy:function(){r.info("Destroy called, destroying the tracker"),clearInterval(n),c=null}}},rl=function(e){var n=e.config,t=e.logger,r=e.mediaEventManager;return t.info("Media Analytics Component was configured"),{getInstance:function(){return tl({config:n,logger:t,mediaEventManager:r})},Event:Bd,MediaType:Ld,PlayerState:Ud,StreamType:_d,MediaObjectKey:Fd,VideoMetadataKeys:Hd,AudioMetadataKeys:Vd,AdMetadataKeys:zd,createMediaObject:Gd,createAdBreakObject:Xd,createAdObject:Wd,createChapterObject:Yd,createStateObject:$d,createQoEObject:Kd}},ol=function(e){var n=e.eventManager,t=e.sendEdgeNetworkRequest,r=e.config,o=e.logger,i=e.consent,a=xd({sendEdgeNetworkRequest:t,config:r,logger:o,consent:i,eventManager:n});return{commands:{getMediaAnalyticsTracker:{run:function(){return rl({config:r,logger:o,mediaEventManager:a})}}}}};ol.namespace="Legacy Media Analytics";var il=[mo,Lo,ki,Ri,Bu,ds,Cs,Os,Ps,kd,Sd,ol,jd],al="https://adobe.ly/3sHh553",cl=function(e){var n=e.combinedConfigValidator,t=e.options,r=e.logger;try{return n.noUnknownFields().required().call({logger:r},t)}catch(e){throw new Error("Resolve these configuration problems:\n\t - ".concat(e.message.split("\n").join("\n\t - "),"\nFor configuration documentation see: ").concat(al))}},ul=function(e,n,t){return t.reduce((function(t,r){var o=r.buildOnInstanceConfiguredExtraParams;return o&&(0,fe.default)(t,o({config:e,logger:n})),t}),{})},sl=function(e){var n=[],t={get enabled(){return e.enabled},flush:function(){n.forEach((function(n){var t=n.method,r=n.args;return e[t].apply(e,m(r))}))}};return Object.keys(e).filter((function(n){return"function"==typeof e[n]})).forEach((function(e){t[e]=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];n.push({method:e,args:r})}})),t},dl=function(e){var n=e.options,t=e.componentCreators,r=e.coreConfigValidators,o=e.createConfig,i=e.logger,a=e.setDebugEnabled,c=sl(i),u=t.map((function(e){return e.configValidators})).filter((function(e){return e})).reduce((function(e,n){return e.concat(n)}),r),s=o(cl({combinedConfigValidator:u,options:n,logger:c}));a(s.debugEnabled,{fromConfig:!0}),c.flush();var d=ul(s,i,t);return i.logOnInstanceConfigured(p(p({},d),{},{config:s})),s},ll=function(e){var n=e.componentCreators,t=e.lifecycle,r=e.componentRegistry,o=e.getImmediatelyAvailableTools;return n.forEach((function(e){var n,t=e.namespace,i=o(t);try{n=e(i)}catch(e){throw pt({error:e,message:"[".concat(t,"] An error occurred during component creation.")})}r.register(t,n)})),t.onComponentsRegistered({lifecycle:t}).then((function(){return r}))},fl=function(e){return(0,fe.default)({},e)},pl="edge.adobedc.net",gl="adobedc.demdex.net",ml="ee",vl=function(){return Tr({debugEnabled:Sr().default(!1),defaultConsent:Ar(Jr,Qr,Gr).default(Jr),datastreamId:Rr().unique().required(),edgeDomain:Rr().domain().default(pl),edgeBasePath:Rr().nonEmpty().default(ml),orgId:Rr().unique().required(),onBeforeEventSend:Or().default(it),edgeConfigOverrides:xr}).deprecated("edgeConfigId",Rr().unique(),"datastreamId")},yl=function(e){var n=e.errorPrefix,t=e.logger;return function(e,r){var o=lt(e);if(o.code===Wr)return t.warn("The ".concat(r," could not fully complete. ").concat(o.message)),{};throw ft({error:o,message:"".concat(n," ").concat(o.message)}),o}},hl=function(e){var n=e.fetch;return function(e,t){return n(e,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"text/plain; charset=UTF-8"},referrerPolicy:"no-referrer-when-downgrade",body:t}).then((function(e){return e.text().then((function(n){return{statusCode:e.status,getHeader:function(n){return e.headers.get(n)},body:n}}))}))}},bl=function(e){var n=e.XMLHttpRequest;return function(e,t){return new Promise((function(r,o){var i=new n;i.onreadystatechange=function(){4===i.readyState&&(0===i.status?o(new Error("Request aborted.")):r({statusCode:i.status,getHeader:function(e){return i.getResponseHeader(e)},body:i.responseText}))},i.onloadstart=function(){i.responseType="text"},i.open("POST",e,!0),i.setRequestHeader("Content-Type","text/plain; charset=UTF-8"),i.withCredentials=!0,i.onerror=o,i.onabort=o,i.send(t)}))}},El=function(e){var n=e.sendBeacon,t=e.sendFetchRequest,r=e.logger;return function(e,o){var i=new Blob([o],{type:"text/plain; charset=UTF-8"});return n(e,i)?Promise.resolve({statusCode:204,getHeader:function(){return null},body:""}):(r.info("Unable to use `sendBeacon`; falling back to `fetch`."),t(e,o))}},wl=function(e){var n=e.getDebugEnabled,t=e.console,r=e.getMonitors,o=e.context,i="[".concat(o.instanceName,"]");o.componentName&&(i+=" [".concat(o.componentName,"]"));var a=function(e,n){var t=r();if(t.length>0){var i=(0,fe.default)({},o,n);t.forEach((function(n){n[e]&&n[e](i)}))}},c=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];a("onBeforeLog",{level:e,arguments:o}),n()&&t[e].apply(t,[i].concat(o))};return{get enabled(){return r().length>0||n()},logOnInstanceCreated:function(e){a("onInstanceCreated",e),c("info","Instance initialized.")},logOnInstanceConfigured:function(e){a("onInstanceConfigured",e),c("info","Instance configured. Computed configuration:",e.config)},logOnBeforeCommand:function(e){a("onBeforeCommand",e),c("info","Executing ".concat(e.commandName," command. Options:"),e.options)},logOnCommandResolved:function(e){a("onCommandResolved",e),c("info","".concat(e.commandName," command resolved. Result:"),e.result)},logOnCommandRejected:function(e){a("onCommandRejected",e),c("error","".concat(e.commandName," command was rejected. Error:"),e.error)},logOnBeforeNetworkRequest:function(e){a("onBeforeNetworkRequest",e),c("info","Request ".concat(e.requestId,": Sending request."),e.payload)},logOnNetworkResponse:function(e){a("onNetworkResponse",e);var n=e.parsedBody||e.body?"response body:":"no response body.";c("info","Request ".concat(e.requestId,": Received response with status code ").concat(e.statusCode," and ").concat(n),e.parsedBody||e.body)},logOnNetworkError:function(e){a("onNetworkError",e),c("error","Request ".concat(e.requestId,": Network request failed."),e.error)},info:c.bind(null,"info"),warn:c.bind(null,"warn"),error:c.bind(null,"error")}},Cl="Event was canceled because the onBeforeEventSend callback returned false.",Il=function(e){var n=e.config,t=e.logger,r=e.lifecycle,i=e.consent,a=e.createEvent,c=e.createDataCollectionRequestPayload,u=e.createDataCollectionRequest,s=e.sendEdgeNetworkRequest,d=e.applyResponse,l=n.onBeforeEventSend,f=n.edgeConfigOverrides;return{createEvent:a,sendEvent:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.edgeConfigOverrides,d=o(n,["edgeConfigOverrides"]),g=gi({payload:c(),localConfigOverrides:a,globalConfigOverrides:f}),m=u(g),v=Me(),y=Me();return r.onBeforeEvent(p(p({},d),{},{event:e,onResponse:v.add,onRequestFailure:y.add})).then((function(){return g.payload.addEvent(e),i.awaitConsent()})).then((function(){try{e.finalize(l)}catch(o){var n=function(){throw o};return y.add(r.onRequestFailure),y.call({error:o}).then(n,n)}if(!e.shouldSend()){y.add(r.onRequestFailure),t.info(Cl);var o=new Error(Cl);return y.call({error:o}).then((function(){}))}return s({request:m,runOnResponseCallbacks:v.call,runOnRequestFailureCallbacks:y.call})}))},applyResponse:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.renderDecisions,o=void 0!==t&&t,i=n.decisionContext,a=void 0===i?{}:i,s=n.responseHeaders,l=void 0===s?{}:s,f=n.responseBody,p=void 0===f?{handle:[]}:f,g=n.personalization,m=c(),v=u({payload:m}),y=Me();return r.onBeforeEvent({event:e,renderDecisions:o,decisionContext:a,decisionScopes:[$i],personalization:g,onResponse:y.add,onRequestFailure:it}).then((function(){return m.addEvent(e),d({request:v,responseHeaders:l,responseBody:p,runOnResponseCallbacks:y.call})}))}}},Sl="state:store",Ol=function(e){var n=e.cookieJar,t=e.shouldTransferCookie,r=e.apexDomain,o=e.dateProvider;return{cookiesToPayload:function(e,o){var i=He(o,r),a={domain:r,cookiesEnabled:!0};if(!i){var c=n.get(),u=Object.keys(c).filter(t).map((function(e){return{key:e,value:c[e]}}));u.length&&(a.entries=u)}e.mergeState(a)},responseToCookies:function(e){e.getPayloadsByType(Sl).forEach((function(e){var t={domain:r},i=e.attrs&&e.attrs.SameSite&&e.attrs.SameSite.toLowerCase();void 0!==e.maxAge&&(t.expires=new Date(o().getTime()+1e3*e.maxAge)),void 0!==i&&(t.sameSite=i),"none"===i&&(t.secure=!0),n.set(e.key,e.value,t)}))}}},kl="mboxEdgeCluster",Pl="at_qa_mode",Dl="mbox",Tl=function(e){var n=e.orgId,t=e.targetMigrationEnabled;return function(e){return nt(n,e)||e===Pl||t&&e===Dl}},Rl="v1",Al=function(e){var n=e.shift()||[],t=e.shift()||[],r=e;return Pe.apply(void 0,[{}].concat(m(n),m(t),m(r)))},Nl=function(e){return function(n){var t=function(){throw n};return e.call({error:n}).then(t,t)}},xl=function(e){var n=e.config,t=e.lifecycle,r=e.cookieTransfer,o=e.sendNetworkRequest,i=e.createResponse,a=e.processWarningsAndErrors,c=e.getLocationHint,u=e.getAssuranceValidationTokenParams,s=n.edgeDomain,d=n.edgeBasePath,l=n.datastreamId;return function(e){var n=e.request,f=e.runOnResponseCallbacks,p=void 0===f?it:f,g=e.runOnRequestFailureCallbacks,m=void 0===g?it:g,v=Me();v.add(t.onResponse),v.add(p);var y=Me();return y.add(t.onRequestFailure),y.add(m),t.onBeforeRequest({request:n,onResponse:v.add,onRequestFailure:y.add}).then((function(){var e=n.getUseIdThirdPartyDomain()?gl:s,t=c(),i=t?"".concat(d,"/").concat(t).concat(n.getEdgeSubPath()):"".concat(d).concat(n.getEdgeSubPath()),a=n.getDatastreamIdOverride()||l,f=n.getPayload();a!==l&&f.mergeMeta({sdkConfig:{datastream:{original:l}}});var p="https://".concat(e,"/").concat(i,"/").concat(Rl,"/").concat(n.getAction(),"?configId=").concat(a,"&requestId=").concat(n.getId()).concat(u());return r.cookiesToPayload(f,e),o({requestId:n.getId(),url:p,payload:f,useSendBeacon:n.getUseSendBeacon()})})).then((function(e){return a(e),e})).catch(Nl(y)).then((function(e){var n=e.parsedBody,t=e.getHeader,o=i({content:n,getHeader:t});return r.responseToCookies(o),v.call({response:o}).then(Al)}))}},Ml=204,ql="The server responded with a",jl=function(e){var n=e.logger;return function(e){var t=e.statusCode,r=e.body,o=e.parsedBody;if(t<200||t>=300||!o&&t!==Ml||o&&!Array.isArray(o.handle)){var i=o?JSON.stringify(o,null,2):r,a=i?"response body:\n".concat(i):"no response body.";throw new Error("".concat(ql," status code ").concat(t," and ").concat(a))}if(o){var c=o.warnings,u=void 0===c?[]:c,s=o.errors,d=void 0===s?[]:s;u.forEach((function(e){n.warn("".concat(ql," warning:"),e)})),d.forEach((function(e){n.error("".concat(ql," non-fatal error:"),e)}))}}},Ll=function(e){var n=e.orgId,t=e.cookieJar,r=Vn(n,Gn),o=function(){return t.get(r)},i=function(){var e=t.get(kl);if(e)return"t".concat(e)};return function(){return o()||i()}},_l=3,Ul=[429,503,502,504],Bl=function(e){var n=e.response;return e.retriesAttempted<_l&&Ce(Ul,n.statusCode)},Fl=1e3,Hl=1e3,Vl=.3,zl=function(e){var n=Fl+e*Hl,t=n*Vl,r=n-t,o=n+t;return Math.round(r+Math.random()*(o-r))},Jl=function(e){var n,t=e.getHeader(oo);if(t){var r=parseInt(t,10);n=et(r)?1e3*r:Math.max(0,new Date(t).getTime()-(new Date).getTime())}return n},Ql=function(e){var n=e.response,t=e.retriesAttempted,r=Jl(n);return void 0===r&&(r=zl(t)),r},Gl=200,Xl=function(e){var n=e.cookieTransfer,t=e.lifecycle,r=e.createResponse,o=e.processWarningsAndErrors;return function(e){var i=e.request,a=e.responseHeaders,c=e.responseBody,u=e.runOnResponseCallbacks,s=void 0===u?it:u,d=e.runOnRequestFailureCallbacks,l=void 0===d?it:d,f=Me();f.add(t.onResponse),f.add(s);var p=Me();p.add(t.onRequestFailure),p.add(l);var g=function(e){return a[e]};return t.onBeforeRequest({request:i,onResponse:f.add,onRequestFailure:p.add}).then((function(){return o({statusCode:Gl,getHeader:g,body:JSON.stringify(c),parsedBody:c})})).catch(Nl(p)).then((function(){var e=r({content:c,getHeader:g});return n.responseToCookies(e),f.call({response:e}).then(Al)}))}},Wl=Yn(window),Yl=window,$l=(Yl.console,Yl.fetch),Kl=Yl.navigator,Zl=Yl.XMLHttpRequest,ef=vl(),nf=Bn(window,Re),tf=nn($l)?hl({fetch:$l}):bl({XMLHttpRequest:Zl}),rf=xn(),of=bi({window:window,createNamespacedStorage:Wl}),af=function(e){var n=e.instanceName,t=e.logController,r=t.setDebugEnabled,o=t.logger,i=t.createComponentLogger,a=Hr(),c=Br(a),u=function(e){r(e.enabled,{fromConfig:!1})},s=qe({logger:o,cookieJar:Re}),d=function(e){var t=dl({options:e,componentCreators:il,coreConfigValidators:ef,createConfig:fl,logger:o,setDebugEnabled:r}),u=t.orgId,d=t.targetMigrationEnabled,l=Tl({orgId:u,targetMigrationEnabled:d}),f=Ol({cookieJar:s,shouldTransferCookie:l,apexDomain:nf,dateProvider:function(){return new Date}}),p=nn(Kl.sendBeacon)?El({sendBeacon:Kl.sendBeacon.bind(Kl),sendFetchRequest:tf,logger:o}):tf,g=Vr({logger:o,sendFetchRequest:tf,sendBeaconRequest:p,isRequestRetryable:Bl,getRequestRetryDelay:Ql}),m=jl({logger:o}),v=zr({logger:o}),y=ao({extractEdgeInfo:v}),h=Ll({orgId:u,cookieJar:Re}),b=xl({config:t,lifecycle:c,cookieTransfer:f,sendNetworkRequest:g,createResponse:y,processWarningsAndErrors:m,getLocationHint:h,getAssuranceValidationTokenParams:of}),E=Xl({lifecycle:c,cookieTransfer:f,createResponse:y,processWarningsAndErrors:m}),w=eo({logger:o}),C=no({generalConsentState:w,logger:o}),I=Il({config:t,logger:o,lifecycle:c,consent:C,createEvent:ro,createDataCollectionRequestPayload:pi,createDataCollectionRequest:di,sendEdgeNetworkRequest:b,applyResponse:E});return ll({componentCreators:il,lifecycle:c,componentRegistry:a,getImmediatelyAvailableTools:function(e){var r=i(e);return{config:t,componentRegistry:a,consent:C,eventManager:I,fireReferrerHideableImage:rf,logger:r,lifecycle:c,sendEdgeNetworkRequest:b,handleError:yl({errorPrefix:"[".concat(n,"] [").concat(e,"]"),logger:r}),createNamespacedStorage:Wl,apexDomain:nf}}})},l=yl({errorPrefix:"[".concat(n,"]"),logger:o});return so({logger:o,configureCommand:d,setDebugCommand:u,handleError:l,validateCommandOptions:fo})},cf=window.console,uf=Yn(window),sf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Tr({name:Rr().default("alloy"),monitors:Ir(Tr({})).default([])}).noUnknownFields()(e),t=n.name,r=n.monitors,o=function(){return(window.__alloyMonitors||[]).concat(r)},i=jr({console:cf,locationSearch:window.location.search,createLogger:wl,instanceName:t,createNamespacedStorage:uf,getMonitors:o}),a=af({instanceName:t,logController:i});return i.logger.logOnInstanceCreated({instance:a}),a};n.createInstance=sf}},"adobe-alloy-beta/dist/lib/instanceManager/createInstanceManager.js":{script:function(e){"use strict";function n(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function t(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(n){r(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){if(null==e)return{};var t,r,o=i(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function i(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}e.exports=function(e){var n=e.turbine,r=e.window,i=e.createInstance,a=e.createEventMergeId,c=e.orgId,u=e.wrapOnBeforeEventSend,s=e.getConfigOverrides,d=n.getExtensionSettings().instances,l={};return d.forEach((function(e){var a=e.name,d=e.edgeConfigId,f=e.stagingEdgeConfigId,p=e.developmentEdgeConfigId,g=e.onBeforeEventSend,m=o(e,["name","edgeConfigId","stagingEdgeConfigId","developmentEdgeConfigId","onBeforeEventSend"]),v=i({name:a});r[a]=v,r.__alloyNS||(r.__alloyNS=[]),r.__alloyNS.push(a),l[a]=v;var y=n.environment&&n.environment.stage,h="development"===y&&p||"staging"===y&&f||d;m.edgeConfigOverrides=s(m),v("configure",t(t({},m),{},{datastreamId:h,debugEnabled:n.debugEnabled,orgId:m.orgId||c,onBeforeEventSend:u(g)})),n.onDebugChanged((function(e){v("setDebug",{enabled:e})}))})),{getInstance:function(e){return l[e]},createEventMergeId:function(){return a()}}}}},"adobe-alloy-beta/dist/lib/instanceManager/injectWrapOnBeforeEventSend.js":{script:function(e){"use strict";e.exports=function(e){var n=e.version;return function(e){return function(t){if(t.xdm.implementationDetails.name="".concat(t.xdm.implementationDetails.name,"/reactor"),t.xdm.implementationDetails.version="".concat(t.xdm.implementationDetails.version,"+").concat(n),e)return e(t)}}}}},"adobe-alloy-beta/dist/lib/utils/createGetConfigOverrides.js":{script:function(e){"use strict";function n(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function t(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(n){r(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var o=function(e){return function(n){var r,o,i,a,c,u,s=n.edgeConfigOverrides;if(s){if(s[e])u=t({},s[e]);else{if(s.development||s.staging||s.production)return;u=s}if(0!==Object.keys(u).length){if((null===(r=u.com_adobe_analytics)||void 0===r||null===(o=r.reportSuites)||void 0===o?void 0:o.length)>0&&(u.com_adobe_analytics.reportSuites=u.com_adobe_analytics.reportSuites.flatMap((function(e){return e.includes(",")?e.split(/,\s*/gi):e})).map((function(e){return e.trim()})).filter(Boolean)),void 0!==(null===(i=u.com_adobe_identity)||void 0===i?void 0:i.idSyncContainerId)&&null!==(null===(a=u.com_adobe_identity)||void 0===a?void 0:a.idSyncContainerId)&&"string"==typeof(null===(c=u.com_adobe_identity)||void 0===c?void 0:c.idSyncContainerId)){var d=parseInt(u.com_adobe_identity.idSyncContainerId.trim(),10);if(Number.isNaN(d))throw new Error('The ID sync container ID "'.concat(u.com_adobe_identity.idSyncContainerId,'" is not a valid integer.'));u.com_adobe_identity.idSyncContainerId=d}return u}}}};e.exports=o}}}},core:{displayName:"Core",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP1fdd2a6ec2ae468fb1d2cac08df65f83/",modules:{"core/src/lib/events/pageBottom.js":{name:"page-bottom",displayName:"Page Bottom",script:function(e,n,t){"use strict";var r=t("./helpers/pageLifecycleEvents");e.exports=function(e,n){r.registerPageBottomTrigger(n)}}},"core/src/lib/events/libraryLoaded.js":{name:"library-loaded",displayName:"Library Loaded (Page Top)",script:function(e,n,t){"use strict";var r=t("./helpers/pageLifecycleEvents");e.exports=function(e,n){r.registerLibraryLoadedTrigger(n)}}},"core/src/lib/events/helpers/pageLifecycleEvents.js":{script:function(e,n,t){"use strict";var r=t("@adobe/reactor-window"),o=t("@adobe/reactor-document"),i=-1!==r.navigator.appVersion.indexOf("MSIE 10"),a="WINDOW_LOADED",c="DOM_READY",u="PAGE_BOTTOM",s=[u,c,a],d=function(e,n){return{element:e,target:e,nativeEvent:n}},l={};s.forEach((function(e){l[e]=[]}));var f=function(e,n){s.slice(0,g(e)+1).forEach((function(e){m(n,e)}))},p=function(){return"complete"===o.readyState?a:"interactive"===o.readyState?i?null:c:void 0},g=function(e){return s.indexOf(e)},m=function(e,n){l[n].forEach((function(n){v(e,n)})),l[n]=[]},v=function(e,n){var t=n.trigger,r=n.syntheticEventFn;t(r?r(e):null)};r._satellite=r._satellite||{},r._satellite.pageBottom=f.bind(null,u),o.addEventListener("DOMContentLoaded",f.bind(null,c),!0),r.addEventListener("load",f.bind(null,a),!0),r.setTimeout((function(){var e=p();e&&f(e)}),0),e.exports={registerLibraryLoadedTrigger:function(e){e()},registerPageBottomTrigger:function(e){l[u].push({trigger:e})},registerDomReadyTrigger:function(e){l[c].push({trigger:e,syntheticEventFn:d.bind(null,o)})},registerWindowLoadedTrigger:function(e){l[a].push({trigger:e,syntheticEventFn:d.bind(null,r)})}}}}}}},company:{orgId:"B504732B5D3B2A790A495ECF@AdobeOrg",dynamicCdnEnabled:!1},property:{name:"scaus - Property",settings:{domains:["scaus.art"],undefinedVarsReturnEmpty:!0,ruleComponentSequencingEnabled:!0},
id:"PRb29b9287fc2148f48d890eef8d1cc736"},rules:[{id:"RL125fdb4ca0d44ce099b302eca62d89bd",name:"Page load",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{instanceName:"alloy",personalization:{includeRenderedPropositions:!0},edgeConfigOverrides:{development:{}}},timeout:2e3,delayNext:!0}]},{id:"RLf343e38628834cf680a100aa34a9aad5",name:"Page top fetch propositions",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{type:"decisioning.propositionFetch",instanceName:"alloy",personalization:{sendDisplayEvent:!1},renderDecisions:!0},timeout:2e3,delayNext:!0}]}]};var _satellite=function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function t(e){var t,r;return!1!==n(e)&&(void 0===(t=e.constructor)||!1!==n(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))}function r(e){return"string"==typeof e&&-1!==e.indexOf("[")&&-1!==e.indexOf("]")}function o(e){return e.substr(0,e.indexOf("["))}function i(e,n,t){if(e.length&&fn(n)){var a=e[0];if(1!==e.length){var c=e.slice(1);if(!r(a))return i(c,n[a],t);var u=n[a=o(a)];Array.isArray(u)&&u.forEach((function(e){return i(c,e,t)}))}else n.hasOwnProperty(a)&&"string"==typeof n[a]&&(n[a]=t(n[a]))}}if(window.atob){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c=document,u=Object.assign,s=window,d=s,l=function(e,n,t,r){var o,i=Boolean(n&&Array.isArray(t)),a=Boolean(i&&e),c=document.createElement("a");if(i){var u=function(){var e=new Error("Unable to find the Library Embed Code for Dynamic Host Resolution.");throw e.code="dynamic_host_resolver_constructor_error",e};if(e&&(/^((https?:)?\/\/).+/.test(e)||u(),/^\/\/.+/.test(e)?c.href=d.location.protocol+e:c.href=e),c.hostname||u(),-1===t.indexOf(c.hostname)){var s=new Error("This library is not authorized for this domain. Please contact your CSM for more information.");throw s.code="dynamic_host_not_allowed",s}}var l=function(){if(null!=o)return o;if(a){var e=c.host;/:80$/.test(e)?e=e.replace(":80",""):/:80\/$/.test(e)?e=e.replace(":80/",""):/:443$/.test(e)?e=e.replace(":443",""):/:443\/$/.test(e)&&(e=e.replace(":443/","")),o=c.protocol+"//"+e}else o="";return o},f=function(e){return a&&"string"==typeof e?[l(),"/"===e.charAt(0)?e.slice(1):e].join("/"):e},p={getTurbineHost:l,decorateWithDynamicHost:f,get isDynamicEnforced(){return i}};return d&&r.onDebugChanged((function(e){e?d.dynamicHostResolver=p:delete d.dynamicHostResolver})),p},f=function(e){var n=[];return e.forEach((function(e){e.events&&e.events.forEach((function(t){n.push({rule:e,event:t})}))})),n.sort((function(e,n){return e.event.ruleOrder-n.event.ruleOrder}))},p="debug",g=function(e,n){var t=function(){return"true"===e.getItem(p)},r=function(n){e.setItem(p,n)},o=[],i=function(e){o.push(e)};return n.outputEnabled=t(),{onDebugChanged:i,getDebugEnabled:t,setDebugEnabled:function(e){t()!==e&&(r(e),n.outputEnabled=e,o.forEach((function(n){n(e)})))}}},m="Module did not export a function.",v=function(e,n,t){return function(r,o,i){i=i||[];var a=e.getModuleExports(r.modulePath);if("function"!=typeof a)throw new Error(m);var c=e.getModuleDefinition(r.modulePath),u=r.settings||{};!r.hasTransformedFilePaths&&c.filePaths&&(t(u,c.filePaths,r.modulePath),r.hasTransformedFilePaths=!0);var s=n(u,o);return a.bind(null,s).apply(null,i)}},y=function(e){return"string"==typeof e?e.replace(/\s+/g," ").trim():e},h={LOG:"log",INFO:"info",DEBUG:"debug",WARN:"warn",ERROR:"error"},b="\ud83d\ude80",E=10===parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])?"[Launch]":b,w=!1,C=function(e){if(w&&window.console){var n=Array.prototype.slice.call(arguments,1);n.unshift(E),e!==h.DEBUG||window.console[e]||(e=h.INFO),window.console[e].apply(window.console,n)}},I=C.bind(null,h.LOG),S=C.bind(null,h.INFO),O=C.bind(null,h.DEBUG),k=C.bind(null,h.WARN),P=C.bind(null,h.ERROR),D=function(){var e=w;w=!0,C.apply(null,Array.prototype.concat(h.WARN,Array.prototype.slice.call(arguments))),e||(w=!1)},T={log:I,info:S,debug:O,warn:k,error:P,deprecation:D,get outputEnabled(){return w},set outputEnabled(e){w=e},createPrefixedLogger:function(e){var n="["+e+"]";return{log:I.bind(null,n),info:S.bind(null,n),debug:O.bind(null,n),warn:k.bind(null,n),error:P.bind(null,n)}}},R=s,A="com.adobe.reactor.",N=function(e,n){var t=A+(n||"");return{getItem:function(n){try{return R[e].getItem(t+n)}catch(e){return null}},setItem:function(n,r){try{return R[e].setItem(t+n,r),!0}catch(e){return!1}}}},x=N,M="dataElements.",q=x("sessionStorage",M),j=x("localStorage",M),L={PAGEVIEW:"pageview",SESSION:"session",VISITOR:"visitor"},_={},U=function(e){var n;try{n=JSON.stringify(e)}catch(e){}return n},B=y,F=T,H={setValue:function(e,n,t){var r;switch(n){case L.PAGEVIEW:return void(_[e]=t);case L.SESSION:return void((r=U(t))&&q.setItem(e,r));case L.VISITOR:return void((r=U(t))&&j.setItem(e,r))}},getValue:function(e,n){var t;switch(n){case L.PAGEVIEW:return _.hasOwnProperty(e)?_[e]:null;case L.SESSION:return null===(t=q.getItem(e))?t:JSON.parse(t);case L.VISITOR:return null===(t=j.getItem(e))?t:JSON.parse(t)}}},V=function(e,n,t,r){return"Failed to execute data element module "+e.modulePath+" for data element "+n+". "+t+(r?"\n"+r:"")},z=function(e,n,t,r,o){return function(i,a){var c=n(i);if(!c)return r?"":void 0;var u,s,d=c.storageDuration;try{u=e.getModuleExports(c.modulePath),s=e.getModuleDefinition(c.modulePath)}catch(e){return void F.error(V(c,i,e.message,e.stack))}if("function"==typeof u){var l,f=c.settings||{};!c.hasTransformedFilePaths&&s.filePaths&&(o(f,s.filePaths,c.modulePath),c.hasTransformedFilePaths=!0);try{l=u(t(f,a),a)}catch(e){return void F.error(V(c,i,e.message,e.stack))}return d&&(null!=l?H.setValue(i,d,l):l=H.getValue(i,d)),null==l&&null!=c.defaultValue&&(l=c.defaultValue),"string"==typeof l&&(c.cleanText&&(l=B(l)),c.forceLowerCase&&(l=l.toLowerCase())),l}F.error(V(c,i,"Module did not export a function."))}},J=y,Q={text:function(e){return e.textContent},cleanText:function(e){return J(e.textContent)}},G=function(e,n,t){for(var r,o=e,i=0,a=n.length;i<a;i++){if(null==o)return;var c=n[i];if(t&&"@"===c.charAt(0)){var u=c.slice(1);o=Q[u](o)}else if(o.getAttribute&&(r=c.match(/^getAttribute\((.+)\)$/))){var s=r[1];o=o.getAttribute(s)}else o=o[c]}return o},X=function(e,n,t){return function(r,o){var i;if(n(r))i=t(r,o);else{var a=r.split("."),c=a.shift();"this"===c?o&&(i=G(o.element,a,!0)):"event"===c?o&&(i=G(o,a)):"target"===c?o&&(i=G(o.target,a)):i=G(e[c],a)}return i}},W=function(e,n){return function(t){var r=t.split(".")[0];return Boolean(n(t)||"this"===r||"event"===r||"target"===r||e.hasOwnProperty(r))}},Y=function(e,n,t){var r={exports:{}};return e.call(r.exports,r,r.exports,n,t),r.exports},$=Y,K=T,Z=function(){var e={},n=function(n){var t=e[n];if(!t)throw new Error("Module "+n+" not found.");return t},t=function(){Object.keys(e).forEach((function(e){try{r(e)}catch(t){var n="Error initializing module "+e+". "+t.message+(t.stack?"\n"+t.stack:"");K.error(n)}}))},r=function(e){var t=n(e);return t.hasOwnProperty("exports")||(t.exports=$(t.definition.script,t.require,t.turbine)),t.exports};return{registerModule:function(n,t,r,o,i){var a={definition:t,extensionName:r,require:o,turbine:i};a.require=o,e[n]=a},hydrateCache:t,getModuleExports:r,getModuleDefinition:function(e){return n(e).definition},getModuleExtensionName:function(e){return n(e).extensionName}}},ee=T,ne=!1,te=function(e){return function(n,t){var r=e._monitors;r&&(ne||(ee.warn("The _satellite._monitors API may change at any time and should only be used for debugging."),ne=!0),r.forEach((function(e){e[n]&&e[n](t)})))}},re=T,oe=function(e,n,t){var r,o,i,a,c=[],u=function(r,o,i){if(!e(o))return r;c.push(o);var a=n(o,i);return c.pop(),null==a&&t?"":a};return r=function(e,n){var t=/^%([^%]+)%$/.exec(e);return t?u(e,t[1],n):e.replace(/%(.+?)%/g,(function(e,t){return u(e,t,n)}))},o=function(e,n){for(var t={},r=Object.keys(e),o=0;o<r.length;o++){var i=r[o],c=e[i];t[i]=a(c,n)}return t},i=function(e,n){for(var t=[],r=0,o=e.length;r<o;r++)t.push(a(e[r],n));return t},a=function(e,n){return"string"==typeof e?r(e,n):Array.isArray(e)?i(e,n):"object"==typeof e&&null!==e?o(e,n):e},function(e,n){return c.length>10?(re.error("Data element circular reference detected: "+c.join(" -> ")),e):a(e,n)}},ie=function(e){return function(){if("string"==typeof arguments[0])e[arguments[0]]=arguments[1];else if(arguments[0]){var n=arguments[0];for(var t in n)e[t]=n[t]}}},ae="undefined"!=typeof window&&window.Promise||void 0!==a&&a.Promise,ce=ae,ue=function(e,n,t){return function(r,o,i,a){return a.then((function(){var a,c=r.delayNext;return new ce((function(n,t){var o=e(r,i,[i]);if(!c)return n();var u=r.timeout,s=new ce((function(e,n){a=setTimeout((function(){n(new Error("A timeout occurred because the action took longer than "+u/1e3+" seconds to complete. "))}),u)}));ce.race([o,s]).then(n,t)})).catch((function(e){return clearTimeout(a),e=n(e),t(r,o,e),ce.reject(e)})).then((function(){clearTimeout(a)}))}))}},se=ae,de=function(e,n,t,r,o){return function(i,a,c,u){return u.then((function(){var u;return new se((function(n,t){var r=e(i,c,[c]),o=i.timeout,a=new se((function(e,n){u=setTimeout((function(){n(new Error("A timeout occurred because the condition took longer than "+o/1e3+" seconds to complete. "))}),o)}));se.race([r,a]).then(n,t)})).catch((function(e){return clearTimeout(u),e=n(e),r(i,a,e),se.reject(e)})).then((function(e){if(clearTimeout(u),!t(i,e))return o(i,a),se.reject()}))}))}},le=ae.resolve(),fe=function(e,n,t){return function(r,o){return r.conditions&&r.conditions.forEach((function(n){le=e(n,r,o,le)})),r.actions&&r.actions.forEach((function(e){le=n(e,r,o,le)})),le=(le=le.then((function(){t(r)}))).catch((function(){}))}},pe=function(e){return Boolean(e&&"object"==typeof e&&"function"==typeof e.then)},ge=function(e,n,t,r){return function(o,i){var a;if(o.conditions)for(var c=0;c<o.conditions.length;c++){a=o.conditions[c];try{var u=e(a,i,[i]);if(pe(u))throw new Error("Rule component sequencing must be enabled on the property for this condition to function properly.");if(!n(a,u))return t(a,o),!1}catch(e){return r(a,o,e),!1}}return!0}},me=function(e,n){return function(t,r){e(t,r)&&n(t,r)}},ve=function(e){return function(n){var t=e.getModuleDefinition(n.modulePath);return t&&t.displayName||n.modulePath}},ye=function(e){return function(n){var t=n.rule,r=n.event,o=e.getModuleDefinition(r.modulePath).name;return{$type:e.getModuleExtensionName(r.modulePath)+"."+o,$rule:{id:t.id,name:t.name}}}},he=function(e,n,t,r,o,i){return function(a,c){var u=c.rule,s=c.event;s.settings=s.settings||{};try{var d=o(c);n(s,null,[function(n){var r=t(d,n);a((function(){e(r,u)}))}])}catch(e){i.error(r(s,u,e))}}},be=function(e,n,t,r){return function(o,i,a){var c=n(o);t.error(e(c,i.name,a)),r("ruleActionFailed",{rule:i,action:o})}},Ee=function(e,n,t,r){return function(o,i,a){var c=n(o);t.error(e(c,i.name,a)),r("ruleConditionFailed",{rule:i,condition:o})}},we=function(e,n,t){return function(r,o){var i=e(r);n.log('Condition "'+i+'" for rule "'+o.name+'" was not met.'),t("ruleConditionFailed",{rule:o,condition:r})}},Ce=function(e,n){return function(t){e.log('Rule "'+t.name+'" fired.'),n("ruleCompleted",{rule:t})}},Ie=function(e,n,t){return function(r,o){var i;if(r.actions)for(var a=0;a<r.actions.length;a++){i=r.actions[a];try{e(i,o,[o])}catch(e){return void n(i,r,e)}}t(r)}},Se=function(e,n,t,r){return function(o,i){r("ruleTriggered",{rule:i}),e?t(i,o):n(i,o)}},Oe=function(e,n,t){return'Failed to execute "'+e+'" for "'+n+'" rule. '+t.message+(t.stack?"\n"+t.stack:"")},ke=function(e,n){return n&&!e.negate||!n&&e.negate},Pe=[],De=!1,Te=function(e){De?e():Pe.push(e)},Re=function(e,n,t){e(n).forEach((function(e){t(Te,e)})),De=!0,Pe.forEach((function(e){e()})),Pe=[]},Ae=function(e){if(e||(e=new Error("The extension triggered an error, but no error information was provided.")),!(e instanceof Error)){var n="object"==typeof e?JSON.stringify(e):String(e);e=new Error(n)}return e},Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.isPlainObject=t;var xe,Me=T,qe=u,{isPlainObject:je}=Ne,Le=function(e,n){return je(n=n||{})?n=qe({},n,e):qe(n,e),n.hasOwnProperty("type")||Object.defineProperty(n,"type",{get:function(){return Me.deprecation("Accessing event.type in Adobe Launch has been deprecated and will be removed soon. Please use event.$type instead."),n.$type}}),n},_e=function(e,n){return function(t,r){var o=e[t];if(o){var i=o.modules;if(i)for(var a=Object.keys(i),c=0;c<a.length;c++){var u=a[c],s=i[u];if(s.shared&&s.name===r)return n.getModuleExports(u)}}}},Ue=function(e,n){return function(){return n?e(n):{}}},Be=function(e,n,t){return function(r){if(t){var o=r.split(".");o.splice(o.length-1||1,0,"min"),r=o.join(".")}return e(n)+r}},Fe=".js",He=function(e){return e.substr(0,e.lastIndexOf("/"))},Ve=function(e,n){return-1!==e.indexOf(n,e.length-n.length)},ze=function(e,n){Ve(n,Fe)||(n+=Fe);var t=n.split("/"),r=He(e).split("/");return t.forEach((function(e){e&&"."!==e&&(".."===e?r.length&&r.pop():r.push(e))})),r.join("/")},Je={exports:{}};xe=function(){function e(){for(var e=0,n={};e<arguments.length;e++){var t=arguments[e];for(var r in t)n[r]=t[r]}return n}function n(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function t(r){function o(){}function i(n,t,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(t);/^[\{\[]/.test(a)&&(t=a)}catch(e){}t=r.write?r.write(t,n):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=n+"="+t+c}}function a(e,t){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var c=i[a].split("="),u=c.slice(1).join("=");t||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var s=n(c[0]);if(u=(r.read||r)(u,s)||n(u),t)try{u=JSON.parse(u)}catch(e){}if(o[s]=u,e===s)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(n,t){i(n,"",e(t,{expires:-1}))},o.defaults={},o.withConverter=t,o}return t((function(){}))},Je.exports=xe();var Qe=Je.exports,Ge={get:Qe.get,set:Qe.set,remove:Qe.remove},Xe=ae,We=function(e,n){return new Xe((function(t,r){n.onload=function(){t(n)},n.onerror=function(){r(new Error("Failed to load script "+e))}}))},Ye=function(e){var n={};if(!e||"string"!=typeof e)return n;var t=e.trim().replace(/^[?#&]/,""),r=new URLSearchParams(t),o=r.keys();do{var i=o.next(),a=i.value;if(a){var c=r.getAll(a);1===c.length?n[a]=c[0]:n[a]=c}}while(!1===i.done);return n},$e=function(e){var n="{{space}}",t=new URLSearchParams;return Object.keys(e).forEach((function(r){var o=e[r];"string"==typeof e[r]?o=o.replace(/ /g,n):["object","undefined"].includes(typeof o)&&!Array.isArray(o)&&(o=""),Array.isArray(o)?o.forEach((function(e){t.append(r,e)})):t.append(r,o)})),t.toString().replace(new RegExp(encodeURIComponent(n),"g"),"%20")},Ke="@adobe/reactor-",Ze={cookie:Ge,document:c,"load-script":function(e){var n=document.createElement("script");n.src=e,n.async=!0;var t=We(e,n);return document.getElementsByTagName("head")[0].appendChild(n),t},"object-assign":u,promise:ae,"query-string":{parse:function(e){return Ye(e)},stringify:function(e){return $e(e)}},window:s},en=function(e){return function(n){if(0===n.indexOf(Ke)){var t=n.substr(Ke.length),r=Ze[t];if(r)return r}if(0===n.indexOf("./")||0===n.indexOf("../"))return e(n);throw new Error('Cannot resolve module "'+n+'".')}},nn=_e,tn=Ue,rn=Be,on=T,an=ze,cn=en,un=function(e,n,t,r,o,i,a){var c=e.extensions,u=e.buildInfo,s=e.environment,d=e.property.settings;if(c){var l=nn(c,n);Object.keys(c).forEach((function(f){var p=c[f],g=p.settings;Array.isArray(p.filePaths)&&(g=i(g,p.filePaths));var m=tn(r,g);if(p.modules){var v=on.createPrefixedLogger(p.displayName),y=rn(a,p.hostedLibFilesBaseUrl,u.minified),h={buildInfo:u,environment:s,property:{name:e.property.name,id:e.property.id},getDataElementValue:o,getExtensionSettings:m,getHostedLibFileUrl:y,getSharedModule:l,logger:v,propertySettings:d,replaceTokens:r,onDebugChanged:t.onDebugChanged,get debugEnabled(){return t.getDebugEnabled()}};Object.keys(p.modules).forEach((function(e){var t=p.modules[e],r=cn((function(t){var r=an(e,t);return n.getModuleExports(r)}));n.registerModule(e,t,f,r,h)}))}})),n.hydrateCache()}return n},sn=Ge,dn=T,ln=function(e,n,t,r,o){var i=dn.createPrefixedLogger("Custom Script");e.track=function(e){dn.log('"'+e+'" does not match any direct call identifiers.')},e.getVisitorId=function(){return null},e.property={name:n.property.name,id:n.property.id},e.company=n.company,e.buildInfo=n.buildInfo,e.environment=n.environment,e.logger=i,e.notify=function(e,n){switch(dn.deprecation("_satellite.notify is deprecated. Please use the `_satellite.logger` API."),n){case 3:i.info(e);break;case 4:i.warn(e);break;case 5:i.error(e);break;default:i.log(e)}},e.getVar=r,e.setVar=o,e.setCookie=function(e,n,t){var r="",o={};t&&(r=", { expires: "+t+" }",o.expires=t);var i='_satellite.setCookie is deprecated. Please use _satellite.cookie.set("'+e+'", "'+n+'"'+r+").";dn.deprecation(i),sn.set(e,n,o)},e.readCookie=function(e){return dn.deprecation('_satellite.readCookie is deprecated. Please use _satellite.cookie.get("'+e+'").'),sn.get(e)},e.removeCookie=function(e){dn.deprecation('_satellite.removeCookie is deprecated. Please use _satellite.cookie.remove("'+e+'").'),sn.remove(e)},e.cookie=sn,e.pageBottom=function(){},e.setDebug=t;var a=!1;Object.defineProperty(e,"_container",{get:function(){return a||(dn.warn("_satellite._container may change at any time and should only be used for debugging."),a=!0),n}})},{isPlainObject:fn}=Ne,pn=c,gn=u,mn=l,vn=f,yn=g,hn=v,bn=z,En=X,wn=W,Cn=Z,In=te,Sn=oe,On=ie,kn=ue,Pn=de,Dn=fe,Tn=ge,Rn=me,An=ve,Nn=ye,xn=he,Mn=be,qn=Ee,jn=we,Ln=Ce,_n=Ie,Un=Se,Bn=Oe,Fn=ke,Hn=Re,Vn=Ae,zn=Le,Jn=N,Qn=un,Gn=ln,Xn=function(e,n){return function(t,r,o){return e&&fn(t)&&Object.keys(t).length&&Array.isArray(r)&&r.length?(r.forEach((function(e){Boolean(null!=o&&/^core\/.*actions.*\/customCode\.js$/.test(o))&&"source"===e&&!t.isExternal||i(e.split("."),t,n)})),t):t}},Wn=T,Yn=window._satellite;if(Yn&&!window.__satelliteLoaded){window.__satelliteLoaded=!0;var $n=Yn.container;delete Yn.container;var Kn=gn({},$n.buildInfo);Object.defineProperty(Kn,"environment",{get:function(){return Wn.deprecation("container.buildInfo.environment is deprecated.Please use `container.environment.stage` instead"),$n.environment.stage}}),$n.buildInfo=Kn;var Zn,et=yn(Jn("localStorage"),Wn),nt="";pn.currentScript&&pn.currentScript.getAttribute("src")&&(nt=pn.currentScript.getAttribute("src"));try{Zn=mn(nt,Boolean($n.company.dynamicCdnEnabled),$n.company.cdnAllowList,et)}catch(e){throw Wn.warn("Please review the following error:"),e}var tt,rt=Xn(Zn.isDynamicEnforced,Zn.decorateWithDynamicHost),ot=Cn(),it=$n.property.settings.undefinedVarsReturnEmpty,at=$n.property.settings.ruleComponentSequencingEnabled,ct=$n.dataElements||{},ut=function(e){return ct[e]},st=function(){return tt.apply(null,arguments)},dt=bn(ot,ut,st,it,rt),lt={},ft=On(lt),pt=wn(lt,ut),gt=En(lt,ut,dt);tt=Sn(pt,gt,it),Gn(Yn,$n,et.setDebugEnabled,gt,ft),Qn($n,ot,et,tt,dt,rt,Zn.decorateWithDynamicHost);var mt=In(Yn),vt=hn(ot,tt,rt),yt=An(ot),ht=jn(yt,Wn,mt),bt=qn(Bn,yt,Wn,mt),Et=Mn(Bn,yt,Wn,mt),wt=Ln(Wn,mt),Ct=xn(Un(at,Rn(Tn(vt,Fn,ht,bt),_n(vt,Et,wt)),Dn(Pn(vt,Vn,Fn,bt,ht),kn(vt,Vn,Et),wt),mt),vt,zn,Bn,Nn(ot),Wn);Hn(vn,$n.rules||[],Ct)}return e(Yn)}console.warn("Adobe Launch is unsupported in IE 9 and below.")}();